import{p,a as A}from"./chunk-NL6KNZEE-BTkWJe7M.js";import{c as fe,a as Pe,p as ut}from"./middleware-XeL71aNN.js";const Oe=e=>e.filter(t=>!!t).join(" ");function lt(e){return e.filter(t=>t!=="uuid")}const D="notification",dt=["uuid","entityType","type","tags","title","messages","hideTimeout"];lt(dt);function k(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function be(e,t){let r;const n=()=>{if(r)return r;const o=indexedDB.open(e);return o.onupgradeneeded=()=>o.result.createObjectStore(t),r=k(o),r.then(s=>{s.onclose=()=>r=void 0},()=>{}),r};return(o,s)=>n().then(i=>s(i.transaction(t,o).objectStore(t)))}let W;function ne(){return W||(W=be("keyval-store","keyval")),W}function ft(e,t=ne()){return t("readonly",r=>k(r.get(e)))}function gt(e,t,r=ne()){return r("readwrite",n=>(n.put(t,e),k(n.transaction)))}function yt(e,t=ne()){return t("readwrite",r=>(r.delete(e),k(r.transaction)))}class mt{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(t,r){this.keyToValue.set(t,r),this.valueToKey.set(r,t)}getByKey(t){return this.keyToValue.get(t)}getByValue(t){return this.valueToKey.get(t)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class Be{constructor(t){this.generateIdentifier=t,this.kv=new mt}register(t,r){this.kv.getByValue(t)||(r||(r=this.generateIdentifier(t)),this.kv.set(r,t))}clear(){this.kv.clear()}getIdentifier(t){return this.kv.getByValue(t)}getValue(t){return this.kv.getByKey(t)}}class pt extends Be{constructor(){super(t=>t.name),this.classToAllowedProps=new Map}register(t,r){typeof r=="object"?(r.allowProps&&this.classToAllowedProps.set(t,r.allowProps),super.register(t,r.identifier)):super.register(t,r)}getAllowedProps(t){return this.classToAllowedProps.get(t)}}function St(e){if("values"in Object)return Object.values(e);const t=[];for(const r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}function wt(e,t){const r=St(e);if("find"in r)return r.find(t);const n=r;for(let o=0;o<n.length;o++){const s=n[o];if(t(s))return s}}function O(e,t){Object.entries(e).forEach(([r,n])=>t(n,r))}function N(e,t){return e.indexOf(t)!==-1}function ge(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(t(n))return n}}class Et{constructor(){this.transfomers={}}register(t){this.transfomers[t.name]=t}findApplicable(t){return wt(this.transfomers,r=>r.isApplicable(t))}findByName(t){return this.transfomers[t]}}const It=e=>Object.prototype.toString.call(e).slice(8,-1),Re=e=>typeof e>"u",At=e=>e===null,B=e=>typeof e!="object"||e===null||e===Object.prototype?!1:Object.getPrototypeOf(e)===null?!0:Object.getPrototypeOf(e)===Object.prototype,J=e=>B(e)&&Object.keys(e).length===0,h=e=>Array.isArray(e),ht=e=>typeof e=="string",Tt=e=>typeof e=="number"&&!isNaN(e),_t=e=>typeof e=="boolean",Pt=e=>e instanceof RegExp,R=e=>e instanceof Map,M=e=>e instanceof Set,Me=e=>It(e)==="Symbol",Ot=e=>e instanceof Date&&!isNaN(e.valueOf()),bt=e=>e instanceof Error,ye=e=>typeof e=="number"&&isNaN(e),Bt=e=>_t(e)||At(e)||Re(e)||Tt(e)||ht(e)||Me(e),Rt=e=>typeof e=="bigint",Mt=e=>e===1/0||e===-1/0,vt=e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),Ut=e=>e instanceof URL,ve=e=>e.replace(/\./g,"\\."),X=e=>e.map(String).map(ve).join("."),b=e=>{const t=[];let r="";for(let o=0;o<e.length;o++){let s=e.charAt(o);if(s==="\\"&&e.charAt(o+1)==="."){r+=".",o++;continue}if(s==="."){t.push(r),r="";continue}r+=s}const n=r;return t.push(n),t};function w(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}const Ue=[w(Re,"undefined",()=>null,()=>{}),w(Rt,"bigint",e=>e.toString(),e=>typeof BigInt<"u"?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),w(Ot,"Date",e=>e.toISOString(),e=>new Date(e)),w(bt,"Error",(e,t)=>{const r={name:e.name,message:e.message};return t.allowedErrorProps.forEach(n=>{r[n]=e[n]}),r},(e,t)=>{const r=new Error(e.message);return r.name=e.name,r.stack=e.stack,t.allowedErrorProps.forEach(n=>{r[n]=e[n]}),r}),w(Pt,"regexp",e=>""+e,e=>{const t=e.slice(1,e.lastIndexOf("/")),r=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,r)}),w(M,"set",e=>[...e.values()],e=>new Set(e)),w(R,"map",e=>[...e.entries()],e=>new Map(e)),w(e=>ye(e)||Mt(e),"number",e=>ye(e)?"NaN":e>0?"Infinity":"-Infinity",Number),w(e=>e===0&&1/e===-1/0,"number",()=>"-0",Number),w(Ut,"URL",e=>e.toString(),e=>new URL(e))];function H(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}const Ce=H((e,t)=>Me(e)?!!t.symbolRegistry.getIdentifier(e):!1,(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,r)=>{const n=r.symbolRegistry.getValue(t[1]);if(!n)throw new Error("Trying to deserialize unknown symbol");return n}),Ct=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),De=H(vt,e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{const r=Ct[t[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(e)});function Ne(e,t){return e!=null&&e.constructor?!!t.classRegistry.getIdentifier(e.constructor):!1}const Le=H(Ne,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{const r=t.classRegistry.getAllowedProps(e.constructor);if(!r)return{...e};const n={};return r.forEach(o=>{n[o]=e[o]}),n},(e,t,r)=>{const n=r.classRegistry.getValue(t[1]);if(!n)throw new Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),e)}),xe=H((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,r)=>{const n=r.customTransformerRegistry.findByName(t[1]);if(!n)throw new Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),Dt=[Le,Ce,xe,De],me=(e,t)=>{const r=ge(Dt,o=>o.isApplicable(e,t));if(r)return{value:r.transform(e,t),type:r.annotation(e,t)};const n=ge(Ue,o=>o.isApplicable(e,t));if(n)return{value:n.transform(e,t),type:n.annotation}},Fe={};Ue.forEach(e=>{Fe[e.annotation]=e});const Nt=(e,t,r)=>{if(h(t))switch(t[0]){case"symbol":return Ce.untransform(e,t,r);case"class":return Le.untransform(e,t,r);case"custom":return xe.untransform(e,t,r);case"typed-array":return De.untransform(e,t,r);default:throw new Error("Unknown transformation: "+t)}else{const n=Fe[t];if(!n)throw new Error("Unknown transformation: "+t);return n.untransform(e,r)}},P=(e,t)=>{if(t>e.size)throw new Error("index out of bounds");const r=e.keys();for(;t>0;)r.next(),t--;return r.next().value};function ke(e){if(N(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(N(e,"prototype"))throw new Error("prototype is not allowed as a property");if(N(e,"constructor"))throw new Error("constructor is not allowed as a property")}const Lt=(e,t)=>{ke(t);for(let r=0;r<t.length;r++){const n=t[r];if(M(e))e=P(e,+n);else if(R(e)){const o=+n,s=+t[++r]==0?"key":"value",i=P(e,o);switch(s){case"key":e=i;break;case"value":e=e.get(i);break}}else e=e[n]}return e},Z=(e,t,r)=>{if(ke(t),t.length===0)return r(e);let n=e;for(let s=0;s<t.length-1;s++){const i=t[s];if(h(n)){const a=+i;n=n[a]}else if(B(n))n=n[i];else if(M(n)){const a=+i;n=P(n,a)}else if(R(n)){if(s===t.length-2)break;const u=+i,l=+t[++s]==0?"key":"value",d=P(n,u);switch(l){case"key":n=d;break;case"value":n=n.get(d);break}}}const o=t[t.length-1];if(h(n)?n[+o]=r(n[+o]):B(n)&&(n[o]=r(n[o])),M(n)){const s=P(n,+o),i=r(s);s!==i&&(n.delete(s),n.add(i))}if(R(n)){const s=+t[t.length-2],i=P(n,s);switch(+o==0?"key":"value"){case"key":{const u=r(i);n.set(u,n.get(i)),u!==i&&n.delete(i);break}case"value":{n.set(i,r(n.get(i)));break}}}return e};function Q(e,t,r=[]){if(!e)return;if(!h(e)){O(e,(s,i)=>Q(s,t,[...r,...b(i)]));return}const[n,o]=e;o&&O(o,(s,i)=>{Q(s,t,[...r,...b(i)])}),t(n,r)}function xt(e,t,r){return Q(t,(n,o)=>{e=Z(e,o,s=>Nt(s,n,r))}),e}function Ft(e,t){function r(n,o){const s=Lt(e,b(o));n.map(b).forEach(i=>{e=Z(e,i,()=>s)})}if(h(t)){const[n,o]=t;n.forEach(s=>{e=Z(e,b(s),()=>e)}),o&&O(o,r)}else O(t,r);return e}const kt=(e,t)=>B(e)||h(e)||R(e)||M(e)||Ne(e,t);function Ht(e,t,r){const n=r.get(e);n?n.push(t):r.set(e,[t])}function qt(e,t){const r={};let n;return e.forEach(o=>{if(o.length<=1)return;t||(o=o.map(a=>a.map(String)).sort((a,u)=>a.length-u.length));const[s,...i]=o;s.length===0?n=i.map(X):r[X(s)]=i.map(X)}),n?J(r)?[n]:[n,r]:J(r)?void 0:r}const He=(e,t,r,n,o=[],s=[],i=new Map)=>{const a=Bt(e);if(!a){Ht(e,o,t);const m=i.get(e);if(m)return n?{transformedValue:null}:m}if(!kt(e,r)){const m=me(e,r),y=m?{transformedValue:m.value,annotations:[m.type]}:{transformedValue:e};return a||i.set(e,y),y}if(N(s,e))return{transformedValue:null};const u=me(e,r),l=(u==null?void 0:u.value)??e,d=h(l)?[]:{},E={};O(l,(m,y)=>{if(y==="__proto__"||y==="constructor"||y==="prototype")throw new Error(`Detected property ${y}. This is a prototype pollution risk, please remove it from your object.`);const T=He(m,t,r,n,[...o,y],[...s,e],i);d[y]=T.transformedValue,h(T.annotations)?E[y]=T.annotations:B(T.annotations)&&O(T.annotations,(K,ct)=>{E[ve(y)+"."+ct]=K})});const _=J(E)?{transformedValue:d,annotations:u?[u.type]:void 0}:{transformedValue:d,annotations:u?[u.type,E]:E};return a||i.set(e,_),_};function qe(e){return Object.prototype.toString.call(e).slice(8,-1)}function pe(e){return qe(e)==="Array"}function Vt(e){if(qe(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}function jt(e,t,r,n,o){const s={}.propertyIsEnumerable.call(n,t)?"enumerable":"nonenumerable";s==="enumerable"&&(e[t]=r),o&&s==="nonenumerable"&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function ee(e,t={}){if(pe(e))return e.map(o=>ee(o,t));if(!Vt(e))return e;const r=Object.getOwnPropertyNames(e),n=Object.getOwnPropertySymbols(e);return[...r,...n].reduce((o,s)=>{if(pe(t.props)&&!t.props.includes(s))return o;const i=e[s],a=ee(i,t);return jt(o,s,a,e,t.nonenumerable),o},{})}class c{constructor({dedupe:t=!1}={}){this.classRegistry=new pt,this.symbolRegistry=new Be(r=>r.description??""),this.customTransformerRegistry=new Et,this.allowedErrorProps=[],this.dedupe=t}serialize(t){const r=new Map,n=He(t,r,this,this.dedupe),o={json:n.transformedValue};n.annotations&&(o.meta={...o.meta,values:n.annotations});const s=qt(r,this.dedupe);return s&&(o.meta={...o.meta,referentialEqualities:s}),o}deserialize(t){const{json:r,meta:n}=t;let o=ee(r);return n!=null&&n.values&&(o=xt(o,n.values,this)),n!=null&&n.referentialEqualities&&(o=Ft(o,n.referentialEqualities)),o}stringify(t){return JSON.stringify(this.serialize(t))}parse(t){return this.deserialize(JSON.parse(t))}registerClass(t,r){this.classRegistry.register(t,r)}registerSymbol(t,r){this.symbolRegistry.register(t,r)}registerCustom(t,r){this.customTransformerRegistry.register({name:r,...t})}allowErrorProps(...t){this.allowedErrorProps.push(...t)}}c.defaultInstance=new c;c.serialize=c.defaultInstance.serialize.bind(c.defaultInstance);c.deserialize=c.defaultInstance.deserialize.bind(c.defaultInstance);c.stringify=c.defaultInstance.stringify.bind(c.defaultInstance);c.parse=c.defaultInstance.parse.bind(c.defaultInstance);c.registerClass=c.defaultInstance.registerClass.bind(c.defaultInstance);c.registerSymbol=c.defaultInstance.registerSymbol.bind(c.defaultInstance);c.registerCustom=c.defaultInstance.registerCustom.bind(c.defaultInstance);c.allowErrorProps=c.defaultInstance.allowErrorProps.bind(c.defaultInstance);c.serialize;c.deserialize;c.stringify;c.parse;c.registerClass;c.registerCustom;c.registerSymbol;c.allowErrorProps;const Ve="trader-db-name",je="trader-object-store-name",Y=be(Ve,je);function zt(){return{getItem:async e=>{const t=await ft(e,Y);return t?c.parse(t):null},setItem:async(e,t)=>{await gt(e,c.stringify(t),Y)},removeItem:async e=>{await yt(e,Y)}}}async function $t(e,t){return new Promise((r,n)=>{const o=indexedDB.open(e);o.onerror=function(i){const a="Error. Opening connection to indexedDB is failed";console.error(a,i),n(a)},o.onsuccess=function(){const i=o.result;r(i)},o.onupgradeneeded=function(i){var u;const a=(u=i.target)==null?void 0:u.result;if(!a){const l="Error. Opening connection to indexedDB is failed";console.error(l,i),n(l);return}a.onerror=l=>{n(l)};try{return a.createObjectStore(t)}catch(l){console.error(l),n(l)}}})}async function oe(e,t,r){const o=(await $t(e,t)).transaction([t],r);return o.oncomplete=()=>{},o.onerror=s=>{const i="Error. Transaction creation is failed";throw console.error(i,o.error,s),new Error(i)},o}function Gt(e){return new Promise((t,r)=>{const n=e.clear();n.onerror=o=>{const s="Error. Object store clearing is failed";console.error(s,o),r(s)},n.onsuccess=()=>{t("Success: Object store cleared")}})}async function ln(e,t){try{const n=(await oe(e,t,"readwrite")).objectStore(t);await Gt(n)}catch(r){const n="Error. Impossible to clear indexedDB";return(r==null?void 0:r.name)==="NotFoundError"?"Error. IndexedDB is empty":(console.error(n,r),`${n}. ${r}`)}}async function Kt(e){return new Promise((t,r)=>{const n=e.openCursor(),o={};n.onerror=s=>{const i="Error. objectStoreRequest failed";console.error(i,s),r({error:i})},n.onsuccess=s=>{var a;const i=(a=s.target)==null?void 0:a.result;if(i){const u=i.key,l=i.value;o[u]=l,i.continue()}else t({result:o})}})}async function dn(e,t){try{const n=(await oe(e,t,"readwrite")).objectStore(t),{error:o,result:s}=await Kt(n);if(o)throw new Error(o);return{indexDBState:s}}catch(r){const n="Error. Impossible to read all records from indexedDB";return(r==null?void 0:r.name)==="NotFoundError"?{indexDBState:void 0,error:void 0}:(console.error(n,r),{error:`${n}. ${r}`})}}async function Wt(e,t,r){return new Promise((n,o)=>{const s=e.put(r,t);s.onerror=i=>{const a="Error. objectStoreRequest failed";console.error(a,i),o(a)},s.onsuccess=()=>{n(void 0)}})}async function Xt(e,t,r){try{const o=(await oe(e,t,"readwrite")).objectStore(t);Object.entries(r).forEach(([s,i])=>{Wt(o,s,i)})}catch(n){return console.error(n),`${n}`}}const q="gzip",Se="trader_",v="json",se="gz",ze="application/octet-stream",$e=`${v}.${se}`,Yt=[`.${v}`,`.${$e}`],Jt=Yt.join(", ");function Zt(e,t){const r=e.name.split(".");let n=r.pop();return n===t&&(n=[r.pop(),n].join(".")),n}function fn(e,t){const r=Zt(e,se);return r?t.includes(`.${r}`):!1}async function Qt(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n),n.onerror=o=>r(o),n.readAsArrayBuffer(e)})}async function er(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n),n.onerror=o=>r(o),n.readAsText(e)})}function we(){return new Date().toISOString().replaceAll(":","-").replaceAll("T","_").replaceAll(/\.\d{3}Z/g,"")}function Ge(e,t){const r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function tr(e,t){const r="data:text/plain;charset=utf-8,"+encodeURIComponent(t);Ge(e,r)}function rr(e,t,r=ze){const n=window.URL.createObjectURL(new Blob([t],{type:r}));Ge(e,n)}function nr(e){return c.stringify(e)}async function gn(e){try{const t=nr(e),r=await or(t,q);if(r){const o=`${Se}${we()}.${$e}`;rr(o,r,ze);return}const n=`${Se}${we()}.${v}`;tr(n,t)}catch(t){return console.error(t),t}}function or(e,t=q){try{const r=new TextEncoder().encode(e),n=new CompressionStream(t),o=n.writable.getWriter();return o.write(r),o.close(),new Response(n.readable).arrayBuffer()}catch(r){console.error(r);return}}function sr(e,t=q){try{const r=new DecompressionStream(t),n=r.writable.getWriter();return n.write(e),n.close(),new Response(r.readable).arrayBuffer().then(o=>new TextDecoder().decode(o))}catch(r){console.error(r);return}}function ir(e){return c.parse(e)}async function ar(e){let t;const r=e.type;if(r==="application/gzip"){const n=(await Qt(e)).result;if(t=await sr(n,q),!t){const o=`Upload file error. Impossible to decompress file (${v}.${se} format)`;throw new Error(o)}}else if(r==="application/json"){if(t=(await er(e)).result,!t){const n=`Upload file error. Impossible to read file (${v} format)`;throw new Error(n)}}else{const n=`Upload file error. Unsupported file format. Only ${Jt} formats are supported`;throw new Error(n)}return t}async function cr(e){try{const t=ir(e);if(!t)return"Upload file error. Impossible to read json data from the file";if(await Xt(Ve,je,t))return"Upload file error. Impossible set data into indexedBD"}catch(t){return console.error(t),`Upload file error. ${t}`}}function ur(e,t=""){const r=e.replace(/^[^/]*\//,"");return new Promise((n,o)=>{fetch(e).then(async function(i){const a=await i.blob(),u=new File([a],r,{type:t});n({file:u,error:void 0})}).catch(function(i){o({file:void 0,error:i})})})}function lr(e){return Number.isFinite(e)}function dr(){return{getItem:e=>{const t=window.localStorage.getItem(e);return t?c.parse(t):null},setItem:(e,t)=>{window.localStorage.setItem(e,c.stringify(t))},removeItem:e=>window.localStorage.removeItem(e)}}function fr(){return{getItem:e=>{const t=window.sessionStorage.getItem(e);return t?c.parse(t):null},setItem:(e,t)=>{window.sessionStorage.setItem(e,c.stringify(t))},removeItem:e=>window.sessionStorage.removeItem(e)}}const gr="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let yr=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=gr[r[e]&63];return t};const F=()=>yr();function f(e){return Array.from(e.keys())}function V(e){return Array.from(e.values())}const mr=e=>{if(typeof window>"u")return e;const t=r=>{r.key===e.persist.getOptions().name&&r.newValue&&e.persist.rehydrate()};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},Ee=0;function Ie(){return new Date().getTime()}function pr(e){const t=V(e);if(t.length)return t.reduce((r,n)=>n.createdAt<r.createdAt?n:r,t[0])}function Sr(e,t=1){const r=V(e);return r.length?(r.sort((n,o)=>n.createdAt-o.createdAt),r.slice(0,t)):[]}function wr(e){return Pe({uuids:Array(),entities:new Map,isHydrated:!1,isHydrating:!1},(t,r)=>({items(){return V(r().entities)},getByUuid(n){return r().entities.get(n)},create(n){const o={...n,uuid:F(),createdAt:Ie()};return t(s=>{const i=new Map(s.entities);if(i.set(o.uuid,o),i.size>=e){const a=pr(i);if(!a)return{entities:i,uuids:f(i)};i.delete(a.uuid)}return{entities:i,uuids:f(i)}}),o},update(n){const s=r().entities.get(n.uuid);if(!s)return;const a={...s,...n};return t(u=>{const l=new Map(u.entities);return l.set(a.uuid,a),{entities:l,uuids:f(l)}}),a},delete(n){t(o=>{const s=new Map(o.entities);return s.delete(n.uuid),{entities:s,uuids:f(s)}})},createMultiple(n){const o=n.map(s=>({...s,uuid:F(),createdAt:Ie()}));t(s=>{const i=new Map(s.entities);if(o.forEach(a=>{i.set(a.uuid,a)}),i.size>=e){const a=i.size-e;Sr(i,a).forEach(l=>{i.delete(l.uuid)})}return{entities:i,uuids:f(i)}})},deleteMultiple(n){t(o=>{const s=new Map(o.entities);return n.forEach(i=>{s.delete(i)}),{entities:s,uuids:f(s)}})},clear(){t(()=>({entities:new Map,uuids:new Array}))},refreshUuids(){t(n=>({uuids:f(n.entities)}))},setIsHydrating(n){t(()=>({isHydrating:n}))},setIsHydrated(){t(n=>({isHydrated:!0,isHydrating:!1,uuids:f(n.entities)}))}}))}function Er(){return Pe({uuids:Array(),entities:new Map,isHydrated:!1,isHydrating:!1},(e,t)=>({items(){return V(t().entities)},getByUuid(r){return t().entities.get(r)},create(r){const n={...r,uuid:F()};return e(o=>{const s=new Map(o.entities);return s.set(n.uuid,n),{entities:s,uuids:f(s)}}),n},update(r){const o=t().entities.get(r.uuid);if(!o)return;const i={...o,...r};return e(a=>{const u=new Map(a.entities);return u.set(i.uuid,i),{entities:u,uuids:f(u)}}),i},delete(r){e(n=>{const o=new Map(n.entities);return o.delete(r.uuid),{entities:o,uuids:f(o)}})},createMultiple(r){const n=r.map(o=>({...o,uuid:F()}));e(o=>{const s=new Map(o.entities);return n.forEach(i=>{s.set(i.uuid,i)}),{entities:s,uuids:f(s)}})},deleteMultiple(r){e(n=>{const o=new Map(n.entities);return r.forEach(s=>{o.delete(s)}),{entities:o,uuids:f(o)}})},clear(){e(()=>({entities:new Map,uuids:new Array}))},refreshUuids(){e(r=>({uuids:f(r.entities)}))},setIsHydrating(r){e(()=>({isHydrating:r}))},setIsHydrated(){e(r=>({isHydrated:!0,isHydrating:!1,uuids:f(r.entities)}))}}))}function S({persistStorageItemKey:e,persistStorageType:t="indexedDB",maxCapacity:r,isListeningStorageDOMEvent:n=!0,skipHydration:o=!0}={}){let s;if(lr(r)&&r>0?s=wr(r):s=Er(),typeof e!="string"||!e)return fe(s);let i;t==="indexedDB"?i=zt():t==="sessionStorage"?i=fr():i=dr();const a=fe(ut(s,{name:e,storage:i,skipHydration:!!o,onRehydrateStorage:u=>function(){window.setTimeout(function(){u.setIsHydrated(),window.setTimeout(function(){Vr(a)},Ee)},Ee)},partialize:u=>{const l=["isHydrated","isHydrating","uuids","items"];return Object.fromEntries(Object.entries(u).filter(([d])=>!l.includes(d)))}}));return n&&mr(a),a}const Ke=S({persistStorageItemKey:"buy-orders"});function We(){return Ke.getState().items()}function yn({locationUuid:e,productUuid:t}){return We().find(n=>n.locationUuid===e&&n.productUuid===t)}function mn({uuid:e,locationUuid:t,productUuid:r}){return We().find(o=>o.uuid!==e&&o.productUuid===r&&o.locationUuid===t)}const Xe=S({persistStorageItemKey:"planetary-systems"});function Ye(){return Xe.getState()}function Ir(){return Ye().entities}function ie(){return Ye().items()}function Ar(e){return Ir().get(e)}function Je(e){return ie().find(t=>t.name.localeCompare(e)===0)}function pn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return ie().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}function Sn({uuid:e,position:t}){return ie().find(r=>r.uuid!==e&&r.position===t)}const ae=S({persistStorageItemKey:"locations"});function hr(){return ae.getState().entities}function U(){return ae.getState().items()}function Tr(e){return hr().get(e)}function wn({uuid:e,id:t}){if(!t)return;const r=t.toLocaleUpperCase();return U().find(n=>n.uuid!==e&&!!n.id&&n.id.localeCompare(r)===0)}function _r({id:e,name:t}){if(!(!e&&!t))return U().find(r=>e&&t?r.id===e&&r.name===t:e&&!t?r.id===e:r.name===t)}function En({id:e,name:t,planetarySystemName:r}){if(!(!e&&!t&&!r)){if(r){const n=Je(r);if(n){const o=n.uuid;return U().find(i=>e&&t?i.id===e&&i.name===t&&i.planetarySystemUuid===o:e&&!t?i.id===e&&i.planetarySystemUuid===o:i.name===t&&i.planetarySystemUuid===o)}}return _r({id:e,name:t})}}function In(e){return U().filter(r=>r.planetarySystemUuid===e)}const Ze=S({persistStorageItemKey:"location-types"});function Qe(){return Ze.getState()}function Pr(){return Qe().entities}function et(){return Qe().items()}function An(e){return Pr().get(e)}function hn(e){return et().find(t=>t.name.localeCompare(e)===0)}function Tn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return et().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const ce=S({persistStorageItemKey:"moving-entities"});function Or(){return ce.getState().entities}function C(){return ce.getState().items()}function _n(e){return Or().get(e)}function Pn({uuid:e,id:t}){if(!t)return;const r=t.toLocaleUpperCase();return C().find(n=>n.uuid!==e&&!!n.id&&n.id.localeCompare(r)===0)}function On({uuid:e,originalId:t}){if(!t)return;const r=t.toLocaleUpperCase();return C().find(n=>n.uuid!==e&&!!n.originalId&&n.originalId.localeCompare(r)===0)}function br({id:e,name:t}){if(!(!e&&!t))return C().find(r=>e&&t?r.id===e&&r.name===t:e&&!t?r.id===e:r.name===t)}function bn({id:e,name:t,planetarySystemName:r}){if(!(!e&&!t&&!r)){if(r){const n=Je(r);if(n){const o=n.uuid,s=C();let i=s.find(a=>e&&t?a.id===e&&a.name===t&&a.locationUuid===o:e&&!t?a.id===e&&a.locationUuid===o:a.name===t&&a.locationUuid===o);if(!i){const l=U().filter(d=>d.planetarySystemUuid===o).map(d=>d.uuid);i=s.find(d=>e&&t?d.id===e&&d.name===t&&l.includes(d.locationUuid):e&&!t?d.id===e&&l.includes(d.locationUuid):d.name===t&&l.includes(d.locationUuid))}return i}}return br({id:e,name:t})}}function Bn(e){return C().filter(r=>{const n=r.locationUuid;if(!n)return!1;const o=Tr(n);if(o)return o.planetarySystemUuid===e;const s=Ar(n);if(s)return s.uuid===e})}const j=S({persistStorageItemKey:"moving-entity-classes"});function Br(){return j.getState().entities}function tt(){return j.getState().items()}function Rn(){return j.getState().isHydrating}function Mn(e){return Br().get(e)}function vn(e){return tt().find(t=>t.name.localeCompare(e)===0)}function Un({uuid:e,name:t}){const r=t.toLocaleLowerCase();return tt().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const Rr=1e3,ue=S({persistStorageItemKey:"prices-at-marks",maxCapacity:Rr});function Mr(){return ue.getState().items()}function rt(e){return Mr().find(t=>t.orderUuid===e)}function vr(e){return e?((e==null?void 0:e.pricesAtMarks.length)||0)>1:!1}function Cn(e){const t=rt(e);return vr(t)}function Ur(e){ue.getState().delete(e)}function Dn(e){const t=rt(e);t&&Ur(t)}const z=S({persistStorageItemKey:"product-rarities"});function Cr(){return z.getState().entities}function le(){return z.getState().items()}function Nn(){return z.getState().isHydrating}function Ln(e){return Cr().get(e)}function xn(e){return le().find(t=>t.name.localeCompare(e)===0)}function Fn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return le().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}function kn({uuid:e,value:t}){return le().find(r=>r.uuid!==e&&r.value===t)}const $=S({persistStorageItemKey:"products"});function Dr(){return $.getState().entities}function Nr(){return $.getState().items()}function Hn(){return $.getState().isHydrating}function qn(e){return Dr().get(e)}function Vn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return Nr().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const G=S({persistStorageItemKey:"product-types"});function Lr(){return G.getState().entities}function nt(){return G.getState().items()}function jn(){return G.getState().isHydrating}function zn(e){return Lr().get(e)}function $n(e){return nt().find(t=>t.name.localeCompare(e)===0)}function Gn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return nt().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const ot=S({persistStorageItemKey:"sell-orders"});function st(){return ot.getState().items()}function Kn({locationUuid:e,productUuid:t}){return st().find(n=>n.locationUuid===e&&n.productUuid===t)}function Wn({uuid:e,locationUuid:t,productUuid:r}){return st().find(o=>o.uuid!==e&&o.productUuid===r&&o.locationUuid===t)}const de=S();function Ae(){return de.getState().items()}function xr(e){return e?Ae().filter(t=>{if(!t.tags)return!1;const r=t.tags.filter(n=>e.includes(n));return r.length===t.tags.length&&r.length===e.length}):Ae().filter(t=>!t.tags)}function Fr(e){return de.getState().create(e)}function kr(e){return de.getState().deleteMultiple(e)}function L(e){const t=e.tags;if(t!=null&&t.length){const r=xr(t);if(r.length){const n=r.map(o=>o.uuid);kr(n)}}return Fr(e)}const he="/trader/demo-data.json.gz",te=2*1e3,x=te,I=new Map,it=[ot,Ke,ue,$,G,z,ae,Ze,Xe,ce,j],Hr=["useSellOrdersStore","useBuyOrdersStore","usePriceHistoriesStore","useProductsStore","useProductTypesStore","useProductRaritiesStore","useLocationsStore","useLocationTypesStore","usePlanetarySystemsStore","useMovingEntitiesStore","useMovingEntityClassesStore"];it.map(e=>{I.set(e,!1)});const at=new Map;it.map((e,t)=>{at.set(e,Hr[t])});let re=!0;function qr(){if(!re)return;const e=new Array;I.forEach((t,r)=>{if(t){const n=at.get(r);if(!n){console.error("");return}e.push(n)}}),e.length===I.size&&jr()}function Vr(e){if(re&&I.has(e)&&!I.get(e)){const t=e.getState().isHydrated,r=e.getState().items,o=!!(typeof r=="function"?r():r).length,s=t&&o;I.set(e,s),s?(re=!1,I.clear()):(I.set(e,!0),qr())}}async function Te(e,t){const{file:r,error:n}=await ur(e,t);if(!r){L({entityType:D,messages:[()=>p.jsx(p.Fragment,{children:n})],hideTimeout:x,tags:["storage-data-import-demo-data"],type:"error",title:"Loading demo data failed"});return}return await ar(r)}async function jr(){let e=await Te(he,"application/json");if(e||(e=await Te(he,"application/gzip")),!e){const r="Data should be in json format";L({entityType:D,messages:[()=>p.jsx(p.Fragment,{children:r})],hideTimeout:x,tags:["storage-data-import-demo-data"],type:"error",title:"Importing demo data failed"});return}const t=await cr(e);if(t){L({entityType:D,messages:[()=>p.jsx(p.Fragment,{children:t})],hideTimeout:x,tags:["storage-data-import-demo-data"],type:"error",title:"Importing demo data failed"});return}L({entityType:D,messages:[()=>p.jsxs(p.Fragment,{children:[p.jsx("div",{children:"Demo data successfully loaded."}),p.jsxs("div",{children:["Page will be reloaded in"," ",Math.ceil(te/1e3)," ","seconds to use demo data"]})]})],hideTimeout:x,tags:["storage-data-import-demo-data"],type:"success",title:"Importing demo data"}),window.setTimeout(function(){window.location.reload()},te)}const zr="_Button_qx05o_1",$r="_NoCapitalize_qx05o_12",Gr="_Primary_qx05o_44",Kr="_Fluid_qx05o_49",Wr="_Tiny_qx05o_54",Xr="_Small_qx05o_63",Yr="_Big_qx05o_72",Jr="_TransparentOnDefaultState_qx05o_81",Zr="_Transparent_qx05o_81",Qr="_NoPadding_qx05o_87",en="_NoBorder_qx05o_108",tn="_IsAlwaysVisible_qx05o_117",rn="_IsStaticBehaviour_qx05o_126",nn="_AsLink_qx05o_162",g={Button:zr,NoCapitalize:$r,Primary:Gr,Fluid:Kr,Tiny:Wr,Small:Xr,Big:Yr,TransparentOnDefaultState:Jr,Transparent:Zr,NoPadding:Qr,NoBorder:en,IsAlwaysVisible:tn,IsStaticBehaviour:rn,AsLink:nn},Xn=A.memo(function({primary:t,fluid:r=!1,size:n,transparent:o=!1,transparentOnDefaultState:s=!1,noPadding:i=!1,noBorder:a=!1,isStaticBehaviour:u=!1,isAlwaysVisible:l=!1,asLink:d,noCapitalize:E=!1,ref:_,type:m="button",children:y,...T}){const K=Oe([g.Button,r&&g.Fluid,n==="tiny"&&g.Tiny,n==="small"&&g.Small,n==="big"&&g.Big,t&&g.Primary,o&&g.Transparent,s&&g.TransparentOnDefaultState,i&&g.NoPadding,a&&g.NoBorder,u&&g.IsStaticBehaviour,d&&g.AsLink,E&&g.NoCapitalize,l&&g.IsAlwaysVisible]);return p.jsx("button",{ref:_,className:K,type:m,...T,children:y})}),Yn=e=>A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...e},A.createElement("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}));function on({autoFocus:e=!1,autoFocusDelay:t=250}){const r=A.useRef(null);return A.useEffect(function(){if(!e)return;const o=r.current;o&&window.setTimeout(function(){o.focus()},t)},[r,e,t]),r}const sn="_InputField_ikonk_1",an="_Uppercase_ikonk_11",_e={InputField:sn,Uppercase:an},Jn=A.memo(function({type:t="text",autoComplete:r="off",onFieldValueChange:n,name:o,value:s,autoFocusOnFirstRender:i,uppercase:a,...u}){const l=A.useCallback(function(_){if(typeof n!="function")return;if(!o){console.error("Error. Form field must have name");return}const m=_.target.value;n(o,m)},[n,o]),d=on({autoFocus:i});return p.jsx("input",{ref:d,autoComplete:r,type:t,className:Oe([_e.InputField,a&&_e.Uppercase]),name:o,value:s,onChange:l,...u})}),Zn="",Qn="products",eo="locations",to="moving-entities",ro="map";function no(e){const t=e.map(n=>n(o=>o.isHydrated)).reduce((n,o)=>n&&o,!0),r=!t;return A.useEffect(function(){t||e.forEach(o=>{const{isHydrating:s,isHydrated:i}=o.getState();s||i||(o.getState().isHydrating=!0,o.persist.rehydrate())})},[t,e]),r}export{Cr as $,ue as A,Xn as B,$e as C,v as D,D as E,Dr as F,V as G,Xe as H,je as I,rt as J,mn as K,lr as L,vr as M,Cn as N,Rr as O,eo as P,Hn as Q,Kn as R,Jt as S,Wn as T,yn as U,En as V,Je as W,on as X,z as Y,Fn as Z,kn as _,Yt as a,G as a0,Lr as a1,Ln as a2,zn as a3,Nn as a4,jn as a5,Vn as a6,$n as a7,xn as a8,Gn as a9,ie as aA,U as aB,C as aC,bn as aD,Or as aE,hr as aF,Ir as aG,Ze as aa,Pr as ab,Tn as ac,An as ad,Qe as ae,Ye as af,wn as ag,hn as ah,pn as ai,Sn as aj,Zn as ak,j as al,Mn as am,Rn as an,ce as ao,Br as ap,Pn as aq,On as ar,vn as as,Un as at,S as au,Yn as av,Jn as aw,_n as ax,In as ay,Bn as az,gn as b,L as c,fn as d,ln as e,Ve as f,dn as g,ro as h,cr as i,Qn as j,to as k,jr as l,Oe as m,no as n,lt as o,Tr as p,Ar as q,ar as r,it as s,ot as t,de as u,Ke as v,Dn as w,qn as x,ae as y,$ as z};
