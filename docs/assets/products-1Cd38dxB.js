import{a as n,p as o,s as rt}from"./chunk-NL6KNZEE-BTkWJe7M.js";import{u as ie,p as nt,q as D,T as ce,b as le,S as de,c as Ee,a as je,i as N,N as Me,d as Fe,r as ee,l as at,m as Ue,n as Ie,s as st,o as it}from"./useTableSearch-B_PAahYU.js";import{c as ct}from"./createPageTitleWithAppName-CJkNTaXl.js";import{M as lt}from"./Main-CgXj-WVg.js";import{b as ue,d as me,c as dt}from"./shallow-CPQYnUdO.js";import{o as pe,n as L,Y as I,Z as ut,_ as mt,B as te,$ as pt,G as De,a0 as R,a1 as ht,a2 as Q,a3 as Z,a4 as yt,a5 as ft,z as U,a6 as Pt,a7 as St,a8 as Tt,a9 as gt}from"./useLoadingPersistStorages-B-TGxPUM.js";import{S as he}from"./SearchFormAndTableContainer-DLdA1ywV.js";import{S as ye}from"./StaticLink-BbBTYWDN.js";import{S as Ne,D as Ct}from"./DialogFilterForm-BwenAqfq.js";import{h as fe,g as W,M as Pe,d as Se,e as Te,f as ge,u as Ce,a as bt,b as Ft,c as It,T as Rt}from"./hasUuid-DmTzcSBx.js";import{g as _e}from"./getUrlToProductsPageWithParams-DmtSqG02.js";import{g as Lt,Q as xt}from"./getUrlToMarketPageWithParams-CqU6ToKK.js";import"./middleware-XeL71aNN.js";import"./App.const-DTwjj9QA.js";import"./index-D_ImYj8K.js";const ke="product-rarity",Oe=["uuid","entityType","name","value"],At=pe(Oe),Et=n.memo(function({itemToDelete:e,onHideModal:r,onHideParentModal:s}){const a=L([I]),c=I(l=>l.delete),d=n.useCallback(function(){r()},[r]),p=n.useCallback(function(){s()},[s]),y=n.useCallback(function(){a||(c(e),d(),p())},[c,e,d,p,a]),h=n.useMemo(function(){return o.jsxs(o.Fragment,{children:["Are you sure you want"," ",o.jsx("strong",{children:"to delete"}),o.jsx("br",{}),"the product rarity named"," ",o.jsx("strong",{children:e.name}),"?"]})},[e]);return o.jsx(ue,{title:h,onHide:d,onConfirm:y,confirmButtonLabel:"delete product rarity"})}),jt=[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0},{name:"value",type:"number",required:!0}],Mt=({itemToEdit:t,onHideModal:e,onShowDeleteItemConfirmation:r,onCreateItem:s,onUpdateItem:i})=>{const c=L([I]),d=I(m=>m.create),p=I(m=>m.update),y=n.useCallback(m=>{const u=d(m);typeof s=="function"&&s(u)},[d,s]),h=n.useCallback(m=>{const u=p(m);u&&typeof i=="function"&&i(u)},[p,i]),l=n.useCallback(()=>{e()},[e]),P=n.useCallback(m=>{if(fe(m)){const u=W(m,Oe);h(u)}else{const u=W(m,At);u.entityType=ke,y(u)}l()},[y,h,l]),S=n.useCallback(m=>{if(c)return function(){return o.jsx("span",{children:"Loading..."})};const u=ut(m);if(u)return function(){return o.jsxs(o.Fragment,{children:["Product rarity named"," ",o.jsx("strong",{children:u.name})," ","already exists"]})};const b=mt(m);if(b)return function(){return o.jsxs(o.Fragment,{children:["Product rarity with value"," ",o.jsx("strong",{children:b.value})," ","(named"," ",o.jsx("strong",{children:b.name})," ",") already exists"]})}},[c]);return o.jsx(Pe,{humanizedItemTypeName:"product rarity",itemToEdit:t,formFields:jt,validateFormData:S,onCancel:l,onSubmit:P,onDelete:r,deleteItemButtonLabel:"delete product rarity"})};function Ut({urlSearchParams:t,setUrlSearchParams:e}){return ie({urlSearchParams:t,setUrlSearchParams:e,getSearchValueFromUrlSearchParams:nt,searchValueKeyInUrlSearchParams:D,searchFieldNameInSearchForm:D,searchFieldPlaceholderTextInSearchForm:"Search by product rarity name..."})}const Dt=["name","value"],J=[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,alignLabel:"left",actionButtons:({item:t})=>{const e=_e({productRarityName:t==null?void 0:t.name});return o.jsx(o.Fragment,{children:e?o.jsx(ye,{href:e,title:"search by product rarity in products",children:o.jsx(Ne,{})}):o.jsx(te,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:o.jsx(de,{})})})}},{name:"value",type:"number",isSortable:!0,sort:"asc"}],Nt=["name"],_t=J.filter(t=>Nt.includes(t.name)),kt=n.memo(function({urlSearchParams:e,setUrlSearchParams:r}){const i=L([I]),{searchFieldValue:a,SearchForm:c,resetSearchFieldValue:d}=Ut({urlSearchParams:e,setUrlSearchParams:r}),p=I(me(F=>F.items())),y=I(F=>F.deleteMultiple),[h,l]=n.useState(!1),[P,S]=n.useState(),[m,u]=n.useState(),b=n.useCallback(()=>{l(!0)},[l]),g=n.useCallback(()=>{S(void 0),l(!1)},[S,l]),x=n.useCallback(F=>{u(F)},[u]),A=n.useCallback(()=>{u(void 0)},[u]),j=n.useMemo(function(){return a?p.filter(z=>!!_t.find(w=>{let T=z[w.name];return w.isSearchCaseInsensitive?(T=T==null?void 0:T.toLocaleLowerCase(),T==null?void 0:T.includes(a.toLocaleLowerCase())):T==null?void 0:T.includes(a)})):p},[a,p]),{sortedItems:f,columnsToSortBy:C,handleColumnSortClick:_}=Se(j,J,Dt),{selectedItemsUuids:k,handleResetSelectedItems:H,handleSelectAllItems:Y,handleSelectItem:$,handleShowDeleteMultipleSelectedItemsConfirmation:q,DeleteSelectedItemsConfirmation:O}=Te({itemTypeNamePlural:"product rarities",items:f,searchFieldValue:a,deleteItemsByUuids:y,setItemToDelete:u}),{lastCreatedOrUpdatedItem:M,onCreateItem:K,onUpdateItem:G}=ge({itemEntityType:ke,items:f,searchFieldValue:a,resetSearchFieldValue:d});return o.jsxs(he,{children:[c,o.jsx(ce,{tableTitle:"product rarities",tableColumns:J,items:f,noItemsLabel:"no product rarities",isLoading:i,showCreateItemModalButtonLabel:"add product rarity",onShowCreateItemModal:b,columnsToSortBy:C,onColumnHeaderClick:_,selectedItemsUuids:k,onResetSelectedItems:H,onSelectAllItems:Y,onDeleteSelectedItems:q,searchFieldValue:a,children:o.jsx(le,{items:f,columns:J,selectedItemsUuids:k,onEditItem:S,onSelectItem:$,lastCreatedOrUpdatedItem:M})}),(h||!!P)&&o.jsx(Mt,{itemToEdit:P,onHideModal:g,onShowDeleteItemConfirmation:x,onCreateItem:K,onUpdateItem:G}),!!m&&o.jsx(Et,{onHideModal:A,onHideParentModal:g,itemToDelete:m}),o.jsx(O,{})]})}),Re="Products";function Ot({productName:t}){const e=[t].filter(r=>!!r);return e.length?`Search ${e.join(" ")} - ${Re}`:`${Re}`}const wt="_Container_xowyn_1",Bt="_Products_xowyn_10",vt="_Parameters_xowyn_16",ae={Container:wt,Products:Bt,Parameters:vt},we="product",Be=["uuid","entityType","name","productTypeUuid","productRarityUuid","image"],Ht=pe(Be),B=Ee();function ve(){const{isHydrating:t,isHydrated:e}=I.getState();if(t||!e)return;const r=pt();Vt({productRaritiesMap:r})}B.setState({prepareData:ve});I.subscribe(function(){ve()});function Vt({productRaritiesMap:t}){const e=B.getState();e.isProcessing||(e.setIsProcessing(!0),window.setTimeout(function(){const i=$t({productRaritiesMap:t});e.replaceAll(i),e.setIsProcessing(!1)},0))}function Wt(t,e=!1){const r=(t==null?void 0:t.name)??"(product rarity without name)",s=e?je(r,"product rarity"):r;return{name:r,nameAsLabel:s}}function Yt({productRaritiesMap:t,shouldAddSuffixLabel:e=!1}){const r=[];return De(t).forEach(function(a){const c=a.uuid,{name:d,nameAsLabel:p}=Wt(a,e);r.push({uuid:c,name:d,label:p})}),r}function He(t){t.sort((e,r)=>e.name.localeCompare(r.name)),t.forEach(({items:e})=>He(e??[]))}function Ve({items:t=[],level:e=0,disableOptionsWithoutUuid:r=!0,selectOptions:s=new Array}){return t.forEach(i=>{const{label:a,items:c}=i,d=i.uuid,p=d??"";s.push({value:p,label:a,level:e,disabled:r?!d:!1}),c!=null&&c.length&&Ve({items:c,level:e+1,disableOptionsWithoutUuid:r,selectOptions:s})}),s}function $t({productRaritiesMap:t,disableOptionsWithoutUuid:e}){const r=Yt({productRaritiesMap:t,shouldAddSuffixLabel:!1});return He(r),Ve({items:r,disableOptionsWithoutUuid:e})??[]}const v=Ee();function We(){const{isHydrating:t,isHydrated:e}=R.getState();if(t||!e)return;const r=ht();qt({productTypesMap:r})}v.setState({prepareData:We});R.subscribe(function(){We()});function qt({productTypesMap:t}){const e=v.getState();e.isProcessing||(e.setIsProcessing(!0),window.setTimeout(function(){const i=zt({productTypesMap:t});e.replaceAll(i),e.setIsProcessing(!1)},0))}function Kt(t,e=!1){const r=(t==null?void 0:t.name)??"(product type without name)",s=e?je(r,"product type"):r;return{name:r,nameAsLabel:s}}function Gt({productTypesMap:t,shouldAddSuffixLabel:e=!1}){const r=[];return De(t).forEach(function(a){const c=a.uuid,{name:d,nameAsLabel:p}=Kt(a,e);r.push({uuid:c,name:d,label:p})}),r}function Ye(t){t.sort((e,r)=>e.name.localeCompare(r.name)),t.forEach(({items:e})=>Ye(e??[]))}function $e({items:t=[],level:e=0,disableOptionsWithoutUuid:r=!0,selectOptions:s=new Array}){return t.forEach(i=>{const{label:a,items:c}=i,d=i.uuid,p=d??"";s.push({value:p,label:a,level:e,disabled:r?!d:!1}),c!=null&&c.length&&$e({items:c,level:e+1,disableOptionsWithoutUuid:r,selectOptions:s})}),s}function zt({productTypesMap:t,disableOptionsWithoutUuid:e}){const r=Gt({productTypesMap:t,shouldAddSuffixLabel:!1});return Ye(r),$e({items:r,disableOptionsWithoutUuid:e})??[]}const se=(t,e)=>[{name:"productTypeUuid",label:"type",type:"select",options:t,chooseOptionLabel:"choose a product type",noOptionsLabel:"no product type available",allowToSelectNoValueOption:!0,filterPredicate:(r,s)=>r.productTypeUuid===s.productTypeUuid},{name:"productRarityUuid",label:"rarity",type:"select",options:e,chooseOptionLabel:"choose a product rarity",noOptionsLabel:"no product rarity available",allowToSelectNoValueOption:!0,filterPredicate:(r,s)=>r.productRarityUuid===s.productRarityUuid}],Qt=n.memo(function({filterValue:e,onSetFilterValue:r,onHide:s}){const i=L([R,I]),a=Ce([v,B]),c=i||a,d=v(P=>P.items),p=B(P=>P.items),y=n.useMemo(function(){return c?se([],[]):se(d,p)},[d,p,c]),h=n.useCallback(function(){s()},[s]),l=n.useCallback(function(S){Object.keys(S).length?r(S):r(void 0),h()},[h,r]);return o.jsx(o.Fragment,{children:o.jsx("div",{style:{position:"absolute",top:0,right:0},children:o.jsx(Ct,{humanizedPluralItemTypeName:"products",filterValue:e,formFields:y,onCancel:h,onFilter:l})})})}),Zt="_Container_16hmi_1",Jt="_SearchAndFilterFormContainer_16hmi_9",Le={Container:Zt,SearchAndFilterFormContainer:Jt};function Xt({name:t,label:e,value:r}){var a;const s=L([I]);if(!r)return;const i=s||!N(r)||(a=Q(r))==null?void 0:a.name;return i?{label:e??(t==null?void 0:t.toString()),value:i}:{label:e??(t==null?void 0:t.toString()),value:"(product rarity without name)"}}function eo({name:t,label:e,value:r}){var a;const s=L([R]);if(!r)return;const i=s||!N(r)||(a=Z(r))==null?void 0:a.name;return i?{label:e??(t==null?void 0:t.toString()),value:i}:{label:e??(t==null?void 0:t.toString()),value:"(product type without name)"}}function to(){return[{name:"productTypeUuid",label:"type",formatLabelAndValue:eo},{name:"productRarityUuid",label:"rarity",formatLabelAndValue:Xt}]}function oo({value:t}){var i;const s=L([I])||!N(t)||(i=Q(t))==null?void 0:i.name;return o.jsx(o.Fragment,{children:s||o.jsx(Me,{children:"(no data)"})})}function ro({value:t}){var i;const s=L([R])||!N(t)||(i=Z(t))==null?void 0:i.name;return o.jsx(o.Fragment,{children:s||o.jsx(Me,{children:"(no data)"})})}function no({value:t}){const e=Lt({productName:typeof t=="string"&&t?t:void 0});return o.jsx(o.Fragment,{children:e?o.jsx(ye,{href:e,title:"search by product name in market",children:o.jsx(xt,{})}):o.jsx(te,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:o.jsx(de,{})})})}function ao(t,e){var a,c;if(yt())return 0;const s=N(t)&&((a=Q(t))==null?void 0:a.name)||"",i=N(e)&&((c=Q(e))==null?void 0:c.name)||"";return s.localeCompare(i)}function so(t,e){var a,c;if(ft())return 0;const s=N(t)&&((a=Z(t))==null?void 0:a.name)||"",i=N(e)&&((c=Z(e))==null?void 0:c.name)||"";return s.localeCompare(i)}function qe(){return[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,alignLabel:"left",actionButtons:no},{name:"productTypeUuid",label:"type",isSortable:!0,formatValue:ro,sortFn:so},{name:"productRarityUuid",label:"rarity",isSortable:!0,sort:"asc",formatValue:oo,sortFn:ao}]}const io=n.memo(function({itemToDelete:e,onHideModal:r,onHideParentModal:s}){const a=L([U]),c=U(l=>l.delete),d=n.useCallback(function(){r()},[r]),p=n.useCallback(function(){s()},[s]),y=n.useCallback(function(){a||(c(e),d(),p())},[e,d,p,c,a]),h=n.useMemo(function(){return o.jsxs(o.Fragment,{children:["Are you sure you want"," ",o.jsx("strong",{children:"to delete"}),o.jsx("br",{}),"the product named"," ",o.jsx("strong",{children:e.name}),"?"]})},[e]);return o.jsx(ue,{title:h,onHide:d,onConfirm:y,confirmButtonLabel:"delete product"})});function xe(t=[],e=[]){return[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",label:"name",required:!0},{name:"productTypeUuid",label:"type",type:"select",required:!0,options:e,chooseOptionLabel:"choose a type",noOptionsLabel:"no types available",allowToSelectNoValueOption:!0},{name:"productRarityUuid",label:"rarity",type:"select",required:!0,options:t,chooseOptionLabel:"choose a rarity",noOptionsLabel:"no rarities available",allowToSelectNoValueOption:!0},{name:"image",type:"file",accept:"image/*"}]}const co=n.memo(function({itemToEdit:e,filterValue:r,onHideModal:s,onShowDeleteItemConfirmation:i,onCreateItem:a,onUpdateItem:c}){const d=L([U,R,I]),p=Ce([v,B]),y=d||p,h=U(f=>f.create),l=U(f=>f.update),P=n.useCallback(f=>{const C=h(f);typeof a=="function"&&a(C)},[h,a]),S=n.useCallback(f=>{const C=l(f);C&&typeof c=="function"&&c(C)},[l,c]),m=n.useCallback(()=>{s()},[s]),u=n.useCallback(async f=>{if(fe(f)){const C=W(f,Be);S(C)}else{const C=W(f,Ht);C.entityType=we,P(C)}m()},[P,S,m]),b=n.useCallback(f=>{if(y)return function(){return o.jsx("span",{children:"Loading..."})};const C=Pt(f);if(C)return function(){return o.jsxs(o.Fragment,{children:["Product named"," ",o.jsx("strong",{children:C.name})," ","already exists"]})}},[y]),g=v(f=>f.items),x=B(f=>f.items),A=n.useMemo(function(){return y?xe([],[]):xe(x,g)},[x,g,y]),j=bt(A,r);return o.jsx(Pe,{humanizedItemTypeName:"product",itemToEdit:e,formFields:j,validateFormData:b,onCancel:m,onSubmit:u,onDelete:i,deleteItemButtonLabel:"delete product"})}),lo=[D,ee];function Ae(t){const e={typeName:t.get(D)||void 0,rarityName:t.get(ee)||void 0};return at(e)}function uo({filterValue:t}){var c,d;if(!t)return;const{typeName:e,rarityName:r,...s}=t,i=e?(c=St(e))==null?void 0:c.uuid:void 0,a=r?(d=Tt(r))==null?void 0:d.uuid:void 0;return{...s,productTypeUuid:i,productRarityUuid:a}}function mo({urlSearchParams:t,setUrlSearchParams:e}){const r=L([R,I]),s=Ce([v,B]),i=r||s,a=n.useRef(void 0),c=n.useMemo(function(){const y=Ae(t),h=uo({filterValue:y}),l=a.current;return Fe(l,h)?(a.current=h,h):l},[t,a,i]),d=n.useCallback(function(y){let h;if(typeof y=="function")throw new Error("ProductFilterValue as setState(prev=>newState) function not supported");y&&Object.keys(y).length>0&&(h=y),e(l=>{var m,u;const P=Ae(l);if(Fe(P,h)){if(!h)return lo.forEach(j=>{l.delete(j)}),l;const b=h.productTypeUuid,g=b?(m=Z(b))==null?void 0:m.name:void 0,x=h.productRarityUuid,A=x?(u=Q(x))==null?void 0:u.name:void 0;g?l.set(D,g):l.delete(D),A?l.set(ee,A):l.delete(ee)}return l})},[e]);return{filterValue:c,setFilterValueToUrlSearchParams:d}}function po({urlSearchParams:t,setUrlSearchParams:e}){return ie({urlSearchParams:t,setUrlSearchParams:e,getSearchValueFromUrlSearchParams:Ue,searchValueKeyInUrlSearchParams:Ie,searchFieldNameInSearchForm:Ie,searchFieldPlaceholderTextInSearchForm:"Search by product name..."})}const ho=["name","productTypeUuid","productRarityUuid"],yo=["name"],fo=qe().filter(t=>yo.includes(t.name)),Po=n.memo(function({urlSearchParams:e,setUrlSearchParams:r}){const i=L([U,R,I]),{filterValue:a,setFilterValueToUrlSearchParams:c}=mo({urlSearchParams:e,setUrlSearchParams:r}),{searchFieldValue:d,SearchForm:p,resetSearchFieldValue:y}=po({urlSearchParams:e,setUrlSearchParams:r}),h=U(me(E=>E.items())),l=U(E=>E.deleteMultiple),[P,S]=n.useState(!1),[m,u]=n.useState(),[b,g]=n.useState(),x=n.useCallback(()=>{S(!0)},[S]),A=n.useCallback(()=>{u(void 0),S(!1)},[u,S]),j=n.useCallback(E=>{g(E)},[g]),f=n.useCallback(()=>{g(void 0)},[g]),C=n.useMemo(function(){return d?h.filter(ot=>!!fo.find(be=>{const V=ot[be.name];if(be.isSearchCaseInsensitive){const ne=V==null?void 0:V.toLocaleLowerCase();return ne==null?void 0:ne.includes(d.toLocaleLowerCase())}return V==null?void 0:V.includes(d)})):h},[d,h]),_=n.useMemo(function(){return se([],[])},[i]),k=n.useMemo(function(){return to()},[i]),{isAppliedFilter:H,enableFilter:Y,disableFilter:$}=Ft(a),q=It(C,_,H?a:void 0),O=n.useMemo(function(){return qe()},[i]),{sortedItems:M,columnsToSortBy:K,handleColumnSortClick:G}=Se(q,O,ho),{selectedItemsUuids:F,handleResetSelectedItems:z,handleSelectAllItems:oe,handleSelectItem:w,handleShowDeleteMultipleSelectedItemsConfirmation:T,DeleteSelectedItemsConfirmation:ze}=Te({itemTypeNamePlural:"products",items:M,searchFieldValue:d,filterValue:a,deleteItemsByUuids:l,setItemToDelete:g}),Qe=n.useCallback(function(){c(void 0)},[c]),{lastCreatedOrUpdatedItem:Ze,onCreateItem:Je,onUpdateItem:Xe}=ge({itemEntityType:we,items:M,searchFieldValue:d,filterValue:a,resetSearchFieldValue:y,resetFilterValue:Qe}),{isVisible:et,show:tt,hide:re}=dt(!1);return n.useEffect(function(){(a||!a)&&re()},[a,re]),o.jsxs(he,{children:[o.jsxs("div",{className:Le.SearchAndFilterFormContainer,children:[p,o.jsxs(te,{onClick:tt,title:"show filter form",children:[o.jsx(Rt,{}),o.jsx("span",{children:"filter"})]}),et&&o.jsx(Qt,{filterValue:a,onSetFilterValue:c,onHide:re})]}),o.jsx("div",{className:Le.Container,children:o.jsx(ce,{tableTitle:"products",tableColumns:O,items:M,noItemsLabel:"no products",isLoading:i,showCreateItemModalButtonLabel:"add product",onShowCreateItemModal:x,columnsToSortBy:K,onColumnHeaderClick:G,selectedItemsUuids:F,onResetSelectedItems:z,onSelectAllItems:oe,onDeleteSelectedItems:T,searchFieldValue:d,filterValue:a,isAppliedFilter:H,onEnableFilter:Y,onDisableFilter:$,filterInfoFields:k,children:o.jsx(le,{items:M,columns:O,selectedItemsUuids:F,onEditItem:u,onSelectItem:w,lastCreatedOrUpdatedItem:Ze})})}),(P||!!m)&&o.jsx(co,{itemToEdit:m,filterValue:a,onHideModal:A,onShowDeleteItemConfirmation:j,onCreateItem:Je,onUpdateItem:Xe}),!!b&&o.jsx(io,{onHideModal:f,onHideParentModal:A,itemToDelete:b}),o.jsx(ze,{})]})}),Ke="product-type",Ge=["uuid","entityType","name"],So=pe(Ge),To=n.memo(function({itemToDelete:e,onHideModal:r,onHideParentModal:s}){const a=L([R]),c=R(l=>l.delete),d=n.useCallback(function(){r()},[r]),p=n.useCallback(function(){s()},[s]),y=n.useCallback(function(){a||(c(e),d(),p())},[e,d,p,c,a]),h=n.useMemo(function(){return o.jsxs(o.Fragment,{children:["Are you sure you want"," ",o.jsx("strong",{children:"to delete"}),o.jsx("br",{}),"the product type named"," ",o.jsx("strong",{children:e.name}),"?"]})},[e]);return o.jsx(ue,{title:h,onHide:d,onConfirm:y,confirmButtonLabel:"delete product type"})}),go=[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0}],Co=({itemToEdit:t,onHideModal:e,onShowDeleteItemConfirmation:r,onCreateItem:s,onUpdateItem:i})=>{const c=L([R]),d=R(m=>m.create),p=R(m=>m.update),y=n.useCallback(m=>{const u=d(m);typeof s=="function"&&s(u)},[d,s]),h=n.useCallback(m=>{const u=p(m);u&&typeof i=="function"&&i(u)},[p,i]),l=n.useCallback(()=>{e()},[e]),P=n.useCallback(m=>{if(fe(m)){const u=W(m,Ge);h(u)}else{const u=W(m,So);u.entityType=Ke,y(u)}l()},[y,h,l]),S=n.useCallback(m=>{if(c)return function(){return o.jsx("span",{children:"Loading..."})};const u=gt(m);if(u)return function(){return o.jsxs(o.Fragment,{children:["Product type named"," ",o.jsx("strong",{children:u.name})," ","already exists"]})}},[c]);return o.jsx(Pe,{humanizedItemTypeName:"product type",itemToEdit:t,formFields:go,validateFormData:S,onCancel:l,onSubmit:P,onDelete:r,deleteItemButtonLabel:"delete product type"})};function bo({urlSearchParams:t,setUrlSearchParams:e}){return ie({urlSearchParams:t,setUrlSearchParams:e,getSearchValueFromUrlSearchParams:st,searchValueKeyInUrlSearchParams:D,searchFieldNameInSearchForm:D,searchFieldPlaceholderTextInSearchForm:"Search by product type..."})}const Fo=["name"],X=[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,sort:"asc",alignLabel:"left",actionButtons:function({item:e}){const r=_e({productTypeName:e==null?void 0:e.name});return o.jsx(o.Fragment,{children:r?o.jsx(ye,{href:r,title:"search by product type in products",children:o.jsx(Ne,{})}):o.jsx(te,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:o.jsx(de,{})})})}}],Io=["name"],Ro=X.filter(t=>Io.includes(t.name)),Lo=n.memo(function({urlSearchParams:e,setUrlSearchParams:r}){const i=L([R]),{searchFieldValue:a,SearchForm:c,resetSearchFieldValue:d}=bo({urlSearchParams:e,setUrlSearchParams:r}),p=R(me(F=>F.items())),y=R(F=>F.deleteMultiple),[h,l]=n.useState(!1),[P,S]=n.useState(),[m,u]=n.useState(),b=n.useCallback(()=>{l(!0)},[l]),g=n.useCallback(()=>{S(void 0),l(!1)},[S,l]),x=n.useCallback(F=>{u(F)},[u]),A=n.useCallback(()=>{u(void 0)},[u]),j=n.useMemo(function(){return a?p.filter(z=>!!Ro.find(w=>{let T=z[w.name];return w.isSearchCaseInsensitive?(T=T==null?void 0:T.toLocaleLowerCase(),T==null?void 0:T.includes(a.toLocaleLowerCase())):T==null?void 0:T.includes(a)})):p},[a,p]),{sortedItems:f,columnsToSortBy:C,handleColumnSortClick:_}=Se(j,X,Fo),{selectedItemsUuids:k,handleResetSelectedItems:H,handleSelectAllItems:Y,handleSelectItem:$,handleShowDeleteMultipleSelectedItemsConfirmation:q,DeleteSelectedItemsConfirmation:O}=Te({itemTypeNamePlural:"product types",items:f,searchFieldValue:a,deleteItemsByUuids:y,setItemToDelete:u}),{lastCreatedOrUpdatedItem:M,onCreateItem:K,onUpdateItem:G}=ge({itemEntityType:Ke,items:f,searchFieldValue:a,resetSearchFieldValue:d});return o.jsxs(he,{children:[c,o.jsx(ce,{tableTitle:"product types",tableColumns:X,items:f,noItemsLabel:"no product types",isLoading:i,showCreateItemModalButtonLabel:"add product type",onShowCreateItemModal:b,columnsToSortBy:C,onColumnHeaderClick:_,selectedItemsUuids:k,onResetSelectedItems:H,onSelectAllItems:Y,onDeleteSelectedItems:q,searchFieldValue:a,children:o.jsx(le,{items:f,columns:X,selectedItemsUuids:k,onEditItem:S,onSelectItem:$,lastCreatedOrUpdatedItem:M})}),(h||!!P)&&o.jsx(Co,{itemToEdit:P,onHideModal:g,onShowDeleteItemConfirmation:x,onCreateItem:K,onUpdateItem:G}),!!m&&o.jsx(To,{onHideModal:A,onHideParentModal:g,itemToDelete:m}),o.jsx(O,{})]})});function xo(t){const e=n.useMemo(()=>Ue(t),[t]);return n.useMemo(function(){return ct(Ot({productName:e}))},[e])}function Ao(){const{urlSearchParams:t,setUrlSearchParams:e}=it(),r=xo(t);return o.jsxs(o.Fragment,{children:[o.jsx("title",{children:r}),o.jsx(lt,{children:o.jsxs("div",{className:ae.Container,children:[o.jsx("div",{className:ae.Products,children:o.jsx(Po,{urlSearchParams:t,setUrlSearchParams:e})}),o.jsxs("div",{className:ae.Parameters,children:[o.jsx(Lo,{urlSearchParams:t,setUrlSearchParams:e}),o.jsx(kt,{urlSearchParams:t,setUrlSearchParams:e})]})]})})]})}const $o=rt(function(){return o.jsx(Ao,{})});export{$o as default};
