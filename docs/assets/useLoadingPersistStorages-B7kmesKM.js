import{q as we,p as T,a as v}from"./chunk-NL6KNZEE-BTkWJe7M.js";const Ue=e=>e.filter(t=>!!t).join(" ");function pt(e){return e.filter(t=>t!=="uuid")}const X="notification",St=["uuid","entityType","type","tags","title","messages","hideTimeout"];pt(St);function H(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function Ne(e,t){let r;const n=()=>{if(r)return r;const o=indexedDB.open(e);return o.onupgradeneeded=()=>o.result.createObjectStore(t),r=H(o),r.then(s=>{s.onclose=()=>r=void 0},()=>{}),r};return(o,s)=>n().then(i=>s(i.transaction(t,o).objectStore(t)))}let J;function ce(){return J||(J=Ne("keyval-store","keyval")),J}function wt(e,t=ce()){return t("readonly",r=>H(r.get(e)))}function It(e,t,r=ce()){return r("readwrite",n=>(n.put(t,e),H(n.transaction)))}function Et(e,t=ce()){return t("readwrite",r=>(r.delete(e),H(r.transaction)))}class ht{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(t,r){this.keyToValue.set(t,r),this.valueToKey.set(r,t)}getByKey(t){return this.keyToValue.get(t)}getByValue(t){return this.valueToKey.get(t)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class Ce{constructor(t){this.generateIdentifier=t,this.kv=new ht}register(t,r){this.kv.getByValue(t)||(r||(r=this.generateIdentifier(t)),this.kv.set(r,t))}clear(){this.kv.clear()}getIdentifier(t){return this.kv.getByValue(t)}getValue(t){return this.kv.getByKey(t)}}class At extends Ce{constructor(){super(t=>t.name),this.classToAllowedProps=new Map}register(t,r){typeof r=="object"?(r.allowProps&&this.classToAllowedProps.set(t,r.allowProps),super.register(t,r.identifier)):super.register(t,r)}getAllowedProps(t){return this.classToAllowedProps.get(t)}}function Tt(e){if("values"in Object)return Object.values(e);const t=[];for(const r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}function _t(e,t){const r=Tt(e);if("find"in r)return r.find(t);const n=r;for(let o=0;o<n.length;o++){const s=n[o];if(t(s))return s}}function M(e,t){Object.entries(e).forEach(([r,n])=>t(n,r))}function F(e,t){return e.indexOf(t)!==-1}function Ie(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(t(n))return n}}class bt{constructor(){this.transfomers={}}register(t){this.transfomers[t.name]=t}findApplicable(t){return _t(this.transfomers,r=>r.isApplicable(t))}findByName(t){return this.transfomers[t]}}const vt=e=>Object.prototype.toString.call(e).slice(8,-1),De=e=>typeof e>"u",Ot=e=>e===null,N=e=>typeof e!="object"||e===null||e===Object.prototype?!1:Object.getPrototypeOf(e)===null?!0:Object.getPrototypeOf(e)===Object.prototype,te=e=>N(e)&&Object.keys(e).length===0,O=e=>Array.isArray(e),Pt=e=>typeof e=="string",Rt=e=>typeof e=="number"&&!isNaN(e),Bt=e=>typeof e=="boolean",Mt=e=>e instanceof RegExp,C=e=>e instanceof Map,D=e=>e instanceof Set,Le=e=>vt(e)==="Symbol",Ut=e=>e instanceof Date&&!isNaN(e.valueOf()),Nt=e=>e instanceof Error,Ee=e=>typeof e=="number"&&isNaN(e),Ct=e=>Bt(e)||Ot(e)||De(e)||Rt(e)||Pt(e)||Le(e),Dt=e=>typeof e=="bigint",Lt=e=>e===1/0||e===-1/0,xt=e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),Ft=e=>e instanceof URL,xe=e=>e.replace(/\./g,"\\."),Y=e=>e.map(String).map(xe).join("."),U=e=>{const t=[];let r="";for(let o=0;o<e.length;o++){let s=e.charAt(o);if(s==="\\"&&e.charAt(o+1)==="."){r+=".",o++;continue}if(s==="."){t.push(r),r="";continue}r+=s}const n=r;return t.push(n),t};function A(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}const Fe=[A(De,"undefined",()=>null,()=>{}),A(Dt,"bigint",e=>e.toString(),e=>typeof BigInt<"u"?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),A(Ut,"Date",e=>e.toISOString(),e=>new Date(e)),A(Nt,"Error",(e,t)=>{const r={name:e.name,message:e.message};return t.allowedErrorProps.forEach(n=>{r[n]=e[n]}),r},(e,t)=>{const r=new Error(e.message);return r.name=e.name,r.stack=e.stack,t.allowedErrorProps.forEach(n=>{r[n]=e[n]}),r}),A(Mt,"regexp",e=>""+e,e=>{const t=e.slice(1,e.lastIndexOf("/")),r=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,r)}),A(D,"set",e=>[...e.values()],e=>new Set(e)),A(C,"map",e=>[...e.entries()],e=>new Map(e)),A(e=>Ee(e)||Lt(e),"number",e=>Ee(e)?"NaN":e>0?"Infinity":"-Infinity",Number),A(e=>e===0&&1/e===-1/0,"number",()=>"-0",Number),A(Ft,"URL",e=>e.toString(),e=>new URL(e))];function q(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}const ke=q((e,t)=>Le(e)?!!t.symbolRegistry.getIdentifier(e):!1,(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,r)=>{const n=r.symbolRegistry.getValue(t[1]);if(!n)throw new Error("Trying to deserialize unknown symbol");return n}),kt=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),He=q(xt,e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{const r=kt[t[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(e)});function qe(e,t){return e!=null&&e.constructor?!!t.classRegistry.getIdentifier(e.constructor):!1}const je=q(qe,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{const r=t.classRegistry.getAllowedProps(e.constructor);if(!r)return{...e};const n={};return r.forEach(o=>{n[o]=e[o]}),n},(e,t,r)=>{const n=r.classRegistry.getValue(t[1]);if(!n)throw new Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),e)}),Ve=q((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,r)=>{const n=r.customTransformerRegistry.findByName(t[1]);if(!n)throw new Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),Ht=[je,ke,Ve,He],he=(e,t)=>{const r=Ie(Ht,o=>o.isApplicable(e,t));if(r)return{value:r.transform(e,t),type:r.annotation(e,t)};const n=Ie(Fe,o=>o.isApplicable(e,t));if(n)return{value:n.transform(e,t),type:n.annotation}},$e={};Fe.forEach(e=>{$e[e.annotation]=e});const qt=(e,t,r)=>{if(O(t))switch(t[0]){case"symbol":return ke.untransform(e,t,r);case"class":return je.untransform(e,t,r);case"custom":return Ve.untransform(e,t,r);case"typed-array":return He.untransform(e,t,r);default:throw new Error("Unknown transformation: "+t)}else{const n=$e[t];if(!n)throw new Error("Unknown transformation: "+t);return n.untransform(e,r)}},R=(e,t)=>{if(t>e.size)throw new Error("index out of bounds");const r=e.keys();for(;t>0;)r.next(),t--;return r.next().value};function ze(e){if(F(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(F(e,"prototype"))throw new Error("prototype is not allowed as a property");if(F(e,"constructor"))throw new Error("constructor is not allowed as a property")}const jt=(e,t)=>{ze(t);for(let r=0;r<t.length;r++){const n=t[r];if(D(e))e=R(e,+n);else if(C(e)){const o=+n,s=+t[++r]==0?"key":"value",i=R(e,o);switch(s){case"key":e=i;break;case"value":e=e.get(i);break}}else e=e[n]}return e},re=(e,t,r)=>{if(ze(t),t.length===0)return r(e);let n=e;for(let s=0;s<t.length-1;s++){const i=t[s];if(O(n)){const a=+i;n=n[a]}else if(N(n))n=n[i];else if(D(n)){const a=+i;n=R(n,a)}else if(C(n)){if(s===t.length-2)break;const c=+i,u=+t[++s]==0?"key":"value",l=R(n,c);switch(u){case"key":n=l;break;case"value":n=n.get(l);break}}}const o=t[t.length-1];if(O(n)?n[+o]=r(n[+o]):N(n)&&(n[o]=r(n[o])),D(n)){const s=R(n,+o),i=r(s);s!==i&&(n.delete(s),n.add(i))}if(C(n)){const s=+t[t.length-2],i=R(n,s);switch(+o==0?"key":"value"){case"key":{const c=r(i);n.set(c,n.get(i)),c!==i&&n.delete(i);break}case"value":{n.set(i,r(n.get(i)));break}}}return e};function ne(e,t,r=[]){if(!e)return;if(!O(e)){M(e,(s,i)=>ne(s,t,[...r,...U(i)]));return}const[n,o]=e;o&&M(o,(s,i)=>{ne(s,t,[...r,...U(i)])}),t(n,r)}function Vt(e,t,r){return ne(t,(n,o)=>{e=re(e,o,s=>qt(s,n,r))}),e}function $t(e,t){function r(n,o){const s=jt(e,U(o));n.map(U).forEach(i=>{e=re(e,i,()=>s)})}if(O(t)){const[n,o]=t;n.forEach(s=>{e=re(e,U(s),()=>e)}),o&&M(o,r)}else M(t,r);return e}const zt=(e,t)=>N(e)||O(e)||C(e)||D(e)||qe(e,t);function Gt(e,t,r){const n=r.get(e);n?n.push(t):r.set(e,[t])}function Kt(e,t){const r={};let n;return e.forEach(o=>{if(o.length<=1)return;t||(o=o.map(a=>a.map(String)).sort((a,c)=>a.length-c.length));const[s,...i]=o;s.length===0?n=i.map(Y):r[Y(s)]=i.map(Y)}),n?te(r)?[n]:[n,r]:te(r)?void 0:r}const Ge=(e,t,r,n,o=[],s=[],i=new Map)=>{const a=Ct(e);if(!a){Gt(e,o,t);const g=i.get(e);if(g)return n?{transformedValue:null}:g}if(!zt(e,r)){const g=he(e,r),m=g?{transformedValue:g.value,annotations:[g.type]}:{transformedValue:e};return a||i.set(e,m),m}if(F(s,e))return{transformedValue:null};const c=he(e,r),u=(c==null?void 0:c.value)??e,l=O(u)?[]:{},y={};M(u,(g,m)=>{if(m==="__proto__"||m==="constructor"||m==="prototype")throw new Error(`Detected property ${m}. This is a prototype pollution risk, please remove it from your object.`);const f=Ge(g,t,r,n,[...o,m],[...s,e],i);l[m]=f.transformedValue,O(f.annotations)?y[m]=f.annotations:N(f.annotations)&&M(f.annotations,(h,P)=>{y[xe(m)+"."+P]=h})});const S=te(y)?{transformedValue:l,annotations:c?[c.type]:void 0}:{transformedValue:l,annotations:c?[c.type,y]:y};return a||i.set(e,S),S};function Ke(e){return Object.prototype.toString.call(e).slice(8,-1)}function Ae(e){return Ke(e)==="Array"}function Wt(e){if(Ke(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}function Xt(e,t,r,n,o){const s={}.propertyIsEnumerable.call(n,t)?"enumerable":"nonenumerable";s==="enumerable"&&(e[t]=r),o&&s==="nonenumerable"&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function oe(e,t={}){if(Ae(e))return e.map(o=>oe(o,t));if(!Wt(e))return e;const r=Object.getOwnPropertyNames(e),n=Object.getOwnPropertySymbols(e);return[...r,...n].reduce((o,s)=>{if(Ae(t.props)&&!t.props.includes(s))return o;const i=e[s],a=oe(i,t);return Xt(o,s,a,e,t.nonenumerable),o},{})}class d{constructor({dedupe:t=!1}={}){this.classRegistry=new At,this.symbolRegistry=new Ce(r=>r.description??""),this.customTransformerRegistry=new bt,this.allowedErrorProps=[],this.dedupe=t}serialize(t){const r=new Map,n=Ge(t,r,this,this.dedupe),o={json:n.transformedValue};n.annotations&&(o.meta={...o.meta,values:n.annotations});const s=Kt(r,this.dedupe);return s&&(o.meta={...o.meta,referentialEqualities:s}),o}deserialize(t){const{json:r,meta:n}=t;let o=oe(r);return n!=null&&n.values&&(o=Vt(o,n.values,this)),n!=null&&n.referentialEqualities&&(o=$t(o,n.referentialEqualities)),o}stringify(t){return JSON.stringify(this.serialize(t))}parse(t){return this.deserialize(JSON.parse(t))}registerClass(t,r){this.classRegistry.register(t,r)}registerSymbol(t,r){this.symbolRegistry.register(t,r)}registerCustom(t,r){this.customTransformerRegistry.register({name:r,...t})}allowErrorProps(...t){this.allowedErrorProps.push(...t)}}d.defaultInstance=new d;d.serialize=d.defaultInstance.serialize.bind(d.defaultInstance);d.deserialize=d.defaultInstance.deserialize.bind(d.defaultInstance);d.stringify=d.defaultInstance.stringify.bind(d.defaultInstance);d.parse=d.defaultInstance.parse.bind(d.defaultInstance);d.registerClass=d.defaultInstance.registerClass.bind(d.defaultInstance);d.registerSymbol=d.defaultInstance.registerSymbol.bind(d.defaultInstance);d.registerCustom=d.defaultInstance.registerCustom.bind(d.defaultInstance);d.allowErrorProps=d.defaultInstance.allowErrorProps.bind(d.defaultInstance);d.serialize;d.deserialize;d.stringify;d.parse;d.registerClass;d.registerCustom;d.registerSymbol;d.allowErrorProps;const We="trader-db-name",Jt=Number.parseInt("2",10)||1,Xe="trader-object-store-name",Z=Ne(We,Xe);function Yt(){return{getItem:async e=>{const t=await wt(e,Z);return t?d.parse(t):null},setItem:async(e,t)=>{await It(e,d.stringify(t),Z)},removeItem:async e=>{await Et(e,Z)}}}async function Zt(e,t,r){return new Promise((n,o)=>{const s=indexedDB.open(e,t);s.onerror=function(a){const c="Error. Opening connection to indexedDB is failed";console.error(c,a),o(c)},s.onsuccess=function(){const a=s.result;n(a)},s.onupgradeneeded=function(a){var u;const c=(u=a.target)==null?void 0:u.result;if(!c){const l="Error. Opening connection to indexedDB is failed";console.error(l,a),o(l);return}c.onerror=l=>{o(l)};try{return c.createObjectStore(r)}catch(l){console.error(l),o(l)}}})}async function ue(e,t,r,n){const s=(await Zt(e,t,r)).transaction([r],n);return s.oncomplete=()=>{},s.onerror=i=>{const a="Error. Transaction creation is failed";throw console.error(a,s.error,i),new Error(a)},s}function Qt(e){return new Promise((t,r)=>{const n=e.clear();n.onerror=o=>{const s="Error. Object store clearing is failed";console.error(s,o),r(s)},n.onsuccess=()=>{t("Success: Object store cleared")}})}async function hn(e,t,r){try{const o=(await ue(e,t,r,"readwrite")).objectStore(r);await Qt(o)}catch(n){const o="Error. Impossible to clear indexedDB";return(n==null?void 0:n.name)==="NotFoundError"?"Error. IndexedDB is empty":(console.error(o,n),`${o}. ${n}`)}}async function er(e){return new Promise((t,r)=>{const n=e.openCursor(),o={};n.onerror=s=>{const i="Error. objectStoreRequest failed";console.error(i,s),r({error:i})},n.onsuccess=s=>{var a;const i=(a=s.target)==null?void 0:a.result;if(i){const c=i.key,u=i.value;o[c]=u,i.continue()}else t({result:o})}})}async function An(e,t,r){try{const o=(await ue(e,t,r,"readwrite")).objectStore(r),{error:s,result:i}=await er(o);if(s)throw new Error(s);return{indexDBState:i}}catch(n){const o="Error. Impossible to read all records from indexedDB";return(n==null?void 0:n.name)==="NotFoundError"?{indexDBState:void 0,error:void 0}:(console.error(o,n),{error:`${o}. ${n}`})}}async function tr(e,t,r){return new Promise((n,o)=>{const s=e.put(r,t);s.onerror=i=>{const a="Error. objectStoreRequest failed";console.error(a,i),o(a)},s.onsuccess=()=>{n(void 0)}})}async function rr(e,t,r,n){try{const s=(await ue(e,t,r,"readwrite")).objectStore(r);Object.entries(n).forEach(([i,a])=>{tr(s,i,a)})}catch(o){return console.error(o),`${o}`}}const j="gzip",Te="trader_",B="json",le="gz",Je="application/octet-stream",de=`${B}.${le}`;function Ye(e){const t=e.name.split(".");let r=t.pop();return r===le&&(r=[t.pop(),r].join(".")),r}function Tn(e,t){const r=Ye(e);return r?t.includes(`.${r}`):!1}async function nr(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n),n.onerror=o=>r(o),n.readAsArrayBuffer(e)})}async function or(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n),n.onerror=o=>r(o),n.readAsText(e)})}function _e(){return new Date().toISOString().replaceAll(":","-").replaceAll("T","_").replaceAll(/\.\d{3}Z/g,"")}function Ze(e,t){const r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function sr(e,t){const r="data:text/plain;charset=utf-8,"+encodeURIComponent(t);Ze(e,r)}function ir(e,t,r=Je){const n=window.URL.createObjectURL(new Blob([t],{type:r}));Ze(e,n)}function ar(e){return d.stringify(e)}async function _n(e){try{const t=ar(e),r=await cr(t,j);if(r){const o=`${Te}${_e()}.${de}`;ir(o,r,Je);return}const n=`${Te}${_e()}.${B}`;sr(n,t)}catch(t){return console.error(t),t}}function cr(e,t=j){try{const r=new TextEncoder().encode(e),n=new CompressionStream(t),o=n.writable.getWriter();return o.write(r),o.close(),new Response(n.readable).arrayBuffer()}catch(r){console.error(r);return}}function ur(e,t=j){try{const r=new DecompressionStream(t),n=r.writable.getWriter();return n.write(e),n.close(),new Response(r.readable).arrayBuffer().then(o=>new TextDecoder().decode(o))}catch(r){console.error(r);return}}function lr(e){return d.parse(e)}async function dr(e){let t;const r=Ye(e);if(r===de){const n=(await nr(e)).result;if(t=await ur(n,j),!t){const o=`Upload file error. Impossible to decompress file (${B}.${le} format)`;throw new Error(o)}}else if(r===B){if(t=(await or(e)).result,!t){const n=`Upload file error. Impossible to read file (${B} format)`;throw new Error(n)}}else{const n="Upload file error. Unsupported file format";throw new Error(n)}return t}const fr=[`.${B}`,`.${de}`],bn=fr.join(", ");async function gr(e){try{const t=lr(e);if(!t)return"Upload file error. Impossible to read json data from the file";if(await rr(We,Jt,Xe,t))return"Upload file error. Impossible set data into indexedBD"}catch(t){return console.error(t),`Upload file error. ${t}`}}function yr(e,t=""){const r=e.replace(/^[^/]*\//,"");return new Promise((n,o)=>{fetch(e).then(async function(i){const a=await i.blob(),c=new File([a],r,{type:t});n({file:c,error:void 0})}).catch(function(i){o({file:void 0,error:i})})})}const be=e=>{let t;const r=new Set,n=(u,l)=>{const y=typeof u=="function"?u(t):u;if(!Object.is(y,t)){const S=t;t=l??(typeof y!="object"||y===null)?y:Object.assign({},t,y),r.forEach(g=>g(t,S))}},o=()=>t,a={setState:n,getState:o,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=t=e(n,o,a);return a},mr=e=>e?be(e):be,pr=e=>e;function Sr(e,t=pr){const r=we.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return we.useDebugValue(r),r}const ve=e=>{const t=mr(e),r=n=>Sr(t,n);return Object.assign(r,t),r},Oe=e=>e?ve(e):ve;function Qe(e,t){return(...r)=>Object.assign({},e,t(...r))}function wr(e,t){let r;try{r=e()}catch{return}return{getItem:o=>{var s;const i=c=>c===null?null:JSON.parse(c,void 0),a=(s=r.getItem(o))!=null?s:null;return a instanceof Promise?a.then(i):i(a)},setItem:(o,s)=>r.setItem(o,JSON.stringify(s,void 0)),removeItem:o=>r.removeItem(o)}}const se=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return se(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return se(n)(r)}}}},Ir=(e,t)=>(r,n,o)=>{let s={storage:wr(()=>localStorage),partialize:f=>f,version:0,merge:(f,h)=>({...h,...f}),...t},i=!1;const a=new Set,c=new Set;let u=s.storage;if(!u)return e((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...f)},n,o);const l=()=>{const f=s.partialize({...n()});return u.setItem(s.name,{state:f,version:s.version})},y=o.setState;o.setState=(f,h)=>{y(f,h),l()};const S=e((...f)=>{r(...f),l()},n,o);o.getInitialState=()=>S;let g;const m=()=>{var f,h;if(!u)return;i=!1,a.forEach(w=>{var _;return w((_=n())!=null?_:S)});const P=((h=s.onRehydrateStorage)==null?void 0:h.call(s,(f=n())!=null?f:S))||void 0;return se(u.getItem.bind(u))(s.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==s.version){if(s.migrate){const _=s.migrate(w.state,w.version);return _ instanceof Promise?_.then(W=>[!0,W]):[!0,_]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var _;const[W,mt]=w;if(g=s.merge(mt,(_=n())!=null?_:S),r(g,!0),W)return l()}).then(()=>{P==null||P(g,void 0),g=n(),i=!0,c.forEach(w=>w(g))}).catch(w=>{P==null||P(void 0,w)})};return o.persist={setOptions:f=>{s={...s,...f},f.storage&&(u=f.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>i,onHydrate:f=>(a.add(f),()=>{a.delete(f)}),onFinishHydration:f=>(c.add(f),()=>{c.delete(f)})},s.skipHydration||m(),g||S},Er=Ir;function hr(e){return Number.isFinite(e)}function Ar(){return{getItem:e=>{const t=window.localStorage.getItem(e);return t?d.parse(t):null},setItem:(e,t)=>{window.localStorage.setItem(e,d.stringify(t))},removeItem:e=>window.localStorage.removeItem(e)}}function Tr(){return{getItem:e=>{const t=window.sessionStorage.getItem(e);return t?d.parse(t):null},setItem:(e,t)=>{window.sessionStorage.setItem(e,d.stringify(t))},removeItem:e=>window.sessionStorage.removeItem(e)}}const _r="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let br=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=_r[r[e]&63];return t};const k=()=>br();function p(e){return Array.from(e.keys())}function V(e){return Array.from(e.values())}const vr=e=>{if(typeof window>"u")return e;const t=r=>{r.key===e.persist.getOptions().name&&r.newValue&&e.persist.rehydrate()};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},Pe=0;function Re(){return new Date().getTime()}function Or(e){const t=V(e);if(t.length)return t.reduce((r,n)=>n.createdAt<r.createdAt?n:r,t[0])}function Pr(e,t=1){const r=V(e);return r.length?(r.sort((n,o)=>n.createdAt-o.createdAt),r.slice(0,t)):[]}function Rr(e){return Qe({uuids:Array(),entities:new Map,isHydrated:!1,isHydrating:!1},(t,r)=>({items(){return V(r().entities)},getByUuid(n){return r().entities.get(n)},create(n){const o={...n,uuid:k(),createdAt:Re()};return t(s=>{const i=new Map(s.entities);if(i.set(o.uuid,o),i.size>=e){const a=Or(i);if(!a)return{entities:i,uuids:p(i)};i.delete(a.uuid)}return{entities:i,uuids:p(i)}}),o},update(n){const s=r().entities.get(n.uuid);if(!s)return;const a={...s,...n};return t(c=>{const u=new Map(c.entities);return u.set(a.uuid,a),{entities:u,uuids:p(u)}}),a},delete(n){t(o=>{const s=new Map(o.entities);return s.delete(n.uuid),{entities:s,uuids:p(s)}})},createMultiple(n){const o=n.map(s=>({...s,uuid:k(),createdAt:Re()}));t(s=>{const i=new Map(s.entities);if(o.forEach(a=>{i.set(a.uuid,a)}),i.size>=e){const a=i.size-e;Pr(i,a).forEach(u=>{i.delete(u.uuid)})}return{entities:i,uuids:p(i)}})},deleteMultiple(n){t(o=>{const s=new Map(o.entities);return n.forEach(i=>{s.delete(i)}),{entities:s,uuids:p(s)}})},clear(){t(()=>({entities:new Map,uuids:new Array}))},refreshUuids(){t(n=>({uuids:p(n.entities)}))},setIsHydrating(n){t(()=>({isHydrating:n}))},setIsHydrated(){t(n=>({isHydrated:!0,isHydrating:!1,uuids:p(n.entities)}))}}))}function Br(){return Qe({uuids:Array(),entities:new Map,isHydrated:!1,isHydrating:!1},(e,t)=>({items(){return V(t().entities)},getByUuid(r){return t().entities.get(r)},create(r){const n={...r,uuid:k()};return e(o=>{const s=new Map(o.entities);return s.set(n.uuid,n),{entities:s,uuids:p(s)}}),n},update(r){const o=t().entities.get(r.uuid);if(!o)return;const i={...o,...r};return e(a=>{const c=new Map(a.entities);return c.set(i.uuid,i),{entities:c,uuids:p(c)}}),i},delete(r){e(n=>{const o=new Map(n.entities);return o.delete(r.uuid),{entities:o,uuids:p(o)}})},createMultiple(r){const n=r.map(o=>({...o,uuid:k()}));e(o=>{const s=new Map(o.entities);return n.forEach(i=>{s.set(i.uuid,i)}),{entities:s,uuids:p(s)}})},deleteMultiple(r){e(n=>{const o=new Map(n.entities);return r.forEach(s=>{o.delete(s)}),{entities:o,uuids:p(o)}})},clear(){e(()=>({entities:new Map,uuids:new Array}))},refreshUuids(){e(r=>({uuids:p(r.entities)}))},setIsHydrating(r){e(()=>({isHydrating:r}))},setIsHydrated(){e(r=>({isHydrated:!0,isHydrating:!1,uuids:p(r.entities)}))}}))}function E({persistStorageItemKey:e,persistStorageType:t="indexedDB",maxCapacity:r,isListeningStorageDOMEvent:n=!0,skipHydration:o=!0}={}){let s;if(hr(r)&&r>0?s=Rr(r):s=Br(),typeof e!="string"||!e)return Oe(s);let i;t==="indexedDB"?i=Yt():t==="sessionStorage"?i=Tr():i=Ar();const a=Oe(Er(s,{name:e,storage:i,skipHydration:!!o,onRehydrateStorage:c=>function(){window.setTimeout(function(){c.setIsHydrated(),window.setTimeout(function(){en(a)},Pe)},Pe)},partialize:c=>{const u=["isHydrated","isHydrating","uuids","items"];return Object.fromEntries(Object.entries(c).filter(([l])=>!u.includes(l)))}}));return n&&vr(a),a}const et=E({persistStorageItemKey:"buy-orders"});function tt(){return et.getState().items()}function vn({locationUuid:e,productUuid:t}){return tt().find(n=>n.locationUuid===e&&n.productUuid===t)}function On({uuid:e,locationUuid:t,productUuid:r}){return tt().find(o=>o.uuid!==e&&o.productUuid===r&&o.locationUuid===t)}const rt=E({persistStorageItemKey:"planetary-systems"});function nt(){return rt.getState()}function Mr(){return nt().entities}function fe(){return nt().items()}function Ur(e){return Mr().get(e)}function ot(e){return fe().find(t=>t.name.localeCompare(e)===0)}function Pn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return fe().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}function Rn({uuid:e,position:t}){return fe().find(r=>r.uuid!==e&&r.position===t)}const ge=E({persistStorageItemKey:"locations"});function Nr(){return ge.getState().entities}function L(){return ge.getState().items()}function Cr(e){return Nr().get(e)}function Bn({uuid:e,id:t}){if(!t)return;const r=t.toLocaleUpperCase();return L().find(n=>n.uuid!==e&&!!n.id&&n.id.localeCompare(r)===0)}function Dr({id:e,name:t}){if(!(!e&&!t))return L().find(r=>e&&t?r.id===e&&r.name===t:e&&!t?r.id===e:r.name===t)}function Mn({id:e,name:t,planetarySystemName:r}){if(!(!e&&!t&&!r)){if(r){const n=ot(r);if(n){const o=n.uuid;return L().find(i=>e&&t?i.id===e&&i.name===t&&i.planetarySystemUuid===o:e&&!t?i.id===e&&i.planetarySystemUuid===o:i.name===t&&i.planetarySystemUuid===o)}}return Dr({id:e,name:t})}}function Un(e){return L().filter(r=>r.planetarySystemUuid===e)}const st=E({persistStorageItemKey:"location-types"});function it(){return st.getState()}function Lr(){return it().entities}function at(){return it().items()}function Nn(e){return Lr().get(e)}function Cn(e){return at().find(t=>t.name.localeCompare(e)===0)}function Dn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return at().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const ye=E({persistStorageItemKey:"moving-entities"});function xr(){return ye.getState().entities}function x(){return ye.getState().items()}function Ln(e){return xr().get(e)}function xn({uuid:e,id:t}){if(!t)return;const r=t.toLocaleUpperCase();return x().find(n=>n.uuid!==e&&!!n.id&&n.id.localeCompare(r)===0)}function Fn({uuid:e,originalId:t}){if(!t)return;const r=t.toLocaleUpperCase();return x().find(n=>n.uuid!==e&&!!n.originalId&&n.originalId.localeCompare(r)===0)}function Fr({id:e,name:t}){if(!(!e&&!t))return x().find(r=>e&&t?r.id===e&&r.name===t:e&&!t?r.id===e:r.name===t)}function kn({id:e,name:t,planetarySystemName:r}){if(!(!e&&!t&&!r)){if(r){const n=ot(r);if(n){const o=n.uuid,s=x();let i=s.find(a=>e&&t?a.id===e&&a.name===t&&a.locationUuid===o:e&&!t?a.id===e&&a.locationUuid===o:a.name===t&&a.locationUuid===o);if(!i){const u=L().filter(l=>l.planetarySystemUuid===o).map(l=>l.uuid);i=s.find(l=>e&&t?l.id===e&&l.name===t&&u.includes(l.locationUuid):e&&!t?l.id===e&&u.includes(l.locationUuid):l.name===t&&u.includes(l.locationUuid))}return i}}return Fr({id:e,name:t})}}function Hn(e){return x().filter(r=>{const n=r.locationUuid;if(!n)return!1;const o=Cr(n);if(o)return o.planetarySystemUuid===e;const s=Ur(n);if(s)return s.uuid===e})}const $=E({persistStorageItemKey:"moving-entity-classes"});function kr(){return $.getState().entities}function ct(){return $.getState().items()}function qn(){return $.getState().isHydrating}function jn(e){return kr().get(e)}function Vn(e){return ct().find(t=>t.name.localeCompare(e)===0)}function $n({uuid:e,name:t}){const r=t.toLocaleLowerCase();return ct().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const Hr=1e3,me=E({persistStorageItemKey:"prices-at-marks",maxCapacity:Hr});function qr(){return me.getState().items()}function ut(e){return qr().find(t=>t.orderUuid===e)}function jr(e){return e?((e==null?void 0:e.pricesAtMarks.length)||0)>1:!1}function zn(e){const t=ut(e);return jr(t)}function Vr(e){me.getState().delete(e)}function Gn(e){const t=ut(e);t&&Vr(t)}const z=E({persistStorageItemKey:"product-rarities"});function $r(){return z.getState().entities}function pe(){return z.getState().items()}function Kn(){return z.getState().isHydrating}function Wn(e){return $r().get(e)}function Xn(e){return pe().find(t=>t.name.localeCompare(e)===0)}function Jn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return pe().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}function Yn({uuid:e,value:t}){return pe().find(r=>r.uuid!==e&&r.value===t)}const G=E({persistStorageItemKey:"products"});function zr(){return G.getState().entities}function Gr(){return G.getState().items()}function Zn(){return G.getState().isHydrating}function Qn(e){return zr().get(e)}function eo({uuid:e,name:t}){const r=t.toLocaleLowerCase();return Gr().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const K=E({persistStorageItemKey:"product-types"});function Kr(){return K.getState().entities}function lt(){return K.getState().items()}function to(){return K.getState().isHydrating}function ro(e){return Kr().get(e)}function no(e){return lt().find(t=>t.name.localeCompare(e)===0)}function oo({uuid:e,name:t}){const r=t.toLocaleLowerCase();return lt().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const dt=E({persistStorageItemKey:"sell-orders"});function ft(){return dt.getState().items()}function so({locationUuid:e,productUuid:t}){return ft().find(n=>n.locationUuid===e&&n.productUuid===t)}function io({uuid:e,locationUuid:t,productUuid:r}){return ft().find(o=>o.uuid!==e&&o.productUuid===r&&o.locationUuid===t)}const Se=E();function Be(){return Se.getState().items()}function Wr(e){return e?Be().filter(t=>{if(!t.tags)return!1;const r=t.tags.filter(n=>e.includes(n));return r.length===t.tags.length&&r.length===e.length}):Be().filter(t=>!t.tags)}function Xr(e){return Se.getState().create(e)}function Jr(e){return Se.getState().deleteMultiple(e)}function Q(e){const t=e.tags;if(t!=null&&t.length){const r=Wr(t);if(r.length){const n=r.map(o=>o.uuid);Jr(n)}}return Xr(e)}const Yr="/trader/demo-data.json.gz",ie=2*1e3,ee=ie,b=new Map,gt=[dt,et,me,G,K,z,ge,st,rt,ye,$],Zr=["useSellOrdersStore","useBuyOrdersStore","usePriceHistoriesStore","useProductsStore","useProductTypesStore","useProductRaritiesStore","useLocationsStore","useLocationTypesStore","usePlanetarySystemsStore","useMovingEntitiesStore","useMovingEntityClassesStore"];gt.map(e=>{b.set(e,!1)});const yt=new Map;gt.map((e,t)=>{yt.set(e,Zr[t])});let ae=!0;function Qr(){if(!ae)return;const e=new Array;b.forEach((t,r)=>{if(t){const n=yt.get(r);if(!n){console.error("");return}e.push(n)}}),e.length===b.size&&tn()}function en(e){if(ae&&b.has(e)&&!b.get(e)){const t=e.getState().isHydrated,r=e.getState().items,o=!!(typeof r=="function"?r():r).length,s=t&&o;b.set(e,s),s?(ae=!1,b.clear()):(b.set(e,!0),Qr())}}async function tn(){const{file:e,error:t}=await yr(Yr,"application/gzip");if(!e){Q({entityType:X,messages:[()=>T.jsx(T.Fragment,{children:t})],hideTimeout:ee,tags:["storage-data-import-demo-data"],type:"error",title:"Loading demo data failed"});return}const r=await dr(e),n=await gr(r);if(n)return Q({entityType:X,messages:[()=>T.jsx(T.Fragment,{children:n})],hideTimeout:ee,tags:["storage-data-import-demo-data"],type:"error",title:"Importing demo data failed"}),n;Q({entityType:X,messages:[()=>T.jsxs(T.Fragment,{children:[T.jsx("div",{children:"Demo data successfully loaded."}),T.jsxs("div",{children:["Page will be reloaded in"," ",Math.ceil(ie/1e3)," ","seconds to use demo data"]})]})],hideTimeout:ee,tags:["storage-data-import-demo-data"],type:"success",title:"Importing demo data"}),window.setTimeout(function(){window.location.reload()},ie)}const rn="_Button_qx05o_1",nn="_NoCapitalize_qx05o_12",on="_Primary_qx05o_44",sn="_Fluid_qx05o_49",an="_Tiny_qx05o_54",cn="_Small_qx05o_63",un="_Big_qx05o_72",ln="_TransparentOnDefaultState_qx05o_81",dn="_Transparent_qx05o_81",fn="_NoPadding_qx05o_87",gn="_NoBorder_qx05o_108",yn="_IsAlwaysVisible_qx05o_117",mn="_IsStaticBehaviour_qx05o_126",pn="_AsLink_qx05o_162",I={Button:rn,NoCapitalize:nn,Primary:on,Fluid:sn,Tiny:an,Small:cn,Big:un,TransparentOnDefaultState:ln,Transparent:dn,NoPadding:fn,NoBorder:gn,IsAlwaysVisible:yn,IsStaticBehaviour:mn,AsLink:pn},ao=v.memo(function({primary:t,fluid:r=!1,size:n,transparent:o=!1,transparentOnDefaultState:s=!1,noPadding:i=!1,noBorder:a=!1,isStaticBehaviour:c=!1,isAlwaysVisible:u=!1,asLink:l,noCapitalize:y=!1,ref:S,type:g="button",children:m,...f}){const h=Ue([I.Button,r&&I.Fluid,n==="tiny"&&I.Tiny,n==="small"&&I.Small,n==="big"&&I.Big,t&&I.Primary,o&&I.Transparent,s&&I.TransparentOnDefaultState,i&&I.NoPadding,a&&I.NoBorder,c&&I.IsStaticBehaviour,l&&I.AsLink,y&&I.NoCapitalize,u&&I.IsAlwaysVisible]);return T.jsx("button",{ref:S,className:h,type:g,...f,children:m})}),co=e=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...e},v.createElement("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}));function Sn({autoFocus:e=!1,autoFocusDelay:t=250}){const r=v.useRef(null);return v.useEffect(function(){if(!e)return;const o=r.current;o&&window.setTimeout(function(){o.focus()},t)},[r,e,t]),r}const wn="_InputField_ikonk_1",In="_Uppercase_ikonk_11",Me={InputField:wn,Uppercase:In},uo=v.memo(function({type:t="text",autoComplete:r="off",onFieldValueChange:n,name:o,value:s,autoFocusOnFirstRender:i,uppercase:a,...c}){const u=v.useCallback(function(S){if(typeof n!="function")return;if(!o){console.error("Error. Form field must have name");return}const g=S.target.value;n(o,g)},[n,o]),l=Sn({autoFocus:i});return T.jsx("input",{ref:l,autoComplete:r,type:t,className:Ue([Me.InputField,a&&Me.Uppercase]),name:o,value:s,onChange:u,...c})}),lo="",fo="products",go="locations",yo="moving-entities",mo="map";function po(e){const t=e.map(n=>n(o=>o.isHydrated)).reduce((n,o)=>n&&o,!0),r=!t;return v.useEffect(function(){t||e.forEach(o=>{const{isHydrating:s,isHydrated:i}=o.getState();s||i||(o.getState().isHydrating=!0,o.persist.rehydrate())})},[t,e]),r}export{Yn as $,G as A,ao as B,de as C,B as D,X as E,me as F,zr as G,V as H,Xe as I,rt as J,ut as K,On as L,hr as M,jr as N,Hr as O,go as P,zn as Q,Zn as R,bn as S,so as T,io as U,vn as V,Mn as W,ot as X,Sn as Y,z as Z,Jn as _,fr as a,$r as a0,K as a1,Kr as a2,Wn as a3,ro as a4,Kn as a5,to as a6,eo as a7,no as a8,Xn as a9,Ln as aA,Un as aB,Hn as aC,fe as aD,L as aE,x as aF,kn as aG,xr as aH,Nr as aI,Mr as aJ,oo as aa,st as ab,Lr as ac,Dn as ad,Nn as ae,it as af,nt as ag,Bn as ah,Cn as ai,Pn as aj,Rn as ak,lo as al,$ as am,jn as an,qn as ao,ye as ap,kr as aq,xn as ar,Fn as as,Vn as at,$n as au,Oe as av,Qe as aw,E as ax,co as ay,uo as az,_n as b,Q as c,Tn as d,hn as e,Jt as f,An as g,We as h,gr as i,mo as j,fo as k,tn as l,yo as m,Ue as n,po as o,pt as p,Cr as q,dr as r,gt as s,Ur as t,Se as u,dt as v,et as w,Gn as x,Qn as y,ge as z};
