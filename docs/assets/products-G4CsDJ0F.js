import{a as n,p as o,s as nt}from"./chunk-NL6KNZEE-Dk3Cym_s.js";import{u as ce,q as at,r as D,T as le,n as de,S as ue,k as Ee,l as je,m as N,N as Me,i as Ie,s as ee,g as st,h as Ue,j as Re,t as it,o as ct,p as lt}from"./SearchOffIcon-7n7t_y1_.js";import{c as De}from"./createPageTitleString-BzKRSWbw.js";import{M as dt}from"./Main-BwsE5XhZ.js";import{b as me,d as pe,c as ut}from"./shallow-sWQUOxsk.js";import{w as he,o as L,Z as I,_ as mt,$ as pt,B as te,a0 as ht,L as Ne,a1 as R,a2 as yt,a3 as Q,a4 as Z,a5 as ft,a6 as Pt,H as U,a7 as St,a8 as Tt,a9 as gt,aa as Ct}from"./useLoadingPersistStorages-D7HzREWB.js";import{S as ye}from"./SearchFormAndTableContainer-C1hwLMnm.js";import{S as fe}from"./StaticLink-D-brTwns.js";import{S as _e,D as bt}from"./DialogFilterForm-hofrYX-n.js";import{h as Pe,g as W,M as Se,d as Te,e as ge,f as Ce,u as be,a as Ft,b as It,c as Rt,T as Lt}from"./Dialog-D1ngMR8w.js";import{g as ke}from"./getUrlToProductsPageWithParams-wGS_qI9s.js";import{g as xt,Q as At}from"./getUrlToMarketPageWithParams-VS2rmn-S.js";import"./middleware-46aBMWQM.js";import"./App.const-DNoFr9tQ.js";import"./index-Ds4Gyjyp.js";const we="product-rarity",Oe=["uuid","entityType","name","value"],Et=he(Oe),jt=n.memo(function({itemToDelete:e,onHideModal:r,onHideParentModal:s}){const a=L([I]),c=I(l=>l.delete),d=n.useCallback(function(){r()},[r]),p=n.useCallback(function(){s()},[s]),y=n.useCallback(function(){a||(c(e),d(),p())},[c,e,d,p,a]),h=n.useMemo(function(){return o.jsxs(o.Fragment,{children:["Are you sure you want"," ",o.jsx("strong",{children:"to delete"}),o.jsx("br",{}),"the product rarity named"," ",o.jsx("strong",{children:e.name}),"?"]})},[e]);return o.jsx(me,{title:h,onHide:d,onConfirm:y,confirmButtonLabel:"delete product rarity"})}),Mt=[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0},{name:"value",type:"number",required:!0}],Ut=({itemToEdit:t,onHideModal:e,onShowDeleteItemConfirmation:r,onCreateItem:s,onUpdateItem:i})=>{const c=L([I]),d=I(m=>m.create),p=I(m=>m.update),y=n.useCallback(m=>{const u=d(m);typeof s=="function"&&s(u)},[d,s]),h=n.useCallback(m=>{const u=p(m);u&&typeof i=="function"&&i(u)},[p,i]),l=n.useCallback(()=>{e()},[e]),P=n.useCallback(m=>{if(Pe(m)){const u=W(m,Oe);h(u)}else{const u=W(m,Et);u.entityType=we,y(u)}l()},[y,h,l]),S=n.useCallback(m=>{if(c)return function(){return o.jsx("span",{children:"Loading..."})};const u=mt(m);if(u)return function(){return o.jsxs(o.Fragment,{children:["Product rarity named"," ",o.jsx("strong",{children:u.name})," ","already exists"]})};const b=pt(m);if(b)return function(){return o.jsxs(o.Fragment,{children:["Product rarity with value"," ",o.jsx("strong",{children:b.value})," ","(named"," ",o.jsx("strong",{children:b.name})," ",") already exists"]})}},[c]);return o.jsx(Se,{humanizedItemTypeName:"product rarity",itemToEdit:t,formFields:Mt,validateFormData:S,onCancel:l,onSubmit:P,onDelete:r,deleteItemButtonLabel:"delete product rarity"})};function Dt({urlSearchParams:t,setUrlSearchParams:e}){return ce({urlSearchParams:t,setUrlSearchParams:e,getSearchValueFromUrlSearchParams:at,searchValueKeyInUrlSearchParams:D,searchFieldNameInSearchForm:D,searchFieldPlaceholderTextInSearchForm:"Search by product rarity name..."})}const Nt=["name","value"],J=[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,alignLabel:"left",actionButtons:({item:t})=>{const e=ke({productRarityName:t==null?void 0:t.name});return o.jsx(o.Fragment,{children:e?o.jsx(fe,{href:e,title:"search by product rarity in products",children:o.jsx(_e,{})}):o.jsx(te,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:o.jsx(ue,{})})})}},{name:"value",type:"number",isSortable:!0,sort:"asc"}],_t=["name"],kt=J.filter(t=>_t.includes(t.name)),wt=n.memo(function({urlSearchParams:e,setUrlSearchParams:r}){const i=L([I]),{searchFieldValue:a,SearchForm:c,resetSearchFieldValue:d}=Dt({urlSearchParams:e,setUrlSearchParams:r}),p=I(pe(F=>F.items())),y=I(F=>F.deleteMultiple),[h,l]=n.useState(!1),[P,S]=n.useState(),[m,u]=n.useState(),b=n.useCallback(()=>{l(!0)},[l]),g=n.useCallback(()=>{S(void 0),l(!1)},[S,l]),x=n.useCallback(F=>{u(F)},[u]),A=n.useCallback(()=>{u(void 0)},[u]),j=n.useMemo(function(){return a?p.filter(z=>!!kt.find(O=>{let T=z[O.name];return O.isSearchCaseInsensitive?(T=T==null?void 0:T.toLocaleLowerCase(),T==null?void 0:T.includes(a.toLocaleLowerCase())):T==null?void 0:T.includes(a)})):p},[a,p]),{sortedItems:f,columnsToSortBy:C,handleColumnSortClick:_}=Te(j,J,Nt),{selectedItemsUuids:k,handleResetSelectedItems:H,handleSelectAllItems:Y,handleSelectItem:$,handleShowDeleteMultipleSelectedItemsConfirmation:q,DeleteSelectedItemsConfirmation:w}=ge({itemTypeNamePlural:"product rarities",items:f,searchFieldValue:a,deleteItemsByUuids:y,setItemToDelete:u}),{lastCreatedOrUpdatedItem:M,onCreateItem:K,onUpdateItem:G}=Ce({itemEntityType:we,items:f,searchFieldValue:a,resetSearchFieldValue:d});return o.jsxs(ye,{children:[c,o.jsx(le,{tableTitle:"product rarities",tableColumns:J,items:f,noItemsLabel:"no product rarities",isLoading:i,showCreateItemModalButtonLabel:"add product rarity",onShowCreateItemModal:b,columnsToSortBy:C,onColumnHeaderClick:_,selectedItemsUuids:k,onResetSelectedItems:H,onSelectAllItems:Y,onDeleteSelectedItems:q,searchFieldValue:a,children:o.jsx(de,{items:f,columns:J,selectedItemsUuids:k,onEditItem:S,onSelectItem:$,lastCreatedOrUpdatedItem:M})}),(h||!!P)&&o.jsx(Ut,{itemToEdit:P,onHideModal:g,onShowDeleteItemConfirmation:x,onCreateItem:K,onUpdateItem:G}),!!m&&o.jsx(jt,{onHideModal:A,onHideParentModal:g,itemToDelete:m}),o.jsx(w,{})]})}),se="Products";function Ot({productName:t}){const e=[t].filter(r=>!!r);return e.length?`Search ${e.join(" ")} - ${se}`:`${se}`}const Bt="_Container_xowyn_1",vt="_Products_xowyn_10",Ht="_Parameters_xowyn_16",ae={Container:Bt,Products:vt,Parameters:Ht},Be="product",ve=["uuid","entityType","name","productTypeUuid","productRarityUuid","image"],Vt=he(ve),B=Ee();function He(){const{isHydrating:t,isHydrated:e}=I.getState();if(t||!e)return;const r=ht();Wt({productRaritiesMap:r})}B.setState({prepareData:He});I.subscribe(function(){He()});function Wt({productRaritiesMap:t}){const e=B.getState();e.isProcessing||(e.setIsProcessing(!0),window.setTimeout(function(){const i=qt({productRaritiesMap:t});e.replaceAll(i),e.setIsProcessing(!1)},0))}function Yt(t,e=!1){const r=(t==null?void 0:t.name)??"(product rarity without name)",s=e?je(r,"product rarity"):r;return{name:r,nameAsLabel:s}}function $t({productRaritiesMap:t,shouldAddSuffixLabel:e=!1}){const r=[];return Ne(t).forEach(function(a){const c=a.uuid,{name:d,nameAsLabel:p}=Yt(a,e);r.push({uuid:c,name:d,label:p})}),r}function Ve(t){t.sort((e,r)=>e.name.localeCompare(r.name)),t.forEach(({items:e})=>Ve(e??[]))}function We({items:t=[],level:e=0,disableOptionsWithoutUuid:r=!0,selectOptions:s=new Array}){return t.forEach(i=>{const{label:a,items:c}=i,d=i.uuid,p=d??"";s.push({value:p,label:a,level:e,disabled:r?!d:!1}),c!=null&&c.length&&We({items:c,level:e+1,disableOptionsWithoutUuid:r,selectOptions:s})}),s}function qt({productRaritiesMap:t,disableOptionsWithoutUuid:e}){const r=$t({productRaritiesMap:t,shouldAddSuffixLabel:!1});return Ve(r),We({items:r,disableOptionsWithoutUuid:e})??[]}const v=Ee();function Ye(){const{isHydrating:t,isHydrated:e}=R.getState();if(t||!e)return;const r=yt();Kt({productTypesMap:r})}v.setState({prepareData:Ye});R.subscribe(function(){Ye()});function Kt({productTypesMap:t}){const e=v.getState();e.isProcessing||(e.setIsProcessing(!0),window.setTimeout(function(){const i=Qt({productTypesMap:t});e.replaceAll(i),e.setIsProcessing(!1)},0))}function Gt(t,e=!1){const r=(t==null?void 0:t.name)??"(product type without name)",s=e?je(r,"product type"):r;return{name:r,nameAsLabel:s}}function zt({productTypesMap:t,shouldAddSuffixLabel:e=!1}){const r=[];return Ne(t).forEach(function(a){const c=a.uuid,{name:d,nameAsLabel:p}=Gt(a,e);r.push({uuid:c,name:d,label:p})}),r}function $e(t){t.sort((e,r)=>e.name.localeCompare(r.name)),t.forEach(({items:e})=>$e(e??[]))}function qe({items:t=[],level:e=0,disableOptionsWithoutUuid:r=!0,selectOptions:s=new Array}){return t.forEach(i=>{const{label:a,items:c}=i,d=i.uuid,p=d??"";s.push({value:p,label:a,level:e,disabled:r?!d:!1}),c!=null&&c.length&&qe({items:c,level:e+1,disableOptionsWithoutUuid:r,selectOptions:s})}),s}function Qt({productTypesMap:t,disableOptionsWithoutUuid:e}){const r=zt({productTypesMap:t,shouldAddSuffixLabel:!1});return $e(r),qe({items:r,disableOptionsWithoutUuid:e})??[]}const ie=(t,e)=>[{name:"productTypeUuid",label:"type",type:"select",options:t,chooseOptionLabel:"choose a product type",noOptionsLabel:"no product type available",allowToSelectNoValueOption:!0,filterPredicate:(r,s)=>r.productTypeUuid===s.productTypeUuid},{name:"productRarityUuid",label:"rarity",type:"select",options:e,chooseOptionLabel:"choose a product rarity",noOptionsLabel:"no product rarity available",allowToSelectNoValueOption:!0,filterPredicate:(r,s)=>r.productRarityUuid===s.productRarityUuid}],Zt=n.memo(function({filterValue:e,onSetFilterValue:r,onHide:s}){const i=L([R,I]),a=be([v,B]),c=i||a,d=v(P=>P.items),p=B(P=>P.items),y=n.useMemo(function(){return c?ie([],[]):ie(d,p)},[d,p,c]),h=n.useCallback(function(){s()},[s]),l=n.useCallback(function(S){Object.keys(S).length?r(S):r(void 0),h()},[h,r]);return o.jsx(o.Fragment,{children:o.jsx("div",{style:{position:"absolute",top:0,right:0},children:o.jsx(bt,{humanizedPluralItemTypeName:"products",filterValue:e,formFields:y,onCancel:h,onFilter:l})})})}),Jt="_Container_16hmi_1",Xt="_SearchAndFilterFormContainer_16hmi_9",Le={Container:Jt,SearchAndFilterFormContainer:Xt};function eo({name:t,label:e,value:r}){var a;const s=L([I]);if(!r)return;const i=s||!N(r)||(a=Q(r))==null?void 0:a.name;return i?{label:e??(t==null?void 0:t.toString()),value:i}:{label:e??(t==null?void 0:t.toString()),value:"(product rarity without name)"}}function to({name:t,label:e,value:r}){var a;const s=L([R]);if(!r)return;const i=s||!N(r)||(a=Z(r))==null?void 0:a.name;return i?{label:e??(t==null?void 0:t.toString()),value:i}:{label:e??(t==null?void 0:t.toString()),value:"(product type without name)"}}function oo(){return[{name:"productTypeUuid",label:"type",formatLabelAndValue:to},{name:"productRarityUuid",label:"rarity",formatLabelAndValue:eo}]}function ro({value:t}){var i;const s=L([I])||!N(t)||(i=Q(t))==null?void 0:i.name;return o.jsx(o.Fragment,{children:s||o.jsx(Me,{children:"(no data)"})})}function no({value:t}){var i;const s=L([R])||!N(t)||(i=Z(t))==null?void 0:i.name;return o.jsx(o.Fragment,{children:s||o.jsx(Me,{children:"(no data)"})})}function ao({value:t}){const e=xt({productName:typeof t=="string"&&t?t:void 0});return o.jsx(o.Fragment,{children:e?o.jsx(fe,{href:e,title:"search by product name in market",children:o.jsx(At,{})}):o.jsx(te,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:o.jsx(ue,{})})})}function so(t,e){var a,c;if(ft())return 0;const s=N(t)&&((a=Q(t))==null?void 0:a.name)||"",i=N(e)&&((c=Q(e))==null?void 0:c.name)||"";return s.localeCompare(i)}function io(t,e){var a,c;if(Pt())return 0;const s=N(t)&&((a=Z(t))==null?void 0:a.name)||"",i=N(e)&&((c=Z(e))==null?void 0:c.name)||"";return s.localeCompare(i)}function Ke(){return[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,alignLabel:"left",actionButtons:ao},{name:"productTypeUuid",label:"type",isSortable:!0,formatValue:no,sortFn:io},{name:"productRarityUuid",label:"rarity",isSortable:!0,sort:"asc",formatValue:ro,sortFn:so}]}const co=n.memo(function({itemToDelete:e,onHideModal:r,onHideParentModal:s}){const a=L([U]),c=U(l=>l.delete),d=n.useCallback(function(){r()},[r]),p=n.useCallback(function(){s()},[s]),y=n.useCallback(function(){a||(c(e),d(),p())},[e,d,p,c,a]),h=n.useMemo(function(){return o.jsxs(o.Fragment,{children:["Are you sure you want"," ",o.jsx("strong",{children:"to delete"}),o.jsx("br",{}),"the product named"," ",o.jsx("strong",{children:e.name}),"?"]})},[e]);return o.jsx(me,{title:h,onHide:d,onConfirm:y,confirmButtonLabel:"delete product"})});function xe(t=[],e=[]){return[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",label:"name",required:!0},{name:"productTypeUuid",label:"type",type:"select",required:!0,options:e,chooseOptionLabel:"choose a type",noOptionsLabel:"no types available",allowToSelectNoValueOption:!0},{name:"productRarityUuid",label:"rarity",type:"select",required:!0,options:t,chooseOptionLabel:"choose a rarity",noOptionsLabel:"no rarities available",allowToSelectNoValueOption:!0},{name:"image",type:"file",accept:"image/*"}]}const lo=n.memo(function({itemToEdit:e,filterValue:r,onHideModal:s,onShowDeleteItemConfirmation:i,onCreateItem:a,onUpdateItem:c}){const d=L([U,R,I]),p=be([v,B]),y=d||p,h=U(f=>f.create),l=U(f=>f.update),P=n.useCallback(f=>{const C=h(f);typeof a=="function"&&a(C)},[h,a]),S=n.useCallback(f=>{const C=l(f);C&&typeof c=="function"&&c(C)},[l,c]),m=n.useCallback(()=>{s()},[s]),u=n.useCallback(async f=>{if(Pe(f)){const C=W(f,ve);S(C)}else{const C=W(f,Vt);C.entityType=Be,P(C)}m()},[P,S,m]),b=n.useCallback(f=>{if(y)return function(){return o.jsx("span",{children:"Loading..."})};const C=St(f);if(C)return function(){return o.jsxs(o.Fragment,{children:["Product named"," ",o.jsx("strong",{children:C.name})," ","already exists"]})}},[y]),g=v(f=>f.items),x=B(f=>f.items),A=n.useMemo(function(){return y?xe([],[]):xe(x,g)},[x,g,y]),j=Ft(A,r);return o.jsx(Se,{humanizedItemTypeName:"product",itemToEdit:e,formFields:j,validateFormData:b,onCancel:m,onSubmit:u,onDelete:i,deleteItemButtonLabel:"delete product"})}),uo=[D,ee];function Ae(t){const e={typeName:t.get(D)||void 0,rarityName:t.get(ee)||void 0};return st(e)}function mo({filterValue:t}){var c,d;if(!t)return;const{typeName:e,rarityName:r,...s}=t,i=e?(c=Tt(e))==null?void 0:c.uuid:void 0,a=r?(d=gt(r))==null?void 0:d.uuid:void 0;return{...s,productTypeUuid:i,productRarityUuid:a}}function po({urlSearchParams:t,setUrlSearchParams:e}){const r=L([R,I]),s=be([v,B]),i=r||s,a=n.useRef(void 0),c=n.useMemo(function(){const y=Ae(t),h=mo({filterValue:y}),l=a.current;return Ie(l,h)?(a.current=h,h):l},[t,a,i]),d=n.useCallback(function(y){let h;if(typeof y=="function")throw new Error("ProductFilterValue as setState(prev=>newState) function not supported");y&&Object.keys(y).length>0&&(h=y),e(l=>{var m,u;const P=Ae(l);if(Ie(P,h)){if(!h)return uo.forEach(j=>{l.delete(j)}),l;const b=h.productTypeUuid,g=b?(m=Z(b))==null?void 0:m.name:void 0,x=h.productRarityUuid,A=x?(u=Q(x))==null?void 0:u.name:void 0;g?l.set(D,g):l.delete(D),A?l.set(ee,A):l.delete(ee)}return l})},[e]);return{filterValue:c,setFilterValueToUrlSearchParams:d}}function ho({urlSearchParams:t,setUrlSearchParams:e}){return ce({urlSearchParams:t,setUrlSearchParams:e,getSearchValueFromUrlSearchParams:Ue,searchValueKeyInUrlSearchParams:Re,searchFieldNameInSearchForm:Re,searchFieldPlaceholderTextInSearchForm:"Search by product name..."})}const yo=["name","productTypeUuid","productRarityUuid"],fo=["name"],Po=Ke().filter(t=>fo.includes(t.name)),So=n.memo(function({urlSearchParams:e,setUrlSearchParams:r}){const i=L([U,R,I]),{filterValue:a,setFilterValueToUrlSearchParams:c}=po({urlSearchParams:e,setUrlSearchParams:r}),{searchFieldValue:d,SearchForm:p,resetSearchFieldValue:y}=ho({urlSearchParams:e,setUrlSearchParams:r}),h=U(pe(E=>E.items())),l=U(E=>E.deleteMultiple),[P,S]=n.useState(!1),[m,u]=n.useState(),[b,g]=n.useState(),x=n.useCallback(()=>{S(!0)},[S]),A=n.useCallback(()=>{u(void 0),S(!1)},[u,S]),j=n.useCallback(E=>{g(E)},[g]),f=n.useCallback(()=>{g(void 0)},[g]),C=n.useMemo(function(){return d?h.filter(rt=>!!Po.find(Fe=>{const V=rt[Fe.name];if(Fe.isSearchCaseInsensitive){const ne=V==null?void 0:V.toLocaleLowerCase();return ne==null?void 0:ne.includes(d.toLocaleLowerCase())}return V==null?void 0:V.includes(d)})):h},[d,h]),_=n.useMemo(function(){return ie([],[])},[i]),k=n.useMemo(function(){return oo()},[i]),{isAppliedFilter:H,enableFilter:Y,disableFilter:$}=It(a),q=Rt(C,_,H?a:void 0),w=n.useMemo(function(){return Ke()},[i]),{sortedItems:M,columnsToSortBy:K,handleColumnSortClick:G}=Te(q,w,yo),{selectedItemsUuids:F,handleResetSelectedItems:z,handleSelectAllItems:oe,handleSelectItem:O,handleShowDeleteMultipleSelectedItemsConfirmation:T,DeleteSelectedItemsConfirmation:Qe}=ge({itemTypeNamePlural:"products",items:M,searchFieldValue:d,filterValue:a,deleteItemsByUuids:l,setItemToDelete:g}),Ze=n.useCallback(function(){c(void 0)},[c]),{lastCreatedOrUpdatedItem:Je,onCreateItem:Xe,onUpdateItem:et}=Ce({itemEntityType:Be,items:M,searchFieldValue:d,filterValue:a,resetSearchFieldValue:y,resetFilterValue:Ze}),{isVisible:tt,show:ot,hide:re}=ut(!1);return n.useEffect(function(){(a||!a)&&re()},[a,re]),o.jsxs(ye,{children:[o.jsxs("div",{className:Le.SearchAndFilterFormContainer,children:[p,o.jsxs(te,{onClick:ot,title:"show filter form",children:[o.jsx(Lt,{}),o.jsx("span",{children:"filter"})]}),tt&&o.jsx(Zt,{filterValue:a,onSetFilterValue:c,onHide:re})]}),o.jsx("div",{className:Le.Container,children:o.jsx(le,{tableTitle:"products",tableColumns:w,items:M,noItemsLabel:"no products",isLoading:i,showCreateItemModalButtonLabel:"add product",onShowCreateItemModal:x,columnsToSortBy:K,onColumnHeaderClick:G,selectedItemsUuids:F,onResetSelectedItems:z,onSelectAllItems:oe,onDeleteSelectedItems:T,searchFieldValue:d,filterValue:a,isAppliedFilter:H,onEnableFilter:Y,onDisableFilter:$,filterInfoFields:k,children:o.jsx(de,{items:M,columns:w,selectedItemsUuids:F,onEditItem:u,onSelectItem:O,lastCreatedOrUpdatedItem:Je})})}),(P||!!m)&&o.jsx(lo,{itemToEdit:m,filterValue:a,onHideModal:A,onShowDeleteItemConfirmation:j,onCreateItem:Xe,onUpdateItem:et}),!!b&&o.jsx(co,{onHideModal:f,onHideParentModal:A,itemToDelete:b}),o.jsx(Qe,{})]})}),Ge="product-type",ze=["uuid","entityType","name"],To=he(ze),go=n.memo(function({itemToDelete:e,onHideModal:r,onHideParentModal:s}){const a=L([R]),c=R(l=>l.delete),d=n.useCallback(function(){r()},[r]),p=n.useCallback(function(){s()},[s]),y=n.useCallback(function(){a||(c(e),d(),p())},[e,d,p,c,a]),h=n.useMemo(function(){return o.jsxs(o.Fragment,{children:["Are you sure you want"," ",o.jsx("strong",{children:"to delete"}),o.jsx("br",{}),"the product type named"," ",o.jsx("strong",{children:e.name}),"?"]})},[e]);return o.jsx(me,{title:h,onHide:d,onConfirm:y,confirmButtonLabel:"delete product type"})}),Co=[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0}],bo=({itemToEdit:t,onHideModal:e,onShowDeleteItemConfirmation:r,onCreateItem:s,onUpdateItem:i})=>{const c=L([R]),d=R(m=>m.create),p=R(m=>m.update),y=n.useCallback(m=>{const u=d(m);typeof s=="function"&&s(u)},[d,s]),h=n.useCallback(m=>{const u=p(m);u&&typeof i=="function"&&i(u)},[p,i]),l=n.useCallback(()=>{e()},[e]),P=n.useCallback(m=>{if(Pe(m)){const u=W(m,ze);h(u)}else{const u=W(m,To);u.entityType=Ge,y(u)}l()},[y,h,l]),S=n.useCallback(m=>{if(c)return function(){return o.jsx("span",{children:"Loading..."})};const u=Ct(m);if(u)return function(){return o.jsxs(o.Fragment,{children:["Product type named"," ",o.jsx("strong",{children:u.name})," ","already exists"]})}},[c]);return o.jsx(Se,{humanizedItemTypeName:"product type",itemToEdit:t,formFields:Co,validateFormData:S,onCancel:l,onSubmit:P,onDelete:r,deleteItemButtonLabel:"delete product type"})};function Fo({urlSearchParams:t,setUrlSearchParams:e}){return ce({urlSearchParams:t,setUrlSearchParams:e,getSearchValueFromUrlSearchParams:it,searchValueKeyInUrlSearchParams:D,searchFieldNameInSearchForm:D,searchFieldPlaceholderTextInSearchForm:"Search by product type..."})}const Io=["name"],X=[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,sort:"asc",alignLabel:"left",actionButtons:function({item:e}){const r=ke({productTypeName:e==null?void 0:e.name});return o.jsx(o.Fragment,{children:r?o.jsx(fe,{href:r,title:"search by product type in products",children:o.jsx(_e,{})}):o.jsx(te,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:o.jsx(ue,{})})})}}],Ro=["name"],Lo=X.filter(t=>Ro.includes(t.name)),xo=n.memo(function({urlSearchParams:e,setUrlSearchParams:r}){const i=L([R]),{searchFieldValue:a,SearchForm:c,resetSearchFieldValue:d}=Fo({urlSearchParams:e,setUrlSearchParams:r}),p=R(pe(F=>F.items())),y=R(F=>F.deleteMultiple),[h,l]=n.useState(!1),[P,S]=n.useState(),[m,u]=n.useState(),b=n.useCallback(()=>{l(!0)},[l]),g=n.useCallback(()=>{S(void 0),l(!1)},[S,l]),x=n.useCallback(F=>{u(F)},[u]),A=n.useCallback(()=>{u(void 0)},[u]),j=n.useMemo(function(){return a?p.filter(z=>!!Lo.find(O=>{let T=z[O.name];return O.isSearchCaseInsensitive?(T=T==null?void 0:T.toLocaleLowerCase(),T==null?void 0:T.includes(a.toLocaleLowerCase())):T==null?void 0:T.includes(a)})):p},[a,p]),{sortedItems:f,columnsToSortBy:C,handleColumnSortClick:_}=Te(j,X,Io),{selectedItemsUuids:k,handleResetSelectedItems:H,handleSelectAllItems:Y,handleSelectItem:$,handleShowDeleteMultipleSelectedItemsConfirmation:q,DeleteSelectedItemsConfirmation:w}=ge({itemTypeNamePlural:"product types",items:f,searchFieldValue:a,deleteItemsByUuids:y,setItemToDelete:u}),{lastCreatedOrUpdatedItem:M,onCreateItem:K,onUpdateItem:G}=Ce({itemEntityType:Ge,items:f,searchFieldValue:a,resetSearchFieldValue:d});return o.jsxs(ye,{children:[c,o.jsx(le,{tableTitle:"product types",tableColumns:X,items:f,noItemsLabel:"no product types",isLoading:i,showCreateItemModalButtonLabel:"add product type",onShowCreateItemModal:b,columnsToSortBy:C,onColumnHeaderClick:_,selectedItemsUuids:k,onResetSelectedItems:H,onSelectAllItems:Y,onDeleteSelectedItems:q,searchFieldValue:a,children:o.jsx(de,{items:f,columns:X,selectedItemsUuids:k,onEditItem:S,onSelectItem:$,lastCreatedOrUpdatedItem:M})}),(h||!!P)&&o.jsx(bo,{itemToEdit:P,onHideModal:g,onShowDeleteItemConfirmation:x,onCreateItem:K,onUpdateItem:G}),!!m&&o.jsx(go,{onHideModal:A,onHideParentModal:g,itemToDelete:m}),o.jsx(w,{})]})});function Ao(t){const e=n.useMemo(()=>Ue(t),[t]),r=n.useMemo(function(){return De(Ot({productName:e}))},[e]);lt(r)}function Eo(){const{urlSearchParams:t,setUrlSearchParams:e}=ct();return Ao(t),o.jsx(dt,{children:o.jsxs("div",{className:ae.Container,children:[o.jsx("div",{className:ae.Products,children:o.jsx(So,{urlSearchParams:t,setUrlSearchParams:e})}),o.jsxs("div",{className:ae.Parameters,children:[o.jsx(xo,{urlSearchParams:t,setUrlSearchParams:e}),o.jsx(wt,{urlSearchParams:t,setUrlSearchParams:e})]})]})})}function qo(){return[{title:De(se)}]}const Ko=nt(function(){return o.jsx(Eo,{})});export{Ko as default,qo as meta};
