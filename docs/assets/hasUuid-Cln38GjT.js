import{a as r,p as l}from"./chunk-NL6KNZEE-BTkWJe7M.js";import{g as y,h as L,C as k,b as N,c as R,u as U,a as P,M as W,F as V}from"./shallow-CzWg_h1u.js";import{n as w,B as O,av as q,aw as G}from"./useLoadingPersistStorages-PEsUDW_D.js";import{L as D,M as z,O as H,D as $}from"./useTableSearch-BVAErW2N.js";const J=o=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...o},r.createElement("path",{d:"M3 18c0 .55.45 1 1 1h5v-2H4c-.55 0-1 .45-1 1zM3 6c0 .55.45 1 1 1h9V5H4c-.55 0-1 .45-1 1zm10 14v-1h7c.55 0 1-.45 1-1s-.45-1-1-1h-7v-1c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1zM7 10v1H4c-.55 0-1 .45-1 1s.45 1 1 1h3v1c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1zm14 2c0-.55-.45-1-1-1h-9v2h9c.55 0 1-.45 1-1zm-5-3c.55 0 1-.45 1-1V7h3c.55 0 1-.45 1-1s-.45-1-1-1h-3V4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .55.45 1 1 1z"})),Ee=r.memo(J);function Fe(o){const e=o.map(n=>n(i=>!!i.lastFilledAt)).reduce((n,i)=>n&&i,!0),t=!e;return r.useEffect(function(){e||o.forEach(i=>{const a=i.getState().isProcessing,s=i.getState().lastFilledAt;!a&&!s&&i.getState().prepareData()})},[e,o]),t}function K({elementRef:o,onHide:e,currentModalDialog:t}){r.useEffect(function(){if(typeof e!="function"||!t)return;function i(s){if(typeof e!="function")return;const c=o.current;c&&c.contains(s.target)||e()}const a=window.requestAnimationFrame(()=>{window.addEventListener("click",i)});return function(){window.removeEventListener("click",i),window.cancelAnimationFrame(a)}},[e,o,t])}function Q({elementRef:o,onHide:e,currentModalDialog:t}){r.useEffect(function(){if(typeof e!="function"||!t)return;function i(s){if(typeof e!="function")return;const c=o.current;c&&c.contains(s.target)||e()}const a=window.requestAnimationFrame(()=>{window.addEventListener("focusin",i)});return function(){window.removeEventListener("focusin",i),window.cancelAnimationFrame(a)}},[e,o,t])}const X="_DialogWrapper_d3n18_1",Y="_DialogContainer_d3n18_13",Z="_HeaderContainer_d3n18_26",ee="_NoPaddingForCloseButton_d3n18_34",te="_TitleContainer_d3n18_38",ne="_Title_d3n18_38",oe="_CenterText_d3n18_57",re="_SubTitle_d3n18_61",se="_CloseButtonContainer_d3n18_69",b={DialogWrapper:X,DialogContainer:Y,HeaderContainer:Z,NoPaddingForCloseButton:ee,TitleContainer:te,Title:ne,CenterText:oe,SubTitle:re,CloseButtonContainer:se},xe=r.memo(function({title:e,isTitleCentered:t,subTitle:n,noCloseButton:i,onHide:a,children:s}){const c=r.useRef(null),m=y(),I=r.useMemo(function(){return typeof a=="function"},[a]);K({elementRef:c,onHide:a,currentModalDialog:m}),Q({elementRef:c,onHide:a,currentModalDialog:m}),L({onClose:a,currentModalDialog:m});const C=r.useCallback(function(){typeof a=="function"&&a()},[a]),u=r.useId(),d=r.useId();return l.jsx("dialog",{ref:c,className:b.DialogWrapper,"aria-labelledby":u,...n?{"aria-describedby":d}:void 0,children:l.jsxs("div",{className:b.DialogContainer,children:[(!!e||!!n)&&l.jsx("div",{className:w([b.HeaderContainer,(i||!I)&&b.NoPaddingForCloseButton]),children:l.jsxs("div",{className:b.TitleContainer,children:[l.jsx("h2",{className:w([b.Title,t&&b.CenterText]),id:u,children:typeof e=="function"?e():e}),!!n&&l.jsx("div",{className:b.SubTitle,id:d,children:n})]})}),s,!i&&I&&l.jsx("div",{className:b.CloseButtonContainer,children:l.jsx(O,{size:"small",transparent:!0,noBorder:!0,noPadding:!0,onClick:C,title:"close",children:l.jsx(k,{})})})]})})});function be({itemTypeNamePlural:o="items",items:e=[],searchFieldValue:t,filterValue:n,deleteItemsByUuids:i,setItemToDelete:a}){const[s,c]=r.useState([]),m=r.useCallback(function(p,x){c(M=>x?Array.from(new Set(new Array().concat(M,p.uuid))):M.filter(T=>T!==p.uuid))},[c]),I=r.useCallback(()=>{c(f=>f.length?[]:f)},[]),C=r.useCallback(function(){if(s.length!==e.length){c(e.map(p=>p.uuid));return}I()},[s,e,I]),u=r.useCallback(function(){i(s),I()},[i,s,I]),d=r.useCallback(f=>{a(f)},[a]),[h,S]=r.useState(!1),_=r.useCallback(function(){if(s.length){if(s.length===1){const p=s[0],x=e.find(M=>M.uuid===p);if(!x)return;d(x);return}S(!0)}},[s,e,d]),E=r.useCallback(function(){S(!1)},[]);r.useEffect(function(){c(p=>{if(!p.length)return p;const x=[];return e.forEach(M=>{const T=p.find(A=>A===M.uuid);T&&x.push(T)}),x})},[e]);const g=r.useMemo(function(){if(s.length>1)return l.jsxs(l.Fragment,{children:["are sure you want to delete"," ",l.jsx("strong",{children:s.length})," ",o,"?"]})},[s.length,o]),F=r.useMemo(function(){return function(){return l.jsx(l.Fragment,{children:h&&l.jsx(N,{title:g,onHide:E,onConfirm:u,confirmButtonLabel:`delete multiple ${o}`})})}},[h,o,g,E,u]);return r.useEffect(function(){(t||!t||n||!n)&&I()},[t,n,I]),{selectedItemsUuids:s,handleSelectItem:m,handleSelectAllItems:C,handleResetSelectedItems:I,handleShowDeleteMultipleSelectedItemsConfirmation:_,DeleteSelectedItemsConfirmation:F}}const B=q(G({item:void 0},o=>({setItem:e=>{o(()=>({item:e}))}}))),ie=5*1e3;function Me({itemEntityType:o,items:e,searchFieldValue:t,filterValue:n,resetSearchFieldValue:i,resetFilterValue:a}){const s=B(g=>g.item),c=B(g=>g.setItem),m=r.useMemo(function(){return(s==null?void 0:s.entityType)===o?s:void 0},[s,o]),I=r.useCallback(function(F){c(F)},[c]),C=r.useCallback(function(F){c(F)},[c]),u=r.useCallback(function(){i&&i()},[i]),d=r.useCallback(function(){a&&a()},[a]),[h,S]=r.useState(void 0),[_,E]=r.useState(void 0);return r.useEffect(function(){return(!Object.is(t,h)||!Object.is(n,_))&&(c(void 0),Object.is(t,h)||S(t),Object.is(n,_)||E(n)),function(){m&&e.find(f=>f.uuid===m.uuid)&&c(void 0)}},[h,_,t,n,c,S,E,e,m]),r.useEffect(function(){if(!m)return;if(!e.find(p=>p.uuid===m.uuid)){n&&d(),t&&u();return}const f=window.setTimeout(function(){c(void 0)},ie);return function(){window.clearTimeout(f)}},[m,e,d,u,n,t,c]),{lastCreatedOrUpdatedItem:m,onCreateItem:I,onUpdateItem:C}}function j(o,e){return!o.find(n=>!e.includes(n.name))}function ae(o){const e=o.sort===H?-1:1,t=o.sortFn;if(typeof t=="function")return function(a,s){return t(a[o.name],s[o.name],a,s)*e};const n=o.name;return o.type==="number"?function(a,s){return((a[n]??0)-(s[n]??0))*e}:function(a,s){return(a[n]||"").localeCompare(s[n]||"")*e}}function ve(o,e,t){const n=r.useMemo(function(){const u=e.filter(d=>d.isSortable).filter(d=>D(d.sort));return u.length?j(u,t)?u:[u[0]]:[]},[t,e]),[i,a]=r.useState(n);r.useEffect(function(){a(n)},[n,a]);const s=r.useCallback(function(u,d){u.isSortable&&a(h=>{if(d===z)return h.filter(_=>_.name!==u.name);const S=h.filter(_=>_.name!==u.name).concat({...u,sort:d});return j(S,t)?S:[{...u,sort:d}]})},[a,t]),c=r.useMemo(function(){return i.filter(u=>u.isSortable).filter(u=>D(u.sort)).map(u=>ae(u))},[i]),m=r.useMemo(function(){return function(d,h){const S=c.find(_=>_(d,h)!==0);return S?S(d,h):0}},[c]);return{sortedItems:r.useMemo(function(){return Array().concat(o).sort(m)},[o,m]),columnsToSortBy:i,handleColumnSortClick:s}}function ce(o){const e={};return o.forEach(({name:t,filterPredicate:n})=>{typeof n=="function"&&(e[t]=n)}),e}function ue(o,e,t){let n=!0;for(const i in t)if(t[i]&&typeof e[i]=="function"&&(n=e[i](o,t),!n))return!1;return n}function Te(o=[],e=[],t){const n=r.useMemo(function(){return ce(e)},[e]),i=r.useCallback(function(c){return!t||!n?!0:ue(c,n,t)},[t,n]);return r.useMemo(function(){return o.filter(i)},[o,i])}function Oe(o){const{isVisible:e,show:t,hide:n}=R(!0);return r.useEffect(function(){t()},[o,t]),{isAppliedFilter:e,enableFilter:t,disableFilter:n}}const we=(o=[],e)=>r.useMemo(()=>e?o.map(n=>{const i=n.name,a=e[i];return a?{...n,defaultValue:a}:n}):o,[o,e]),le="_ModalEditFormBody_qlx7x_1",de="_Content_qlx7x_10",fe="_ErrorMessageContainer_qlx7x_18",me="_ErrorMessageText_qlx7x_28",Ce="_ActionButtons_qlx7x_36",he="_ActionButtonsGroup_qlx7x_43",pe="_TitleWithButton_qlx7x_58",v={ModalEditFormBody:le,Content:de,ErrorMessageContainer:fe,ErrorMessageText:me,ActionButtons:Ce,ActionButtonsGroup:he,TitleWithButton:pe},De=r.memo(function({humanizedItemTypeName:e,itemToEdit:t,formFields:n,showResetButton:i=!1,resetButtonLabel:a,onCancel:s,saveButtonLabel:c,validateFormData:m,onSubmit:I,onDelete:C,deleteItemButtonLabel:u="delete item"}){const d=!(t!=null&&t.uuid),h=`${d?"create":"save"} ${e||"item"}`,S=r.useRef(null);U(S,n);const{handleSubmit:_,formValidationErrorMessage:E}=P({formRef:S,onSubmit:I,formFields:n,validateFormData:m}),g=r.useCallback(()=>{s()},[s]),F=r.useCallback(()=>{typeof C=="function"&&t&&C(t)},[C,t]),f=r.useMemo(function(){const x=`${d?"create":"edit"} ${e||"item"}`,M=typeof C=="function"&&!!t;return l.jsxs("div",{className:v.TitleWithButton,children:[l.jsx("span",{children:x}),M&&l.jsx(O,{size:"small",noPadding:!0,transparent:!0,onClick:F,title:u,children:l.jsx($,{})})]})},[d,e,t,C,F,u]);return l.jsx(W,{title:f,onHide:g,children:l.jsxs("form",{ref:S,className:v.ModalEditFormBody,onSubmit:_,children:[l.jsxs("div",{className:v.Content,children:[l.jsx(V,{formFields:n,item:t}),E!==void 0&&l.jsx("div",{className:v.ErrorMessageContainer,role:"alert",children:l.jsx("span",{className:v.ErrorMessageText,children:typeof E=="function"?E():E})})]}),l.jsx("div",{className:v.ActionButtons,children:l.jsxs("div",{className:v.ActionButtonsGroup,children:[i&&l.jsx(O,{type:"reset",children:a||"reset form"}),l.jsx(O,{type:"submit",primary:!0,children:c||h})]})})]})})});function Be(o,e){const t={};return e.forEach(n=>{t[n]=o[n]}),t}function je(o){return!!o.uuid}export{xe as D,De as M,Ee as T,we as a,Oe as b,Te as c,ve as d,be as e,Me as f,Be as g,je as h,Fe as u};
