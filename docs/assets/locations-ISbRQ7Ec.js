import{a,p as e,s as at}from"./chunk-NL6KNZEE-Dk3Cym_s.js";import{k as st,l as it,u as pe,v as rt,w as G,T as he,n as Se,S as W,m as _,N as ae,i as je,f as $,g as lt,x as Oe,e as Me,y as Be,o as ct,p as dt}from"./SearchOffIcon-Xzz7yrk0.js";import{c as ke}from"./createPageTitleString-BzKRSWbw.js";import{M as ut}from"./Main-BwsE5XhZ.js";import{b as fe,d as Te,c as mt}from"./shallow-BZEgAiau.js";import{ab as A,ac as yt,L as pt,w as ht,o as P,ad as St,B as E,ae as K,q as I,y as Y,p as D,x as ft,af as Tt,ag as Lt,ah as gt,v as bt,ai as Ct,aj as Pt,ak as Ft}from"./useLoadingPersistStorages-CMR8mGh9.js";import{S as N}from"./StaticLink-D-brTwns.js";import{S as It,D as xt}from"./DialogFilterForm-C8qZ7BSm.js";import{c as At,b as le,p as v,f as q,d as se,L as Le,a as Ue,g as we,h as Q,i as jt,E as De,j as Mt,M as Et,P as Nt,k as ve,l as _t}from"./getUrlToMapPageWithParams-BuAw2_WJ.js";import{h as ge,g as J,M as be,u as X,d as Ce,e as Pe,f as Fe,a as Ot,b as Bt,c as kt,T as Ut}from"./Dialog-CndP7CMW.js";import{S as Ie}from"./SearchFormAndTableContainer-C1hwLMnm.js";import{g as ie,Q as re}from"./getUrlToMarketPageWithParams-UhovHM-o.js";import{a as He,L as Ve}from"./LocationOffIcon-wLc2ZJO4.js";import{P as wt,N as Ee}from"./PlanetOrbitIcon-BXgLCfzR.js";import{g as Dt}from"./getUrlToMovingEntitiesPageWithParams-0flbsKES.js";import"./middleware-46aBMWQM.js";import"./App.const-DNoFr9tQ.js";import"./index-Ds4Gyjyp.js";const Z=st();function Re(){const{isHydrating:o,isHydrated:t}=A.getState();if(o||!t)return;const n=yt();vt({locationTypesMap:n})}Z.setState({prepareData:Re});A.subscribe(function(){Re()});function vt({locationTypesMap:o}){const t=Z.getState();t.isProcessing||(t.setIsProcessing(!0),window.setTimeout(function(){const r=Rt({locationTypesMap:o});t.replaceAll(r),t.setIsProcessing(!1)},0))}function Ht(o,t=!1,n){const s=(o==null?void 0:o.name)??"(location type without name)",r=At([s]),i=t?it(s,"location type"):r;return{locationTypeNameWithId:r,locationTypeNameWithIdAsLabel:i}}function Vt({locationTypesMap:o,shouldAddSuffixLabel:t=!1}){const n=[];return pt(o).forEach(function(i){const l=i.uuid,{locationTypeNameWithId:c,locationTypeNameWithIdAsLabel:p}=Ht(i,t);n.push({uuid:l,name:c,label:p})}),n}function We(o){o.sort((t,n)=>t.name.localeCompare(n.name)),o.forEach(({items:t})=>We(t??[]))}function Ye({items:o=[],level:t=0,disableOptionsWithoutUuid:n=!0,selectOptions:s=new Array}){return o.forEach(r=>{const{label:i,items:l}=r,c=r.uuid,p=c??"";s.push({value:p,label:i,level:t,disabled:n?!c:!1}),l!=null&&l.length&&Ye({items:l,level:t+1,disableOptionsWithoutUuid:n,selectOptions:s})}),s}function Rt({locationTypesMap:o,disableOptionsWithoutUuid:t}){const n=Vt({locationTypesMap:o,shouldAddSuffixLabel:!1});return We(n),Ye({items:n,disableOptionsWithoutUuid:t})??[]}const ze="location-type",Ge=["uuid","name","image"],Wt=ht(Ge);function Yt({urlSearchParams:o,setUrlSearchParams:t}){return pe({urlSearchParams:o,setUrlSearchParams:t,getSearchValueFromUrlSearchParams:rt,searchValueKeyInUrlSearchParams:G,searchFieldNameInSearchForm:G,searchFieldPlaceholderTextInSearchForm:"Search by location type..."})}const zt=[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0},{name:"image",type:"file",accept:"image/*"}],Gt=a.memo(function({itemToEdit:t,onHideModal:n,onShowDeleteItemConfirmation:s,onCreateItem:r,onUpdateItem:i}){const c=P([A]),p=A(m=>m.create),h=A(m=>m.update),y=a.useCallback(m=>{const d=p(m);typeof r=="function"&&r(d)},[p,r]),u=a.useCallback(m=>{const d=h(m);d&&typeof i=="function"&&i(d)},[h,i]),S=a.useCallback(()=>{n()},[n]),C=a.useCallback(m=>{if(ge(m)){const d=J(m,Ge);d.name=d.name.toLocaleLowerCase(),u(d)}else{const d=J(m,Wt);d.entityType=ze,d.name=d.name.toLocaleLowerCase(),y(d)}S()},[y,u,S]),F=a.useCallback(m=>{if(c)return function(){return e.jsx("span",{children:"Loading..."})};const d=St(m);if(d)return function(){return e.jsxs(e.Fragment,{children:["Location type named"," ",e.jsx("strong",{children:d.name})," ","already exists"]})}},[c]);return e.jsx(be,{humanizedItemTypeName:"location type",itemToEdit:t,formFields:zt,validateFormData:F,onCancel:S,onSubmit:C,onDelete:s,deleteItemButtonLabel:"delete location type"})}),$t=a.memo(function({itemToDelete:t,onHideModal:n,onHideParentModal:s}){const i=P([A]),l=A(u=>u.delete),c=a.useCallback(function(){n()},[n]),p=a.useCallback(function(){s()},[s]),h=a.useCallback(function(){i||(l(t),c(),p())},[l,t,c,p,i]),y=a.useMemo(()=>e.jsxs(e.Fragment,{children:["Are you sure you want"," ",e.jsx("strong",{children:"to delete"}),e.jsx("br",{}),"the location type named"," ",e.jsx("strong",{children:t.name}),"?"]}),[t]);return e.jsx(fe,{title:y,onHide:c,onConfirm:h,confirmButtonLabel:"delete location type"})}),Kt=["name"],de=[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,sort:"asc",alignLabel:"left",actionButtons:function({item:t}){const n=le({locationTypeName:t==null?void 0:t.name});return e.jsx(e.Fragment,{children:n?e.jsx(N,{href:n,title:"search by location type in locations",children:e.jsx(It,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(W,{})})})}}],qt=a.memo(function({urlSearchParams:t,setUrlSearchParams:n}){const s=P([A]),r=X([Z]),i=s||r,[l,c]=a.useState(!1),[p,h]=a.useState(),[y,u]=a.useState(),S=A(Te(O=>O.items())),C=A(O=>O.deleteMultiple),F=a.useCallback(()=>{c(!0)},[c]),m=a.useCallback(()=>{h(void 0),c(!1)},[h,c]),d=a.useCallback(O=>{u(O)},[u]),T=a.useCallback(()=>{u(void 0)},[u]),{searchFieldValue:f,SearchForm:j,resetSearchFieldValue:w}=Yt({urlSearchParams:t,setUrlSearchParams:n}),L=a.useMemo(()=>f?S.filter(({name:O})=>O.includes(f)):S,[f,S]),{sortedItems:g,columnsToSortBy:M,handleColumnSortClick:b}=Ce(L,de,Kt),{selectedItemsUuids:x,handleResetSelectedItems:V,handleSelectAllItems:ee,handleSelectItem:te,handleShowDeleteMultipleSelectedItemsConfirmation:R,DeleteSelectedItemsConfirmation:H}=Pe({itemTypeNamePlural:"location types",items:g,searchFieldValue:f,deleteItemsByUuids:C,setItemToDelete:u}),{lastCreatedOrUpdatedItem:oe,onCreateItem:ne,onUpdateItem:z}=Fe({itemEntityType:ze,items:g,searchFieldValue:f,resetSearchFieldValue:w});return e.jsxs(Ie,{children:[j,e.jsx(he,{tableTitle:"location types",tableColumns:de,items:g,noItemsLabel:"no location types",isLoading:i,showCreateItemModalButtonLabel:"add location type",onShowCreateItemModal:F,columnsToSortBy:M,onColumnHeaderClick:b,selectedItemsUuids:x,onResetSelectedItems:V,onSelectAllItems:ee,onDeleteSelectedItems:R,searchFieldValue:f,children:e.jsx(Se,{items:g,columns:de,selectedItemsUuids:x,onEditItem:h,onSelectItem:te,lastCreatedOrUpdatedItem:oe})}),(l||!!p)&&e.jsx(Gt,{itemToEdit:p,onHideModal:m,onShowDeleteItemConfirmation:d,onCreateItem:ne,onUpdateItem:z}),!!y&&e.jsx($t,{onHideModal:T,onHideParentModal:m,itemToDelete:y}),e.jsx(H,{})]})}),me="Locations";function Qt({locationName:o,planetarySystemName:t}){const n=[o,!!t&&`in ${t}`].filter(s=>!!s);return n.length?`Search ${n.join(" ")} - ${me}`:`${me}`}const Jt="_Container_1ku51_1",Xt="_MainTable_1ku51_10",Zt="_TableGroups_1ku51_16",ue={Container:Jt,MainTable:Xt,TableGroups:Zt},eo="_SearchAndFilterFormContainer_a01fr_1",to={SearchAndFilterFormContainer:eo};function oo({name:o,label:t,value:n}){var i;const s=P([A]);if(!n)return;const r=s||!_(n)||(i=K(n))==null?void 0:i.name;return r?{label:t??(o==null?void 0:o.toString()),value:r}:{label:t??(o==null?void 0:o.toString()),value:"(location type without name)"}}function no({name:o,label:t,value:n}){var i;const s=P([I]);if(!n)return;const r=s||!_(n)||(i=Y(n))==null?void 0:i.name;return r?{label:t??(o==null?void 0:o.toString()),value:r}:{label:t??(o==null?void 0:o.toString()),value:"(planetary system without name)"}}function ao(){return[{name:"planetarySystemUuid",label:"planetary system",formatLabelAndValue:no},{name:"locationTypeUuid",label:"type",formatLabelAndValue:oo}]}const so=7,io="0";function ro({value:o}){const t=a.useMemo(function(){return v(o)},[o]),n=a.useMemo(function(){if(t)return q(t,!1,so,io)},[t]);return e.jsx(e.Fragment,{children:typeof n=="string"?n:e.jsx(ae,{children:"(no data)"})})}function lo({value:o}){var s;const n=P([A])||!_(o)||(s=K(o))==null?void 0:s.name;return n?e.jsx(e.Fragment,{children:n}):e.jsx(ae,{children:"(no type)"})}function co({value:o}){var s;const n=P([I])||!_(o)||(s=Y(o))==null?void 0:s.name;return n?e.jsx(e.Fragment,{children:n}):e.jsx(ae,{children:"(no data)"})}function uo({value:o,item:t}){const n=P([I,D]),s=t.uuid,r=n||!_(s)?void 0:ft(s),i=r?r.planetarySystemUuid:void 0,l=n||!_(i)?void 0:Y(i),p=a.useMemo(function(){return v(o)},[o])&&se({locationId:r==null?void 0:r.id,locationName:r==null?void 0:r.name,planetarySystemName:l==null?void 0:l.name});return e.jsx(e.Fragment,{children:p?e.jsx(N,{href:p,title:"show location on map",children:e.jsx(Le,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no position data",children:e.jsx(He,{})})})}const mo=o=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...o},a.createElement("path",{d:"M20.94 11A8.994 8.994 0 0 0 13 3.06V2c0-.55-.45-1-1-1s-1 .45-1 1v1.06A8.994 8.994 0 0 0 3.06 11H2c-.55 0-1 .45-1 1s.45 1 1 1h1.06A8.994 8.994 0 0 0 11 20.94V22c0 .55.45 1 1 1s1-.45 1-1v-1.06A8.994 8.994 0 0 0 20.94 13H22c.55 0 1-.45 1-1s-.45-1-1-1h-1.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})),xe=a.memo(mo);function yo({value:o}){var r;const n=P([A])||!_(o)||(r=K(o))==null?void 0:r.name,s=le({locationTypeName:n});return e.jsx(e.Fragment,{children:s?e.jsx(N,{href:s,title:"search locations by type",children:e.jsx(xe,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no location type data",children:e.jsx(Ve,{})})})}function po({value:o}){var l;const n=P([I])||!_(o)||(l=Y(o))==null?void 0:l.name,s=se({planetarySystemName:n}),r=le({planetarySystemName:n}),i=ie({planetarySystemName:n});return e.jsxs(e.Fragment,{children:[s?e.jsx(N,{href:s,title:"show planetary system on map",children:e.jsx(Le,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no planetary systems data",children:e.jsx(He,{})}),r?e.jsx(N,{href:r,title:"search locations in the planetary system",children:e.jsx(xe,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no planetary system data",children:e.jsx(Ve,{})}),i?e.jsx(N,{href:i,title:"search by planetary system name in market",children:e.jsx(re,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search in market",children:e.jsx(W,{})})]})}function ho(o,t){var i,l;const{isHydrating:n}=Tt();if(n)return 0;const s=_(o)&&((i=K(o))==null?void 0:i.name)||"",r=_(t)&&((l=K(t))==null?void 0:l.name)||"";return s.localeCompare(r)}function So(o,t){var i,l;const{isHydrating:n}=Lt();if(n)return 0;const s=_(o)&&((i=Y(o))==null?void 0:i.name)||"",r=_(t)&&((l=Y(t))==null?void 0:l.name)||"";return s.localeCompare(r)}function $e(){return[{name:"uuid",isCheckbox:!0},{name:"id",asLinkToEditItem:!0,isSortable:!0,alignLabel:"center",uppercase:!0,monospaced:!0,nowrap:!0,isSearchCaseInsensitive:!0,formatValue:function({value:t}){return e.jsx(e.Fragment,{children:typeof t=="string"?t:e.jsx(ae,{children:"(no id)"})})},actionButtons:function({value:t}){const n=ie({locationId:t});return e.jsx(e.Fragment,{children:n?e.jsx(N,{href:n,title:"search by location id in market",children:e.jsx(re,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search in market",children:e.jsx(W,{})})})}},{name:"name",asLinkToEditItem:!0,isSortable:!0,alignLabel:"left",actionButtons:function({value:t}){const n=ie({locationName:t});return e.jsx(e.Fragment,{children:n?e.jsx(N,{href:n,title:"search by location name in market",children:e.jsx(re,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search in market",children:e.jsx(W,{})})})}},{name:"locationTypeUuid",label:"type",isSortable:!0,alignLabel:"left",formatValue:lo,actionButtons:yo,sortFn:ho},{name:"position",isSortable:!0,alignLabel:"right",monospaced:!0,formatValue:ro,actionButtons:uo},{name:"planetarySystemUuid",label:"planetary system",isSortable:!0,sort:"asc",alignLabel:"right",formatValue:co,actionButtons:po,sortFn:So}]}const fo=a.memo(function({itemToDelete:t,onHideModal:n,onHideParentModal:s}){const r=P([D,I]),i=X([Ue]),l=r||i,c=D(S=>S.delete),p=a.useCallback(function(){n()},[n]),h=a.useCallback(function(){s()},[s]),y=a.useCallback(function(){l||(c(t),p(),h())},[t,p,h,c,l]),u=a.useMemo(function(){const C=we(t.uuid)||"(location without full name)";return e.jsxs(e.Fragment,{children:["Are you sure you want"," ",e.jsx("strong",{children:"to delete"})," ","the location named",e.jsx("br",{}),e.jsx("strong",{children:C}),"?"]})},[t]);return e.jsx(fe,{title:u,onHide:p,onConfirm:y,confirmButtonLabel:"delete location"})});function Ne(o=[],t=[]){return[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"id",uppercase:!0},{name:"name",required:!0},{name:"locationTypeUuid",label:"type",type:"select",options:t,chooseOptionLabel:"choose a location type",noOptionsLabel:"no location types available",allowToSelectNoValueOption:!0},{name:"planetarySystemUuid",label:"planetary system",type:"select",options:o,chooseOptionLabel:"choose a planetary system",noOptionsLabel:"no planetary systems available",allowToSelectNoValueOption:!0},{name:"position"}]}const To=a.memo(function({itemToEdit:t,filterValue:n,onHideModal:s,onShowDeleteItemConfirmation:r,onCreateItem:i,onUpdateItem:l}){const c=P([D,I]),p=X([Q,Ue]),h=c||p,y=D(L=>L.create),u=D(L=>L.update),S=a.useCallback(L=>{const g=y(L);typeof i=="function"&&i(g)},[y,i]),C=a.useCallback(L=>{const g=u(L);g&&typeof l=="function"&&l(g)},[u,l]),F=a.useCallback(()=>{s()},[s]),m=a.useCallback(L=>{var g,M;if(ge(L)){const b=J(L,Mt);b.id=(M=b.id)==null?void 0:M.toLocaleUpperCase();const x=v(b.position);x&&(b.position=q(x)),C(b)}else{const b=J(L,jt);b.entityType=De,b.id=(g=b.id)==null?void 0:g.toLocaleUpperCase();const x=v(b.position);x&&(b.position=q(x)),S(b)}F()},[S,C,F]),d=a.useCallback(function(g){if(h)return function(){return e.jsx("span",{children:"Loading..."})};const M=g.id;if(M){const b=gt(g);if(b){const x=we(b.uuid);return function(){return e.jsxs(e.Fragment,{children:["Location with Id:"," ",e.jsx("strong",{children:M})," ","(",x,")"," ","already exists"]})}}}if(g.position&&!v(g.position))return function(){return e.jsxs(e.Fragment,{children:["Position coordinates have incorrect data."," ",e.jsx("br",{}),"Example:"," ",e.jsx("strong",{children:"[ +100, -100, 0 ]"})," ","or"," ",e.jsx("strong",{children:"100,-100,0"})]})}},[h]),T=Q(L=>L.items),f=Z(L=>L.items),j=a.useMemo(function(){return h?Ne([],[]):Ne(T,f)},[T,f,h]),w=Ot(j,n);return e.jsx(be,{humanizedItemTypeName:"location",itemToEdit:t,formFields:w,validateFormData:d,onCancel:F,onSubmit:m,onDelete:r,deleteItemButtonLabel:"delete location"})}),ye=(o,t)=>[{name:"planetarySystemUuid",label:"planetary system",type:"select",options:o,chooseOptionLabel:"choose a planetary system",noOptionsLabel:"no planetary system available",allowToSelectNoValueOption:!0,filterPredicate:(n,s)=>n.planetarySystemUuid===s.planetarySystemUuid},{name:"locationTypeUuid",label:"type",type:"select",options:t,chooseOptionLabel:"choose a location type",noOptionsLabel:"no location type available",allowToSelectNoValueOption:!0,filterPredicate:(n,s)=>n.locationTypeUuid===s.locationTypeUuid}],Lo=a.memo(function({filterValue:t,onSetFilterValue:n,onHide:s}){const r=P([I]),i=X([Q]),l=r||i,c=Q(S=>S.items),p=Z(S=>S.items),h=a.useMemo(function(){return l?ye([],[]):ye(c,p)},[c,l,p]),y=a.useCallback(function(){s()},[s]),u=a.useCallback(function(C){n(C),y()},[y,n]);return e.jsx(e.Fragment,{children:e.jsx("div",{style:{position:"absolute",top:0,right:0},children:e.jsx(xt,{humanizedPluralItemTypeName:"locations",filterValue:t,formFields:h,onCancel:y,onFilter:u})})})}),go=[$,G];function _e(o){const t={planetarySystemName:o.get($)||void 0,locationTypeName:o.get(G)||void 0};return lt(t)}function bo({filterValue:o}){var l,c;if(!o)return;const{planetarySystemName:t,locationTypeName:n,...s}=o,r=t?(l=bt(t))==null?void 0:l.uuid:void 0,i=n?(c=Ct(n))==null?void 0:c.uuid:void 0;return{...s,planetarySystemUuid:r,locationTypeUuid:i}}function Co({urlSearchParams:o,setUrlSearchParams:t}){const n=P([I,A]),s=X([Q,Z]),r=n||s,i=a.useRef(void 0),l=a.useMemo(function(){const h=_e(o),y=bo({filterValue:h}),u=i.current;return je(u,y)?(i.current=y,y):u},[o,i,r]),c=a.useCallback(function(h){let y;if(typeof h=="function")throw new Error("LocationValue as setState(prev=>newState) function not supported");h&&Object.keys(h).length>0&&(y=h),t(u=>{var F,m;const S=_e(u);if(je(S,y)){if(!y)return go.forEach(w=>{u.delete(w)}),u;const d=y.planetarySystemUuid,T=d?(F=Y(d))==null?void 0:F.name:void 0;T?u.set($,T):u.delete($);const f=y.locationTypeUuid,j=f?(m=K(f))==null?void 0:m.name:void 0;j?u.set(G,j):u.delete(G)}return u})},[t]);return{filterValue:l,setFilterValueToUrlSearchParams:c}}function Po({urlSearchParams:o,setUrlSearchParams:t}){return pe({urlSearchParams:o,setUrlSearchParams:t,getSearchValueFromUrlSearchParams:Oe,searchValueKeyInUrlSearchParams:Me,searchFieldNameInSearchForm:Me,searchFieldPlaceholderTextInSearchForm:"Search by location name or location id..."})}const Fo=["name","planetarySystemUuid","locationTypeUuid","position"],Io=["id","name"],xo=$e().filter(o=>Io.includes(o.name)),Ao=a.memo(function({urlSearchParams:t,setUrlSearchParams:n}){const r=P([D,I,A]),{filterValue:i,setFilterValueToUrlSearchParams:l}=Co({urlSearchParams:t,setUrlSearchParams:n}),{searchFieldValue:c,SearchForm:p,resetSearchFieldValue:h}=Po({urlSearchParams:t,setUrlSearchParams:n}),y=D(Te(B=>B.items())),u=D(B=>B.deleteMultiple),[S,C]=a.useState(!1),[F,m]=a.useState(),[d,T]=a.useState(),f=a.useCallback(()=>{C(!0)},[C]),j=a.useCallback(()=>{m(void 0),C(!1)},[m,C]),w=a.useCallback(B=>{T(B)},[T]),L=a.useCallback(()=>{T(void 0)},[T]),g=a.useMemo(function(){return c?y.filter(nt=>!!xo.find(Ae=>{let U=nt[Ae.name];return Ae.isSearchCaseInsensitive?(U=U==null?void 0:U.toLocaleLowerCase(),U==null?void 0:U.includes(c.toLocaleLowerCase())):U==null?void 0:U.includes(c)})):y},[c,y]),M=a.useMemo(function(){return ye([],[])},[]),b=a.useMemo(function(){return ao()},[]),{isAppliedFilter:x,enableFilter:V,disableFilter:ee}=Bt(i),te=kt(g,M,x?i:void 0),R=a.useMemo(function(){return $e()},[]),{sortedItems:H,columnsToSortBy:oe,handleColumnSortClick:ne}=Ce(te,R,Fo),{selectedItemsUuids:z,handleResetSelectedItems:O,handleSelectAllItems:k,handleSelectItem:Ke,handleShowDeleteMultipleSelectedItemsConfirmation:qe,DeleteSelectedItemsConfirmation:Qe}=Pe({itemTypeNamePlural:"locations",items:H,searchFieldValue:c,filterValue:i,deleteItemsByUuids:u,setItemToDelete:T}),Je=a.useCallback(function(){l(void 0)},[l]),{lastCreatedOrUpdatedItem:Xe,onCreateItem:Ze,onUpdateItem:et}=Fe({itemEntityType:De,items:H,searchFieldValue:c,filterValue:i,resetSearchFieldValue:h,resetFilterValue:Je}),{isVisible:tt,show:ot,hide:ce}=mt(!1);return a.useEffect(function(){(i||!i)&&ce()},[i,ce]),e.jsxs(Ie,{children:[e.jsxs("div",{className:to.SearchAndFilterFormContainer,children:[p,e.jsxs(E,{onClick:ot,title:"show filter form",children:[e.jsx(Ut,{}),e.jsx("span",{children:"filter"})]}),tt&&e.jsx(Lo,{filterValue:i,onSetFilterValue:l,onHide:ce})]}),e.jsx(he,{tableTitle:"locations",tableColumns:R,items:H,noItemsLabel:"no locations",isLoading:r,showCreateItemModalButtonLabel:"add location",onShowCreateItemModal:f,columnsToSortBy:oe,onColumnHeaderClick:ne,selectedItemsUuids:z,onResetSelectedItems:O,onSelectAllItems:k,onDeleteSelectedItems:qe,searchFieldValue:c,filterValue:i,isAppliedFilter:x,onEnableFilter:V,onDisableFilter:ee,filterInfoFields:b,children:e.jsx(Se,{items:H,columns:R,selectedItemsUuids:z,onEditItem:m,onSelectItem:Ke,lastCreatedOrUpdatedItem:Xe})}),(S||!!F)&&e.jsx(To,{itemToEdit:F,filterValue:i,onHideModal:j,onShowDeleteItemConfirmation:w,onCreateItem:Ze,onUpdateItem:et}),!!d&&e.jsx(fo,{onHideModal:L,onHideParentModal:j,itemToDelete:d}),e.jsx(Qe,{})]})}),jo=o=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...o},a.createElement("path",{d:"M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81l-.26-1.33zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.3 2 22 2 22s.7-4.94 1.88-6.12A2.996 2.996 0 0 1 9 18zm4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"})),Mo=a.memo(jo),Eo=0,No="0";function _o({value:o}){const t=a.useMemo(function(){return v(o)},[o]),n=a.useMemo(function(){if(t)return q(t,!1,Eo,No)},[t]);return e.jsx(e.Fragment,{children:typeof n=="string"?n:e.jsx(ae,{children:"(no data)"})})}function Oo(){return[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,sort:"asc",alignLabel:"left",actionButtons:function({item:t}){const n=le({planetarySystemName:t==null?void 0:t.name}),s=Dt({planetarySystemName:t==null?void 0:t.name}),r=ie({planetarySystemName:t==null?void 0:t.name});return e.jsxs(e.Fragment,{children:[s?e.jsx(N,{href:s,title:"search moving objects in the planetary system",children:e.jsx(Mo,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(W,{})}),n?e.jsx(N,{href:n,title:"search locations in the planetary system",children:e.jsx(xe,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(W,{})}),r?e.jsx(N,{href:r,title:"search orders in market",children:e.jsx(re,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(W,{})})]})}},{name:"position",isSortable:!0,monospaced:!0,formatValue:_o,actionButtons:function({item:t}){const n=v(t.position),s=se({planetarySystemName:t==null?void 0:t.name}),r=n&&se({planetarySystemName:t==null?void 0:t.name,mapMode:Et});return e.jsxs(e.Fragment,{children:[s?e.jsx(N,{href:s,title:"show on map what the planetary system contains",children:e.jsx(wt,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(Ee,{})}),r?e.jsx(N,{href:r,title:"show planetary system on map",children:e.jsx(Le,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(Ee,{})})]})}}]}const Bo=a.memo(function({itemToDelete:t,onHideModal:n,onHideParentModal:s}){const i=P([I]),l=I(u=>u.delete),c=a.useCallback(function(){n()},[n]),p=a.useCallback(function(){s()},[s]),h=a.useCallback(function(){i||(l(t),c(),p())},[l,t,c,p,i]),y=a.useMemo(()=>e.jsxs(e.Fragment,{children:["Are you sure you want"," ",e.jsx("strong",{children:"to delete"}),e.jsx("br",{}),"the planetary system named"," ",e.jsx("strong",{children:t.name}),"?"]}),[t]);return e.jsx(fe,{title:y,onHide:c,onConfirm:h,confirmButtonLabel:"delete planetary system"})}),ko=[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0},{name:"position"}],Uo=a.memo(function({itemToEdit:t,onHideModal:n,onShowDeleteItemConfirmation:s,onCreateItem:r,onUpdateItem:i}){const c=P([I]),p=I(m=>m.create),h=I(m=>m.update),y=a.useCallback(m=>{const d=p(m);typeof r=="function"&&r(d)},[p,r]),u=a.useCallback(m=>{const d=h(m);d&&typeof i=="function"&&i(d)},[h,i]),S=a.useCallback(()=>{n()},[n]),C=a.useCallback(m=>{if(ge(m)){const d=J(m,_t);d.name=d.name.toLocaleLowerCase();const T=v(d.position);T&&(d.position=q(T)),u(d)}else{const d=J(m,Nt);d.entityType=ve,d.name=d.name.toLocaleLowerCase();const T=v(d.position);T&&(d.position=q(T)),y(d)}S()},[y,u,S]),F=a.useCallback(m=>{if(c)return function(){return e.jsx("span",{children:"Loading..."})};const d=Pt(m);if(d)return function(){return e.jsxs(e.Fragment,{children:["Planetary system"," ",e.jsx("strong",{children:d.name})," ","already exists"]})};if(!m.position)return;const f=Ft(m);if(f)return function(){return e.jsxs(e.Fragment,{children:["Planetary system with position"," ",e.jsx("strong",{children:f.position})," ","(named"," ",e.jsx("strong",{children:f.name})," ",") already exists"]})}},[c]);return e.jsx(be,{humanizedItemTypeName:"planetary system",itemToEdit:t,formFields:ko,validateFormData:F,onCancel:S,onSubmit:C,onDelete:s,deleteItemButtonLabel:"delete planetary system"})});function wo({urlSearchParams:o,setUrlSearchParams:t}){return pe({urlSearchParams:o,setUrlSearchParams:t,getSearchValueFromUrlSearchParams:Be,searchValueKeyInUrlSearchParams:$,searchFieldNameInSearchForm:$,searchFieldPlaceholderTextInSearchForm:"Search by planetary system name..."})}const Do=["name","position"],vo=a.memo(function({urlSearchParams:t,setUrlSearchParams:n}){const s=P([I]),r=X([Q]),i=s||r,[l,c]=a.useState(!1),[p,h]=a.useState(),[y,u]=a.useState(),S=I(Te(k=>k.items())),C=I(k=>k.deleteMultiple),F=a.useCallback(()=>{c(!0)},[c]),m=a.useCallback(()=>{h(void 0),c(!1)},[h,c]),d=a.useCallback(k=>{u(k)},[u]),T=a.useCallback(()=>{u(void 0)},[u]),{searchFieldValue:f,SearchForm:j,resetSearchFieldValue:w}=wo({urlSearchParams:t,setUrlSearchParams:n}),L=a.useMemo(()=>f?S.filter(({name:k})=>k.includes(f)):S,[f,S]),g=a.useMemo(function(){return Oo()},[]),{sortedItems:M,columnsToSortBy:b,handleColumnSortClick:x}=Ce(L,g,Do),{selectedItemsUuids:V,handleResetSelectedItems:ee,handleSelectAllItems:te,handleSelectItem:R,handleShowDeleteMultipleSelectedItemsConfirmation:H,DeleteSelectedItemsConfirmation:oe}=Pe({itemTypeNamePlural:"planetary systems",items:M,searchFieldValue:f,deleteItemsByUuids:C,setItemToDelete:u}),{lastCreatedOrUpdatedItem:ne,onCreateItem:z,onUpdateItem:O}=Fe({itemEntityType:ve,items:M,searchFieldValue:f,resetSearchFieldValue:w});return e.jsxs(Ie,{children:[j,e.jsx(he,{tableTitle:"planetary systems",tableColumns:g,items:M,noItemsLabel:"no planetary systems",isLoading:i,showCreateItemModalButtonLabel:"add planetary system",onShowCreateItemModal:F,columnsToSortBy:b,onColumnHeaderClick:x,selectedItemsUuids:V,onResetSelectedItems:ee,onSelectAllItems:te,onDeleteSelectedItems:H,searchFieldValue:f,children:e.jsx(Se,{items:M,columns:g,selectedItemsUuids:V,onEditItem:h,onSelectItem:R,lastCreatedOrUpdatedItem:ne})}),(l||!!p)&&e.jsx(Uo,{itemToEdit:p,onHideModal:m,onShowDeleteItemConfirmation:d,onCreateItem:z,onUpdateItem:O}),!!y&&e.jsx(Bo,{onHideModal:T,onHideParentModal:m,itemToDelete:y}),e.jsx(oe,{})]})});function Ho(o){const t=a.useMemo(()=>Be(o),[o]),n=a.useMemo(()=>Oe(o),[o]),s=a.useMemo(function(){return ke(Qt({locationName:n,planetarySystemName:t}))},[n,t]);dt(s)}function Vo(){const{urlSearchParams:o,setUrlSearchParams:t}=ct();return Ho(o),e.jsx(ut,{children:e.jsxs("div",{className:ue.Container,children:[e.jsxs("div",{className:ue.TableGroups,children:[e.jsx(vo,{urlSearchParams:o,setUrlSearchParams:t}),e.jsx(qt,{urlSearchParams:o,setUrlSearchParams:t})]}),e.jsx("div",{className:ue.MainTable,children:e.jsx(Ao,{urlSearchParams:o,setUrlSearchParams:t})})]})})}function ln(){return[{title:ke(me)}]}const cn=at(function(){return e.jsx(Vo,{})});export{cn as default,ln as meta};
