import{a,q as r,z as tt}from"./chunk-PVWAREVJ-D1PIyzeh.js";import{m as se,I as rt,J as H,b as ie,S as ce,T as le,c as ue,q as xe,r as Ee,u as de,i as D,N as je,d as Fe,K as W,l as ot,n as Me,o as Ie,a as at,L as nt,p as st}from"./useTableSearch-Ui5oQRZ2.js";import{c as it}from"./createPageTitleWithAppName-C6bNgB-9.js";import{M as ct}from"./Main-D4jU2hau.js";import{N as me,w as R,at as F,au as lt,av as ut,v as pe,I as w,B as te,aw as dt,a3 as De,ax as I,ay as mt,az as Q,aA as X,aB as pt,aC as ht,L as M,aD as yt,aE as ft,aF as Pt,c as Tt,aG as St}from"./useLoadingPersistStorages-BWX3nPU9.js";import{I as he}from"./InternalStaticLink-rDmjTW4d.js";import{S as ye}from"./SearchFormAndTableContainer-Dn0g8KWe.js";import{h as fe,g as Y,M as Pe,b as Te,c as Se,u as gt,a as bt}from"./hasUuid-BkktISKI.js";import{g as Ue}from"./getUrlToProductsPageWithParams-CN44cusc.js";import{a as ge}from"./ModalConfirmation-BkKL8gix.js";import{D as Ct}from"./DialogFilterForm-CQxhjX2d.js";import{g as Ft}from"./getUrlToMarketPageWithParams-DdYQKoX-.js";import"./ClassNames-CdIKlwZs.js";import"./App.const-Bym5gJCd.js";import"./index-D9Tyn9c9.js";const Ne="product-rarity",_e=["uuid","entityType","name","value"],It=me(_e),Rt=a.memo(function({itemToDelete:e,onHideModal:o,onHideParentModal:n}){const s=R([F]),m=F(i=>i.delete),l=a.useCallback(function(){o()},[o]),p=a.useCallback(function(){n()},[n]),y=a.useCallback(function(){s||(m(e),l(),p())},[m,e,l,p,s]),h=a.useMemo(function(){return r.jsxs(r.Fragment,{children:["Are you sure you want"," ",r.jsx("strong",{children:"to delete"}),r.jsx("br",{}),"the product rarity named"," ",r.jsx("strong",{children:e.name}),"?"]})},[e]);return r.jsx(ge,{title:h,onHide:l,onConfirm:y,confirmButtonLabel:"delete product rarity"})}),At=[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0},{name:"value",type:"number",required:!0}],Lt=({itemToEdit:t,onHideModal:e,onShowDeleteItemConfirmation:o,onCreateItem:n,onUpdateItem:c})=>{const m=R([F]),l=F(d=>d.create),p=F(d=>d.update),y=a.useCallback(d=>{const u=l(d);typeof n=="function"&&n(u)},[l,n]),h=a.useCallback(d=>{const u=p(d);u&&typeof c=="function"&&c(u)},[p,c]),i=a.useCallback(()=>{e()},[e]),P=a.useCallback(d=>{if(fe(d)){const u=Y(d,_e);h(u)}else{const u=Y(d,It);u.entityType=Ne,y(u)}i()},[y,h,i]),T=a.useCallback(d=>{if(m)return function(){return r.jsx("span",{children:"Loading..."})};const u=lt(d);if(u)return function(){return r.jsxs(r.Fragment,{children:["Product rarity named"," ",r.jsx("strong",{children:u.name})," ","already exists"]})};const b=ut(d);if(b)return function(){return r.jsxs(r.Fragment,{children:["Product rarity with value"," ",r.jsx("strong",{children:b.value})," ","(named"," ",r.jsx("strong",{children:b.name})," ",") already exists"]})}},[m]);return r.jsx(Pe,{humanizedItemTypeName:"product rarity",itemToEdit:t,formFields:At,validateFormData:T,onCancel:i,onSubmit:P,onDelete:o,deleteItemButtonLabel:"delete product rarity"})};function xt({urlSearchParams:t,setUrlSearchParams:e}){return se({urlSearchParams:t,setUrlSearchParams:e,getSearchValueFromUrlSearchParams:rt,searchValueKeyInUrlSearchParams:H,searchFieldNameInSearchForm:H,searchFieldPlaceholderTextInSearchForm:"Search by product rarity name..."})}const Et=["name","value"],Z=[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,alignLabel:"left",actionButtons:({item:t})=>{const e=Ue({productRarityName:t?.name});return r.jsx(r.Fragment,{children:e?r.jsx(he,{to:e,title:"search by product rarity in products",children:r.jsx(w,{name:"search_category"})}):r.jsx(te,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:r.jsx(w,{name:"search_off"})})})}},{name:"value",type:"number",isSortable:!0,sort:"asc"}],jt=["name"],Mt=Z.filter(t=>jt.includes(t.name)),Dt=a.memo(function({urlSearchParams:e,setUrlSearchParams:o}){const c=R([F]),{searchFieldValue:s,SearchForm:m,resetSearchFieldValue:l}=xt({urlSearchParams:e,setUrlSearchParams:o}),p=F(pe(C=>C.items())),y=F(C=>C.deleteMultiple),[h,i]=a.useState(!1),[P,T]=a.useState(),[d,u]=a.useState(),b=a.useCallback(()=>{i(!0)},[i]),S=a.useCallback(()=>{T(void 0),i(!1)},[T,i]),x=a.useCallback(C=>{u(C)},[u]),E=a.useCallback(()=>{u(void 0)},[u]),U=a.useMemo(function(){return s?p.filter(J=>!!Mt.find(k=>{let A=J[k.name];return k.isSearchCaseInsensitive?(A=A?.toLocaleLowerCase(),A?.includes(s.toLocaleLowerCase())):A?.includes(s)})):p},[s,p]),{sortedItems:f,columnsToSortBy:g,handleColumnSortClick:N}=ie(U,Z,Et),{selectedItemsUuids:_,handleResetSelectedItems:v,handleSelectAllItems:$,handleSelectItem:q,handleShowDeleteMultipleSelectedItemsConfirmation:K,DeleteSelectedItemsConfirmation:V}=Te({itemTypeNamePlural:"product rarities",items:f,searchFieldValue:s,deleteItemsByUuids:y,setItemToDelete:u}),{lastCreatedOrUpdatedItem:j,onCreateItem:z,onUpdateItem:G}=Se({itemEntityType:Ne,items:f,searchFieldValue:s,resetSearchFieldValue:l});return r.jsxs(ye,{children:[r.jsx(ce,{children:m}),r.jsx(le,{tableTitle:"product rarities",tableColumns:Z,items:f,noItemsLabel:"no product rarities",isLoading:c,showCreateItemModalButtonLabel:"add product rarity",onShowCreateItemModal:b,columnsToSortBy:g,onColumnHeaderClick:N,selectedItemsUuids:_,onResetSelectedItems:v,onSelectAllItems:$,onDeleteSelectedItems:K,searchFieldValue:s,children:r.jsx(ue,{items:f,columns:Z,selectedItemsUuids:_,onEditItem:T,onSelectItem:q,lastCreatedOrUpdatedItem:j})}),(h||!!P)&&r.jsx(Lt,{itemToEdit:P,onHideModal:S,onShowDeleteItemConfirmation:x,onCreateItem:z,onUpdateItem:G}),!!d&&r.jsx(Rt,{onHideModal:E,onHideParentModal:S,itemToDelete:d}),r.jsx(V,{})]})}),Re="Products";function Ut({productName:t}){const e=[t].filter(o=>!!o);return e.length?`Search ${e.join(" ")} - ${Re}`:`${Re}`}const Nt="_Container_1ftyi_1",_t="_Products_1ftyi_10",Vt="_Parameters_1ftyi_16",ae={Container:Nt,Products:_t,Parameters:Vt},Ve="product",ke=["uuid","entityType","name","productTypeUuid","productRarityUuid","image"],kt=me(ke),O=xe();function we(){const{isHydrating:t,isHydrated:e}=F.getState();if(t||!e)return;const o=dt();wt({productRaritiesMap:o})}O.setState({prepareData:we});F.subscribe(function(){we()});function wt({productRaritiesMap:t}){const e=O.getState();e.isProcessing||(e.setIsProcessing(!0),window.setTimeout(function(){const c=vt({productRaritiesMap:t});e.replaceAll(c),e.setIsProcessing(!1)},0))}function Ot(t,e=!1){const o=t?.name??"(product rarity without name)",n=e?Ee(o,"product rarity"):o;return{name:o,nameAsLabel:n}}function Bt({productRaritiesMap:t,shouldAddSuffixLabel:e=!1}){const o=[];return De(t).forEach(function(s){const m=s.uuid,{name:l,nameAsLabel:p}=Ot(s,e);o.push({uuid:m,name:l,label:p})}),o}function Oe(t){t.sort((e,o)=>e.name.localeCompare(o.name)),t.forEach(({items:e})=>Oe(e??[]))}function Be({items:t=[],level:e=0,disableOptionsWithoutUuid:o=!0,selectOptions:n=new Array}){return t.forEach(c=>{const{label:s,items:m}=c,l=c.uuid,p=l??"";n.push({value:p,label:s,level:e,disabled:o?!l:!1}),m?.length&&Be({items:m,level:e+1,disableOptionsWithoutUuid:o,selectOptions:n})}),n}function vt({productRaritiesMap:t,disableOptionsWithoutUuid:e}){const o=Bt({productRaritiesMap:t,shouldAddSuffixLabel:!1});return Oe(o),Be({items:o,disableOptionsWithoutUuid:e})??[]}const B=xe();function ve(){const{isHydrating:t,isHydrated:e}=I.getState();if(t||!e)return;const o=mt();Ht({productTypesMap:o})}B.setState({prepareData:ve});I.subscribe(function(){ve()});function Ht({productTypesMap:t}){const e=B.getState();e.isProcessing||(e.setIsProcessing(!0),window.setTimeout(function(){const c=$t({productTypesMap:t});e.replaceAll(c),e.setIsProcessing(!1)},0))}function Wt(t,e=!1){const o=t?.name??"(product type without name)",n=e?Ee(o,"product type"):o;return{name:o,nameAsLabel:n}}function Yt({productTypesMap:t,shouldAddSuffixLabel:e=!1}){const o=[];return De(t).forEach(function(s){const m=s.uuid,{name:l,nameAsLabel:p}=Wt(s,e);o.push({uuid:m,name:l,label:p})}),o}function He(t){t.sort((e,o)=>e.name.localeCompare(o.name)),t.forEach(({items:e})=>He(e??[]))}function We({items:t=[],level:e=0,disableOptionsWithoutUuid:o=!0,selectOptions:n=new Array}){return t.forEach(c=>{const{label:s,items:m}=c,l=c.uuid,p=l??"";n.push({value:p,label:s,level:e,disabled:o?!l:!1}),m?.length&&We({items:m,level:e+1,disableOptionsWithoutUuid:o,selectOptions:n})}),n}function $t({productTypesMap:t,disableOptionsWithoutUuid:e}){const o=Yt({productTypesMap:t,shouldAddSuffixLabel:!1});return He(o),We({items:o,disableOptionsWithoutUuid:e})??[]}const ne=(t,e)=>[{name:"productTypeUuid",label:"type",type:"select",options:t,chooseOptionLabel:"choose a product type",noOptionsLabel:"no product type available",allowToSelectNoValueOption:!0,filterPredicate:(o,n)=>o.productTypeUuid===n.productTypeUuid},{name:"productRarityUuid",label:"rarity",type:"select",options:e,chooseOptionLabel:"choose a product rarity",noOptionsLabel:"no product rarity available",allowToSelectNoValueOption:!0,filterPredicate:(o,n)=>o.productRarityUuid===n.productRarityUuid}],qt=a.memo(function({filterValue:e,onSetFilterValue:o,onHide:n}){const c=R([I,F]),s=de([B,O]),m=c||s,l=B(P=>P.items),p=O(P=>P.items),y=a.useMemo(function(){return m?ne([],[]):ne(l,p)},[l,p,m]),h=a.useCallback(function(){n()},[n]),i=a.useCallback(function(T){Object.keys(T).length?o(T):o(void 0),h()},[h,o]);return r.jsx(r.Fragment,{children:r.jsx("div",{style:{position:"absolute",top:0,right:0},children:r.jsx(Ct,{humanizedPluralItemTypeName:"products",filterValue:e,formFields:y,onCancel:h,onFilter:i})})})}),Kt="_Container_1vczl_1",zt={Container:Kt};function Gt({name:t,label:e,value:o}){const n=R([F]);if(!o)return;const c=n||!D(o)?void 0:Q(o)?.name;return c?{label:e??t?.toString(),value:c}:{label:e??t?.toString(),value:"(product rarity without name)"}}function Jt({name:t,label:e,value:o}){const n=R([I]);if(!o)return;const c=n||!D(o)?void 0:X(o)?.name;return c?{label:e??t?.toString(),value:c}:{label:e??t?.toString(),value:"(product type without name)"}}function Qt(){return[{name:"productTypeUuid",label:"type",formatLabelAndValue:Jt},{name:"productRarityUuid",label:"rarity",formatLabelAndValue:Gt}]}function Xt({value:t}){const n=R([F])||!D(t)?void 0:Q(t)?.name;return r.jsx(r.Fragment,{children:n||r.jsx(je,{children:"(no data)"})})}function Zt({value:t}){const n=R([I])||!D(t)?void 0:X(t)?.name;return r.jsx(r.Fragment,{children:n||r.jsx(je,{children:"(no data)"})})}function er({value:t}){const e=Ft({productName:typeof t=="string"&&t?t:void 0});return r.jsx(r.Fragment,{children:e?r.jsx(he,{to:e,title:"search by product name in market",children:r.jsx(w,{name:"query_stats"})}):r.jsx(te,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:r.jsx(w,{name:"search_off"})})})}function tr(t,e){if(pt())return 0;const n=D(t)&&Q(t)?.name||"",c=D(e)&&Q(e)?.name||"";return n.localeCompare(c)}function rr(t,e){if(ht())return 0;const n=D(t)&&X(t)?.name||"",c=D(e)&&X(e)?.name||"";return n.localeCompare(c)}function Ye(){return[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,alignLabel:"left",actionButtons:er},{name:"productTypeUuid",label:"type",isSortable:!0,formatValue:Zt,sortFn:rr},{name:"productRarityUuid",label:"rarity",isSortable:!0,sort:"asc",formatValue:Xt,sortFn:tr}]}const or=a.memo(function({itemToDelete:e,onHideModal:o,onHideParentModal:n}){const s=R([M]),m=M(i=>i.delete),l=a.useCallback(function(){o()},[o]),p=a.useCallback(function(){n()},[n]),y=a.useCallback(function(){s||(m(e),l(),p())},[e,l,p,m,s]),h=a.useMemo(function(){return r.jsxs(r.Fragment,{children:["Are you sure you want"," ",r.jsx("strong",{children:"to delete"}),r.jsx("br",{}),"the product named"," ",r.jsx("strong",{children:e.name}),"?"]})},[e]);return r.jsx(ge,{title:h,onHide:l,onConfirm:y,confirmButtonLabel:"delete product"})});function Ae(t=[],e=[]){return[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",label:"name",required:!0},{name:"productTypeUuid",label:"type",type:"select",required:!0,options:e,chooseOptionLabel:"choose a type",noOptionsLabel:"no types available",allowToSelectNoValueOption:!0},{name:"productRarityUuid",label:"rarity",type:"select",required:!0,options:t,chooseOptionLabel:"choose a rarity",noOptionsLabel:"no rarities available",allowToSelectNoValueOption:!0},{name:"image",type:"file",accept:"image/*"}]}const ar=a.memo(function({itemToEdit:e,filterValue:o,onHideModal:n,onShowDeleteItemConfirmation:c,onCreateItem:s,onUpdateItem:m}){const l=R([M,I,F]),p=de([B,O]),y=l||p,h=M(f=>f.create),i=M(f=>f.update),P=a.useCallback(f=>{const g=h(f);typeof s=="function"&&s(g)},[h,s]),T=a.useCallback(f=>{const g=i(f);g&&typeof m=="function"&&m(g)},[i,m]),d=a.useCallback(()=>{n()},[n]),u=a.useCallback(async f=>{if(fe(f)){const g=Y(f,ke);T(g)}else{const g=Y(f,kt);g.entityType=Ve,P(g)}d()},[P,T,d]),b=a.useCallback(f=>{if(y)return function(){return r.jsx("span",{children:"Loading..."})};const g=yt(f);if(g)return function(){return r.jsxs(r.Fragment,{children:["Product named"," ",r.jsx("strong",{children:g.name})," ","already exists"]})}},[y]),S=B(f=>f.items),x=O(f=>f.items),E=a.useMemo(function(){return y?Ae([],[]):Ae(x,S)},[x,S,y]),U=gt(E,o);return r.jsx(Pe,{humanizedItemTypeName:"product",itemToEdit:e,formFields:U,validateFormData:b,onCancel:d,onSubmit:u,onDelete:c,deleteItemButtonLabel:"delete product"})}),nr=[W,H];function Le(t){const e={typeName:t.get(W)||void 0,rarityName:t.get(H)||void 0};return ot(e)}function sr({filterValue:t}){if(!t)return;const{typeName:e,rarityName:o,...n}=t,c=e?ft(e)?.uuid:void 0,s=o?Pt(o)?.uuid:void 0;return{...n,productTypeUuid:c,productRarityUuid:s}}function ir({urlSearchParams:t,setUrlSearchParams:e}){const o=R([I,F]),n=de([B,O]),c=o||n,s=a.useRef(void 0),m=a.useMemo(function(){const y=Le(t),h=sr({filterValue:y}),i=s.current;return Fe(i,h)?(s.current=h,h):i},[t,s,c]),l=a.useCallback(function(y){let h;if(typeof y=="function")throw new Error("ProductFilterValue as setState(prev=>newState) function not supported");y&&Object.keys(y).length>0&&(h=y),e(i=>{const P=Le(i);if(Fe(P,h)){if(!h)return nr.forEach(x=>{i.delete(x)}),i;const d=h.productTypeUuid,u=d?X(d)?.name:void 0,b=h.productRarityUuid,S=b?Q(b)?.name:void 0;u?i.set(W,u):i.delete(W),S?i.set(H,S):i.delete(H)}return i})},[e]);return{filterValue:m,setFilterValueToUrlSearchParams:l}}function cr({urlSearchParams:t,setUrlSearchParams:e}){return se({urlSearchParams:t,setUrlSearchParams:e,getSearchValueFromUrlSearchParams:Me,searchValueKeyInUrlSearchParams:Ie,searchFieldNameInSearchForm:Ie,searchFieldPlaceholderTextInSearchForm:"Search by product name..."})}const lr=["name","productTypeUuid","productRarityUuid"],ur=["name"],dr=Ye().filter(t=>ur.includes(t.name)),mr=a.memo(function({urlSearchParams:e,setUrlSearchParams:o}){const c=R([M,I,F]),{filterValue:s,setFilterValueToUrlSearchParams:m}=ir({urlSearchParams:e,setUrlSearchParams:o}),{searchFieldValue:l,SearchForm:p,resetSearchFieldValue:y}=cr({urlSearchParams:e,setUrlSearchParams:o}),h=M(pe(L=>L.items())),i=M(L=>L.deleteMultiple),[P,T]=a.useState(!1),[d,u]=a.useState(),[b,S]=a.useState(),x=a.useCallback(()=>{T(!0)},[T]),E=a.useCallback(()=>{u(void 0),T(!1)},[u,T]),U=a.useCallback(L=>{S(L)},[S]),f=a.useCallback(()=>{S(void 0)},[S]),g=a.useMemo(function(){return l?h.filter(et=>!!dr.find(be=>{const Ce=et[be.name];return be.isSearchCaseInsensitive?Ce?.toLocaleLowerCase()?.includes(l.toLocaleLowerCase()):Ce?.includes(l)})):h},[l,h]),N=a.useMemo(function(){return ne([],[])},[c]),_=a.useMemo(function(){return Qt()},[c]),{isAppliedFilter:v,enableFilter:$,disableFilter:q}=bt(s),K=at(g,N,v?s:void 0),V=a.useMemo(function(){return Ye()},[c]),{sortedItems:j,columnsToSortBy:z,handleColumnSortClick:G}=ie(K,V,lr),{selectedItemsUuids:C,handleResetSelectedItems:J,handleSelectAllItems:re,handleSelectItem:k,handleShowDeleteMultipleSelectedItemsConfirmation:A,DeleteSelectedItemsConfirmation:Ke}=Te({itemTypeNamePlural:"products",items:j,searchFieldValue:l,filterValue:s,deleteItemsByUuids:i,setItemToDelete:S}),ze=a.useCallback(function(){m(void 0)},[m]),{lastCreatedOrUpdatedItem:Ge,onCreateItem:Je,onUpdateItem:Qe}=Se({itemEntityType:Ve,items:j,searchFieldValue:l,filterValue:s,resetSearchFieldValue:y,resetFilterValue:ze}),{isVisible:Xe,show:Ze,hide:oe}=Tt(!1);return a.useEffect(function(){(s||!s)&&oe()},[s,oe]),r.jsxs(ye,{children:[r.jsxs(ce,{children:[p,r.jsxs(te,{onClick:Ze,title:"show filter form",children:[r.jsx(w,{name:"tune"}),r.jsx("span",{children:"filter"})]}),Xe&&r.jsx(qt,{filterValue:s,onSetFilterValue:m,onHide:oe})]}),r.jsx("div",{className:zt.Container,children:r.jsx(le,{tableTitle:"products",tableColumns:V,items:j,noItemsLabel:"no products",isLoading:c,showCreateItemModalButtonLabel:"add product",onShowCreateItemModal:x,columnsToSortBy:z,onColumnHeaderClick:G,selectedItemsUuids:C,onResetSelectedItems:J,onSelectAllItems:re,onDeleteSelectedItems:A,searchFieldValue:l,filterValue:s,isAppliedFilter:v,onEnableFilter:$,onDisableFilter:q,filterInfoFields:_,children:r.jsx(ue,{items:j,columns:V,selectedItemsUuids:C,onEditItem:u,onSelectItem:k,lastCreatedOrUpdatedItem:Ge})})}),(P||!!d)&&r.jsx(ar,{itemToEdit:d,filterValue:s,onHideModal:E,onShowDeleteItemConfirmation:U,onCreateItem:Je,onUpdateItem:Qe}),!!b&&r.jsx(or,{onHideModal:f,onHideParentModal:E,itemToDelete:b}),r.jsx(Ke,{})]})}),$e="product-type",qe=["uuid","entityType","name"],pr=me(qe),hr=a.memo(function({itemToDelete:e,onHideModal:o,onHideParentModal:n}){const s=R([I]),m=I(i=>i.delete),l=a.useCallback(function(){o()},[o]),p=a.useCallback(function(){n()},[n]),y=a.useCallback(function(){s||(m(e),l(),p())},[e,l,p,m,s]),h=a.useMemo(function(){return r.jsxs(r.Fragment,{children:["Are you sure you want"," ",r.jsx("strong",{children:"to delete"}),r.jsx("br",{}),"the product type named"," ",r.jsx("strong",{children:e.name}),"?"]})},[e]);return r.jsx(ge,{title:h,onHide:l,onConfirm:y,confirmButtonLabel:"delete product type"})}),yr=[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0}],fr=({itemToEdit:t,onHideModal:e,onShowDeleteItemConfirmation:o,onCreateItem:n,onUpdateItem:c})=>{const m=R([I]),l=I(d=>d.create),p=I(d=>d.update),y=a.useCallback(d=>{const u=l(d);typeof n=="function"&&n(u)},[l,n]),h=a.useCallback(d=>{const u=p(d);u&&typeof c=="function"&&c(u)},[p,c]),i=a.useCallback(()=>{e()},[e]),P=a.useCallback(d=>{if(fe(d)){const u=Y(d,qe);h(u)}else{const u=Y(d,pr);u.entityType=$e,y(u)}i()},[y,h,i]),T=a.useCallback(d=>{if(m)return function(){return r.jsx("span",{children:"Loading..."})};const u=St(d);if(u)return function(){return r.jsxs(r.Fragment,{children:["Product type named"," ",r.jsx("strong",{children:u.name})," ","already exists"]})}},[m]);return r.jsx(Pe,{humanizedItemTypeName:"product type",itemToEdit:t,formFields:yr,validateFormData:T,onCancel:i,onSubmit:P,onDelete:o,deleteItemButtonLabel:"delete product type"})};function Pr({urlSearchParams:t,setUrlSearchParams:e}){return se({urlSearchParams:t,setUrlSearchParams:e,getSearchValueFromUrlSearchParams:nt,searchValueKeyInUrlSearchParams:W,searchFieldNameInSearchForm:W,searchFieldPlaceholderTextInSearchForm:"Search by product type..."})}const Tr=["name"],ee=[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,sort:"asc",alignLabel:"left",actionButtons:function({item:e}){const o=Ue({productTypeName:e?.name});return r.jsx(r.Fragment,{children:o?r.jsx(he,{to:o,title:"search by product type in products",children:r.jsx(w,{name:"search_category"})}):r.jsx(te,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:r.jsx(w,{name:"search_off"})})})}}],Sr=["name"],gr=ee.filter(t=>Sr.includes(t.name)),br=a.memo(function({urlSearchParams:e,setUrlSearchParams:o}){const c=R([I]),{searchFieldValue:s,SearchForm:m,resetSearchFieldValue:l}=Pr({urlSearchParams:e,setUrlSearchParams:o}),p=I(pe(C=>C.items())),y=I(C=>C.deleteMultiple),[h,i]=a.useState(!1),[P,T]=a.useState(),[d,u]=a.useState(),b=a.useCallback(()=>{i(!0)},[i]),S=a.useCallback(()=>{T(void 0),i(!1)},[T,i]),x=a.useCallback(C=>{u(C)},[u]),E=a.useCallback(()=>{u(void 0)},[u]),U=a.useMemo(function(){return s?p.filter(J=>!!gr.find(k=>{let A=J[k.name];return k.isSearchCaseInsensitive?(A=A?.toLocaleLowerCase(),A?.includes(s.toLocaleLowerCase())):A?.includes(s)})):p},[s,p]),{sortedItems:f,columnsToSortBy:g,handleColumnSortClick:N}=ie(U,ee,Tr),{selectedItemsUuids:_,handleResetSelectedItems:v,handleSelectAllItems:$,handleSelectItem:q,handleShowDeleteMultipleSelectedItemsConfirmation:K,DeleteSelectedItemsConfirmation:V}=Te({itemTypeNamePlural:"product types",items:f,searchFieldValue:s,deleteItemsByUuids:y,setItemToDelete:u}),{lastCreatedOrUpdatedItem:j,onCreateItem:z,onUpdateItem:G}=Se({itemEntityType:$e,items:f,searchFieldValue:s,resetSearchFieldValue:l});return r.jsxs(ye,{children:[r.jsx(ce,{children:m}),r.jsx(le,{tableTitle:"product types",tableColumns:ee,items:f,noItemsLabel:"no product types",isLoading:c,showCreateItemModalButtonLabel:"add product type",onShowCreateItemModal:b,columnsToSortBy:g,onColumnHeaderClick:N,selectedItemsUuids:_,onResetSelectedItems:v,onSelectAllItems:$,onDeleteSelectedItems:K,searchFieldValue:s,children:r.jsx(ue,{items:f,columns:ee,selectedItemsUuids:_,onEditItem:T,onSelectItem:q,lastCreatedOrUpdatedItem:j})}),(h||!!P)&&r.jsx(fr,{itemToEdit:P,onHideModal:S,onShowDeleteItemConfirmation:x,onCreateItem:z,onUpdateItem:G}),!!d&&r.jsx(hr,{onHideModal:E,onHideParentModal:S,itemToDelete:d}),r.jsx(V,{})]})});function Cr(t){const e=a.useMemo(()=>Me(t),[t]);return a.useMemo(function(){return it(Ut({productName:e}))},[e])}function Fr(){const{urlSearchParams:t,setUrlSearchParams:e}=st(),o=Cr(t);return r.jsxs(r.Fragment,{children:[r.jsx("title",{children:o}),r.jsx(ct,{children:r.jsxs("div",{className:ae.Container,children:[r.jsx("div",{className:ae.Products,children:r.jsx(mr,{urlSearchParams:t,setUrlSearchParams:e})}),r.jsxs("div",{className:ae.Parameters,children:[r.jsx(br,{urlSearchParams:t,setUrlSearchParams:e}),r.jsx(Dt,{urlSearchParams:t,setUrlSearchParams:e})]})]})})]})}const vr=tt(function(){return r.jsx(Fr,{})});export{vr as default};
