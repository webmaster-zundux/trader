import{p as o,a as s,s as Mt}from"./chunk-NL6KNZEE-Dk3Cym_s.js";import{m as F,N as Be,S as De,k as Ct,l as It,i as _e,z as Y,d as Se,e as ve,f as be,A as pe,B as Me,C as Ce,E as Ie,F as Te,G as Le,g as Tt,u as ke,H as He,I as je,T as Ye,n as We,J as Lt,o as Ft,p as At}from"./SearchOffIcon-7n7t_y1_.js";import{c as Ke}from"./createPageTitleString-BzKRSWbw.js";import{M as Nt}from"./Main-BwsE5XhZ.js";import{b as Ge,d as $e,c as _t}from"./shallow-sWQUOxsk.js";import{o as T,p as B,q as D,x as Z,y as ee,am as C,an as W,B as R,ao as jt,ap as x,aq as Ut,L as Pt,ar as Ot,as as xt,at as Vt,t as Rt,v as wt,w as Bt,au as Dt}from"./useLoadingPersistStorages-D7HzREWB.js";import{u as te,h as qe,g as X,a as ze,M as Je,b as kt,c as Ht,d as Xe,e as Qe,f as Ze,T as Yt}from"./Dialog-D1ngMR8w.js";import{b as et,p as q,d as tt,L as nt,M as Wt,u as Q,f as Ue,a as ot}from"./getUrlToMapPageWithParams-D1zvb3CV.js";import{S as it}from"./SearchFormAndTableContainer-C1hwLMnm.js";import{M as Kt,E as at,a as Gt}from"./MovingEntity-Di870hds.js";import{s as ce,F as de}from"./sortItemsByLocationFullNameForOrder-Dsq2NycE.js";import{S as K}from"./StaticLink-D-brTwns.js";import{I as Fe,s as ue}from"./InfoIcon-Bahh4MTL.js";import{L as st,a as lt}from"./LocationOffIcon-wLc2ZJO4.js";import{g as rt}from"./getUrlToMovingEntitiesPageWithParams-DGnyyKN3.js";import{D as $t,S as qt}from"./DialogFilterForm-hofrYX-n.js";import"./middleware-46aBMWQM.js";import"./App.const-DNoFr9tQ.js";import"./index-Ds4Gyjyp.js";const Ee="Moving entities";function zt({movingEntityName:e}){const n=[e].filter(t=>!!t);return n.length?`Search ${n.join(" ")} - ${Ee}`:`${Ee}`}const Jt="_Container_1ku51_1",Xt="_MainTable_1ku51_10",Qt="_TableGroups_1ku51_16",me={Container:Jt,MainTable:Xt,TableGroups:Qt};function ge({name:e,label:n,value:t}){const i=T([B,D]);if(!t)return;const l=i||!F(t)?void 0:t,a=l?Z(l):void 0;if(a)return{label:n??(e==null?void 0:e.toString()),value:a==null?void 0:a.name};const r=i||!F(t)?void 0:t,d=r?ee(r):void 0;return d?{label:n??(e==null?void 0:e.toString()),value:d==null?void 0:d.name}:{label:n??(e==null?void 0:e.toString()),value:"(location type without name)"}}function Zt({name:e,label:n,value:t}){var a;const i=T([C]);if(!t)return;const l=i||!F(t)||(a=W(t))==null?void 0:a.name;return l?{label:n??(e==null?void 0:e.toString()),value:l}:{label:n??(e==null?void 0:e.toString()),value:"(moving object class without name)"}}function en(){return[{name:"movingEntityClassUuid",label:"class",formatLabelAndValue:Zt},{name:"locationUuid",label:"type",formatLabelAndValue:ge},{name:"homeLocationUuid",label:"type",formatLabelAndValue:ge},{name:"destinationLocationUuid",label:"type",formatLabelAndValue:ge}]}function tn({value:e,item:n}){const t=T([B,D]),i=t||!F(e)?void 0:Z(e);let l=t||!F(i==null?void 0:i.planetarySystemUuid)||i==null?void 0:i.planetarySystemUuid;!l&&F(e)&&(l=e);const a=l?ee(l):void 0,r=et({locationId:i==null?void 0:i.id,locationName:i==null?void 0:i.name,planetarySystemName:a==null?void 0:a.name});let d;i?d=q(i==null?void 0:i.position):d=q(n.position);const u=d&&a&&tt({locationId:i==null?void 0:i.id,locationName:i==null?void 0:i.name,planetarySystemName:a==null?void 0:a.name,position:i?void 0:n.position});return o.jsxs(o.Fragment,{children:[r?o.jsx(K,{href:r,title:"show location info",children:o.jsx(Fe,{})}):o.jsx(R,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no location data",children:o.jsx(st,{})}),u?o.jsx(K,{href:u,title:`show ${i?"location":"position"} on map`,children:o.jsx(nt,{})}):o.jsx(R,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no position data",children:o.jsx(lt,{})})]})}function Pe({value:e}){const n=T([B,D]),t=n||!F(e)?void 0:Z(e);let i=n||!F(t==null?void 0:t.planetarySystemUuid)||t==null?void 0:t.planetarySystemUuid;i||(i=n||!F(e)?void 0:e);const l=i?ee(i):void 0,a=et({locationId:t==null?void 0:t.id,locationName:t==null?void 0:t.name,planetarySystemName:l==null?void 0:l.name}),d=(t?q(t.position):void 0)&&l&&tt({locationId:t==null?void 0:t.id,locationName:t==null?void 0:t.name,planetarySystemName:l==null?void 0:l.name,mapMode:!(t!=null&&t.id)&&!(t!=null&&t.name)?Wt:void 0});return o.jsxs(o.Fragment,{children:[a?o.jsx(K,{href:a,title:"show location info",children:o.jsx(Fe,{})}):o.jsx(R,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no location data",children:o.jsx(st,{})}),d?o.jsx(K,{href:d,title:"show location on map",children:o.jsx(nt,{})}):o.jsx(R,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no position data",children:o.jsx(lt,{})})]})}function Oe({value:e}){return o.jsx(o.Fragment,{children:typeof e=="string"?e:o.jsx(Be,{children:"(noÂ id)"})})}function nn({value:e}){var l;const i=T([C])||!F(e)||(l=W(e))==null?void 0:l.name;return o.jsx(o.Fragment,{children:i||o.jsx(Be,{children:"(n/d)"})})}function on({value:e}){const t=T([C])||!F(e)?void 0:W(e),i=rt({movingEntityClassName:t==null?void 0:t.name});return o.jsx(o.Fragment,{children:i?o.jsx(K,{href:i,title:"show moving object class info",children:o.jsx(Fe,{})}):o.jsx(R,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no moving object class data",children:o.jsx(De,{})})})}function an(e,n){var a,r;if(jt())return 0;const i=F(e)&&((a=W(e))==null?void 0:a.name)||"",l=F(n)&&((r=W(n))==null?void 0:r.name)||"";return i.localeCompare(l)}function xe(){return[{name:"uuid",isCheckbox:!0},{name:"id",asLinkToEditItem:!0,isSortable:!0,alignLabel:"center",uppercase:!0,monospaced:!0,nowrap:!0,isSearchCaseInsensitive:!0,formatValue:Oe},{name:"originalId",label:"original id",asLinkToEditItem:!0,isSortable:!0,alignLabel:"center",uppercase:!0,monospaced:!0,nowrap:!0,isSearchCaseInsensitive:!0,formatValue:Oe},{name:"movingEntityClassUuid",label:"class",isSortable:!0,sort:"asc",alignLabel:"center",formatValue:nn,actionButtons:on,sortFn:an},{name:"name",asLinkToEditItem:!0,isSortable:!0,alignLabel:"left"},{name:"locationUuid",label:"location",alignLabel:"right",isSortable:!0,formatValue:de,actionButtons:tn,sortFn:ce},{name:"destinationLocationUuid",label:"destination",alignLabel:"right",isSortable:!0,formatValue:de,actionButtons:Pe,sortFn:ce},{name:"homeLocationUuid",label:"home",alignLabel:"right",isSortable:!0,formatValue:de,actionButtons:Pe,sortFn:ce}]}function he(e,n){var a;if(!e||!n)return!1;if(e===n)return!0;const i=(a=Z(e))==null?void 0:a.planetarySystemUuid,l=i?ee(i):void 0;return l?l.uuid===n:!1}const fe=(e,n)=>[{name:"movingEntityClassUuid",label:"class",type:"select",options:e,chooseOptionLabel:"choose a moving entity class",noOptionsLabel:"no moving entity classes available",allowToSelectNoValueOption:!0,filterPredicate:(t,i)=>t.movingEntityClassUuid===i.movingEntityClassUuid},{name:"locationUuid",label:"location",type:"select",options:n,chooseOptionLabel:"choose a location",noOptionsLabel:"no location available",allowToSelectNoValueOption:!0,filterPredicate:(t,i)=>he(t.locationUuid,i.locationUuid)},{name:"destinationLocationUuid",label:"destination",type:"select",options:n,chooseOptionLabel:"choose a location",noOptionsLabel:"no location available",allowToSelectNoValueOption:!0,filterPredicate:(t,i)=>he(t.destinationLocationUuid,i.destinationLocationUuid)},{name:"homeLocationUuid",label:"home",type:"select",options:n,chooseOptionLabel:"choose a location",noOptionsLabel:"no location available",allowToSelectNoValueOption:!0,filterPredicate:(t,i)=>he(t.homeLocationUuid,i.homeLocationUuid)}],sn=s.memo(function({itemToDelete:n,onHideModal:t,onHideParentModal:i}){const a=T([x]),r=x(c=>c.delete),d=s.useCallback(function(){t()},[t]),u=s.useCallback(function(){i()},[i]),h=s.useCallback(function(){a||(r(n),d(),u())},[n,d,u,r,a]),m=s.useMemo(function(){return o.jsxs(o.Fragment,{children:["Are you sure you want"," ",o.jsx("strong",{children:"to delete"})," ","the moving object named",o.jsx("br",{}),o.jsxs("strong",{children:[n.id?`${n.id} `:"",n.name]}),"?"]})},[n]);return o.jsx(Ge,{title:m,onHide:d,onConfirm:h,confirmButtonLabel:"delete moving object"})}),w=Ct();function ct(){const{isHydrating:e,isHydrated:n}=C.getState();if(e||!n)return;const t=Ut();ln({movingEntitiesMap:t})}w.setState({prepareData:ct});C.subscribe(function(){ct()});function ln({movingEntitiesMap:e}){const n=w.getState();n.isProcessing||(n.setIsProcessing(!0),window.setTimeout(function(){const l=dn({movingEntitiesMap:e});n.replaceAll(l),n.setIsProcessing(!1)},0))}function rn(e,n=!1){const t=(e==null?void 0:e.name)??"(moving object class without name)",i=n?It(t,"entity class"):t;return{name:t,nameAsLabel:i}}function cn({movingEntitiesMap:e,shouldAddSuffixLabel:n=!1}){const t=[];return Pt(e).forEach(function(a){const r=a.uuid,{name:d,nameAsLabel:u}=rn(a,n);t.push({uuid:r,name:d,label:u})}),t}function dt(e){e.sort((n,t)=>n.name.localeCompare(t.name)),e.forEach(({items:n})=>dt(n??[]))}function ut({items:e=[],level:n=0,disableOptionsWithoutUuid:t=!0,selectOptions:i=new Array}){return e.forEach(l=>{const{label:a,items:r}=l,d=l.uuid,u=d??"";i.push({value:u,label:a,level:n,disabled:t?!d:!1}),r!=null&&r.length&&ut({items:r,level:n+1,disableOptionsWithoutUuid:t,selectOptions:i})}),i}function dn({movingEntitiesMap:e,disableOptionsWithoutUuid:n}){const t=cn({movingEntitiesMap:e,shouldAddSuffixLabel:!1});return dt(t),ut({items:t,disableOptionsWithoutUuid:n})??[]}function Ve({movingEntityClassesAsSelectOptions:e,locationsAsSelectOptions:n}){return[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"id",uppercase:!0},{name:"originalId",label:"original Id",uppercase:!0},{name:"movingEntityClassUuid",label:"class",type:"select",options:e,chooseOptionLabel:"choose a moving object class",noOptionsLabel:"no moving object classes available",allowToSelectNoValueOption:!0},{name:"name",required:!0},{name:"position"},{name:"locationUuid",label:"current location",type:"select",options:n,chooseOptionLabel:"choose a location",noOptionsLabel:"no locations available",allowToSelectNoValueOption:!0},{name:"destinationLocationUuid",label:"destination",type:"select",options:n,chooseOptionLabel:"choose a location",noOptionsLabel:"no locations available",allowToSelectNoValueOption:!0},{name:"homeLocationUuid",label:"home location",type:"select",options:n,chooseOptionLabel:"choose a location",noOptionsLabel:"no locations available",allowToSelectNoValueOption:!0},{name:"cargo",label:"cargo / freight bay"},{name:"combatShield",label:"shield"},{name:"combatLaser",label:"laser"},{name:"combatMissiles",label:"missiles",type:"number",valueType:"integer",pattern:"[0-9]+",min:0,max:Number.MAX_SAFE_INTEGER,step:"1"},{name:"note",type:"multiline-text"}]}const un=s.memo(function({itemToEdit:n,filterValue:t,onHideModal:i,onShowDeleteItemConfirmation:l,onCreateItem:a,onUpdateItem:r}){const d=T([x,C,B,D]),u=te([w,Q]),h=d||u,m=x(y=>y.create),c=x(y=>y.update),E=s.useCallback(y=>{const p=m(y);typeof a=="function"&&a(p)},[m,a]),b=s.useCallback(y=>{const p=c(y);p&&typeof r=="function"&&r(p)},[c,r]),v=s.useCallback(()=>{i()},[i]),M=s.useCallback(y=>{var p,N,U,V;if(qe(y)){const S=X(y,Gt);S.id=(U=S.id)==null?void 0:U.toLocaleUpperCase(),S.originalId=(V=S.originalId)==null?void 0:V.toLocaleUpperCase();const j=q(S.position);j&&(S.position=Ue(j)),b(S)}else{const S=X(y,Kt);S.entityType=at,S.id=(p=S.id)==null?void 0:p.toLocaleUpperCase(),S.originalId=(N=S.originalId)==null?void 0:N.toLocaleUpperCase();const j=q(S.position);j&&(S.position=Ue(j)),E(S)}v()},[E,b,v]),I=s.useCallback(y=>{if(h)return function(){return o.jsx("span",{children:"Loading..."})};const p=Ot(y);if(p)return function(){return o.jsxs(o.Fragment,{children:["Moving object with Id:"," ",o.jsx("strong",{children:p?p.id:"(no-id)"})," ","already exists"]})};const N=xt(y);if(N)return function(){return o.jsxs(o.Fragment,{children:["Moving object with Original Id:"," ",o.jsx("strong",{children:N?N.originalId:"(no-original-id)"})," ","already exists"]})}},[h]),L=w(y=>y.items),g=Q(y=>y.items),f=s.useMemo(function(){return Ve(h?{locationsAsSelectOptions:[],movingEntityClassesAsSelectOptions:[]}:{locationsAsSelectOptions:g,movingEntityClassesAsSelectOptions:L})},[L,g,h]),_=ze(f,t);return o.jsx(Je,{humanizedItemTypeName:"moving object",itemToEdit:n,formFields:_,validateFormData:I,onCancel:v,onSubmit:M,onDelete:l,deleteItemButtonLabel:"delete moving object"})}),mn=s.memo(function({filterValue:n,onSetFilterValue:t,onHide:i}){const l=T([C,B,D]),a=te([w,Q]),r=l||a,d=Q(E=>E.items),u=w(E=>E.items),h=s.useMemo(function(){return r?fe([],[]):fe(u,d)},[u,d,r]),m=s.useCallback(function(){i()},[i]),c=s.useCallback(function(b){Object.keys(b).length?t(b):t(void 0),m()},[m,t]);return o.jsx(o.Fragment,{children:o.jsx("div",{style:{position:"absolute",top:0,right:0},children:o.jsx($t,{humanizedPluralItemTypeName:"moving objects",filterValue:n,formFields:h,onCancel:m,onFilter:c})})})}),gn="_Container_16hmi_1",hn="_SearchAndFilterFormContainer_16hmi_9",Re={Container:gn,SearchAndFilterFormContainer:hn},yn=[Y,Se,ve,be,pe,Me,Ce,Ie,Te,Le];function we(e){const n={className:e.get(Y)||void 0,locationId:e.get(Se)||void 0,locationName:e.get(ve)||void 0,planetarySystemName:e.get(be)||void 0,destinationLocationId:e.get(pe)||void 0,destinationLocationName:e.get(Me)||void 0,destinationPlanetarySystemName:e.get(Ce)||void 0,homeLocationId:e.get(Ie)||void 0,homeLocationName:e.get(Te)||void 0,homePlanetarySystemName:e.get(Le)||void 0};return Tt(n)}function ye(e,n,t){var l,a;let i;return e||n?i=(l=Rt({id:e,name:n,planetarySystemName:t}))==null?void 0:l.uuid:t&&(i=(a=wt(t))==null?void 0:a.uuid),i}function En({filterValue:e}){var I;if(!e)return;const{className:n,locationId:t,locationName:i,planetarySystemName:l,destinationLocationId:a,destinationLocationName:r,destinationPlanetarySystemName:d,homeLocationId:u,homeLocationName:h,homePlanetarySystemName:m,...c}=e,E=n?(I=Vt(n))==null?void 0:I.uuid:void 0,b=ye(t,i,l),v=ye(a,r,d),M=ye(u,h,m);return{...c,movingEntityClassUuid:E,locationUuid:b,destinationLocationUuid:v,homeLocationUuid:M}}function fn({urlSearchParams:e,setUrlSearchParams:n}){const t=T([C,B,D]),i=te([w,ot]),l=t||i,a=s.useRef(void 0),r=s.useMemo(function(){const h=we(e),m=En({filterValue:h}),c=a.current;return _e(c,m)?(a.current=m,m):c},[e,a,l]),d=s.useCallback(function(h){let m;if(typeof h=="function")throw new Error("MovingEntityFilterValue as setState(prev=>newState) function not supported");h&&Object.keys(h).length>0&&(m=h),n(c=>{var v;const E=we(c);if(_e(E,m)){if(!m)return yn.forEach(_=>{c.delete(_)}),c;const M=m.movingEntityClassUuid,I=M?(v=W(M))==null?void 0:v.name:void 0;I?c.set(Y,I):c.delete(Y);const L=m.locationUuid;ue({urlSearchParams:c,locationUuid:L,planetarySystemUuid:L,locationIdUrlSearchParamsKeyName:Se,locationNameUrlSearchParamsKeyName:ve,planetarySystemNameUrlSearchParamsKeyName:be});const g=m.destinationLocationUuid;ue({urlSearchParams:c,locationUuid:g,planetarySystemUuid:g,locationIdUrlSearchParamsKeyName:pe,locationNameUrlSearchParamsKeyName:Me,planetarySystemNameUrlSearchParamsKeyName:Ce});const f=m.homeLocationUuid;ue({urlSearchParams:c,locationUuid:f,planetarySystemUuid:f,locationIdUrlSearchParamsKeyName:Ie,locationNameUrlSearchParamsKeyName:Te,planetarySystemNameUrlSearchParamsKeyName:Le})}return c})},[n]);return{filterValue:r,setFilterValueToUrlSearchParams:d}}function Sn({urlSearchParams:e,setUrlSearchParams:n}){return ke({urlSearchParams:e,setUrlSearchParams:n,getSearchValueFromUrlSearchParams:He,searchValueKeyInUrlSearchParams:je,searchFieldNameInSearchForm:je,searchFieldPlaceholderTextInSearchForm:"Search by moving object name, id, originalId..."})}const vn=["name","id","originalId","movingEntityClassUuid","locationUuid","homeLocationUuid","destinationLocationUuid","combatShield","combatLaser","combatMissiles"],bn=["name","id","originalId"],pn=s.memo(function({urlSearchParams:n,setUrlSearchParams:t}){const i=T([x,C,D,B]),l=te([ot]),a=i||l,{filterValue:r,setFilterValueToUrlSearchParams:d}=fn({urlSearchParams:n,setUrlSearchParams:t}),{searchFieldValue:u,SearchForm:h,resetSearchFieldValue:m}=Sn({urlSearchParams:n,setUrlSearchParams:t}),c=x($e(A=>A.items())),E=x(A=>A.deleteMultiple),[b,v]=s.useState(!1),[M,I]=s.useState(),[L,g]=s.useState(),f=s.useCallback(()=>{v(!0)},[v]),_=s.useCallback(()=>{I(void 0),v(!1)},[I,v]),y=s.useCallback(A=>{g(A)},[g]),p=s.useCallback(()=>{g(void 0)},[g]),N=s.useMemo(function(){return xe().filter(le=>bn.includes(le.name))},[]),U=s.useMemo(function(){return u?c.filter(le=>!!N.find(Ne=>{const H=le[Ne.name];if(Ne.isSearchCaseInsensitive){const re=H==null?void 0:H.toLocaleLowerCase();return re==null?void 0:re.includes(u.toLocaleLowerCase())}return H==null?void 0:H.includes(u)})):c},[u,c,N]),V=s.useMemo(function(){return fe([],[])},[a]),S=s.useMemo(function(){return en()},[a]),{isAppliedFilter:j,enableFilter:ne,disableFilter:oe}=kt(r),ie=Ht(U,V,j?r:void 0),G=s.useMemo(function(){return xe()},[a]),{sortedItems:k,columnsToSortBy:ae,handleColumnSortClick:P}=Xe(ie,G,vn),{selectedItemsUuids:z,handleResetSelectedItems:Ae,handleSelectAllItems:J,handleSelectItem:O,handleShowDeleteMultipleSelectedItemsConfirmation:$,DeleteSelectedItemsConfirmation:yt}=Qe({itemTypeNamePlural:"moving objects",items:k,searchFieldValue:u,filterValue:r,deleteItemsByUuids:E,setItemToDelete:g}),Et=s.useCallback(function(){d(void 0)},[d]),{lastCreatedOrUpdatedItem:ft,onCreateItem:St,onUpdateItem:vt}=Ze({itemEntityType:at,items:k,searchFieldValue:u,filterValue:r,resetSearchFieldValue:m,resetFilterValue:Et}),{isVisible:bt,show:pt,hide:se}=_t(!1);return s.useEffect(function(){(r||!r)&&se()},[r,se]),o.jsxs(it,{children:[o.jsxs("div",{className:Re.SearchAndFilterFormContainer,children:[h,o.jsxs(R,{onClick:pt,title:"show filter form",children:[o.jsx(Yt,{}),o.jsx("span",{children:"filter"})]}),bt&&o.jsx(mn,{filterValue:r,onSetFilterValue:d,onHide:se})]}),o.jsx("div",{className:Re.Container,children:o.jsx(Ye,{tableTitle:"moving objects",tableColumns:G,items:k,noItemsLabel:"no moving objects",isLoading:a,showCreateItemModalButtonLabel:"add moving object",onShowCreateItemModal:f,columnsToSortBy:ae,onColumnHeaderClick:P,selectedItemsUuids:z,onResetSelectedItems:Ae,onSelectAllItems:J,onDeleteSelectedItems:$,searchFieldValue:u,filterValue:r,isAppliedFilter:j,onEnableFilter:ne,onDisableFilter:oe,filterInfoFields:S,children:o.jsx(We,{items:k,columns:G,selectedItemsUuids:z,onEditItem:I,onSelectItem:O,lastCreatedOrUpdatedItem:ft})})}),(b||!!M)&&o.jsx(un,{itemToEdit:M,filterValue:r,onHideModal:_,onShowDeleteItemConfirmation:y,onCreateItem:St,onUpdateItem:vt}),!!L&&o.jsx(sn,{onHideModal:p,onHideParentModal:_,itemToDelete:L}),o.jsx(yt,{})]})}),mt="moving-entity-class",gt=["uuid","entityType","name","note","image"],Mn=Bt(gt);function ht(){return[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,sort:"asc",alignLabel:"left",actionButtons:function({item:n}){const t=rt({movingEntityClassName:n==null?void 0:n.name});return o.jsx(o.Fragment,{children:t?o.jsx(K,{href:t,title:"search by moving entity class in moving entities",children:o.jsx(qt,{})}):o.jsx(R,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:o.jsx(De,{})})})}},{name:"note",asLinkToEditItem:!0,isSortable:!0,alignLabel:"left"}]}const Cn=s.memo(function({itemToDelete:n,onHideModal:t,onHideParentModal:i}){const a=T([C]),r=C(c=>c.delete),d=s.useCallback(function(){t()},[t]),u=s.useCallback(function(){i()},[i]),h=s.useCallback(function(){a||(r(n),d(),u())},[n,d,u,r,a]),m=s.useMemo(function(){return o.jsxs(o.Fragment,{children:["Are you sure you want"," ",o.jsx("strong",{children:"to delete"})," ","the moving object class named",o.jsx("br",{}),o.jsx("strong",{children:n.name}),"?"]})},[n]);return o.jsx(Ge,{title:m,onHide:d,onConfirm:h,confirmButtonLabel:"delete moving object class"})});function In(){return[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0},{name:"note"},{name:"image",type:"file",accept:"image/*"}]}const Tn=s.memo(function({itemToEdit:n,filterValue:t,onHideModal:i,onShowDeleteItemConfirmation:l,onCreateItem:a,onUpdateItem:r}){const u=T([C]),h=C(g=>g.create),m=C(g=>g.update),c=s.useCallback(g=>{const f=h(g);typeof a=="function"&&a(f)},[h,a]),E=s.useCallback(g=>{const f=m(g);f&&typeof r=="function"&&r(f)},[m,r]),b=s.useCallback(()=>{i()},[i]),v=s.useCallback(g=>{if(qe(g)){const f=X(g,gt);E(f)}else{const f=X(g,Mn);f.entityType=mt,c(f)}b()},[c,E,b]),M=s.useCallback(g=>{if(u)return function(){return o.jsx("span",{children:"Loading..."})};const f=Dt(g);if(f)return function(){return o.jsxs(o.Fragment,{children:["Moving object class named"," ",o.jsx("strong",{children:f?f.name:"(moving object class without name)"})," ","already exists"]})}},[u]),I=s.useMemo(function(){return In()},[]),L=ze(I,t);return o.jsx(Je,{humanizedItemTypeName:"moving object class",itemToEdit:n,formFields:L,validateFormData:M,onCancel:b,onSubmit:v,onDelete:l,deleteItemButtonLabel:"delete moving object class"})});function Ln({urlSearchParams:e,setUrlSearchParams:n}){return ke({urlSearchParams:e,setUrlSearchParams:n,getSearchValueFromUrlSearchParams:Lt,searchValueKeyInUrlSearchParams:Y,searchFieldNameInSearchForm:Y,searchFieldPlaceholderTextInSearchForm:"Search by moving object class..."})}const Fn=["name"],An=["name"],Nn=ht().filter(e=>An.includes(e.name)),_n=s.memo(function({urlSearchParams:n,setUrlSearchParams:t}){const l=T([C]),{searchFieldValue:a,SearchForm:r,resetSearchFieldValue:d}=Ln({urlSearchParams:n,setUrlSearchParams:t}),u=C($e(P=>P.items())),h=C(P=>P.deleteMultiple),[m,c]=s.useState(!1),[E,b]=s.useState(),[v,M]=s.useState(),I=s.useCallback(()=>{c(!0)},[c]),L=s.useCallback(()=>{b(void 0),c(!1)},[b,c]),g=s.useCallback(P=>{M(P)},[M]),f=s.useCallback(()=>{M(void 0)},[M]),_=s.useMemo(function(){return a?u.filter(z=>!!Nn.find(J=>{const O=z[J.name];if(J.isSearchCaseInsensitive){const $=O==null?void 0:O.toLocaleLowerCase();return $==null?void 0:$.includes(a.toLocaleLowerCase())}return O==null?void 0:O.includes(a)})):u},[a,u]),y=s.useMemo(function(){return ht()},[l]),{sortedItems:p,columnsToSortBy:N,handleColumnSortClick:U}=Xe(_,y,Fn),{selectedItemsUuids:V,handleResetSelectedItems:S,handleSelectAllItems:j,handleSelectItem:ne,handleShowDeleteMultipleSelectedItemsConfirmation:oe,DeleteSelectedItemsConfirmation:ie}=Qe({itemTypeNamePlural:"moving object classes",items:p,searchFieldValue:a,deleteItemsByUuids:h,setItemToDelete:M}),{lastCreatedOrUpdatedItem:G,onCreateItem:k,onUpdateItem:ae}=Ze({itemEntityType:mt,items:p,searchFieldValue:a,resetSearchFieldValue:d});return o.jsxs(it,{children:[r,o.jsx(Ye,{tableTitle:"moving object classes",tableColumns:y,items:p,noItemsLabel:"no moving object classes",isLoading:l,showCreateItemModalButtonLabel:"add moving object class",onShowCreateItemModal:I,columnsToSortBy:N,onColumnHeaderClick:U,selectedItemsUuids:V,onResetSelectedItems:S,onSelectAllItems:j,onDeleteSelectedItems:oe,searchFieldValue:a,children:o.jsx(We,{items:p,columns:y,selectedItemsUuids:V,onEditItem:b,onSelectItem:ne,lastCreatedOrUpdatedItem:G})}),(m||!!E)&&o.jsx(Tn,{itemToEdit:E,onHideModal:L,onShowDeleteItemConfirmation:g,onCreateItem:k,onUpdateItem:ae}),!!v&&o.jsx(Cn,{onHideModal:f,onHideParentModal:L,itemToDelete:v}),o.jsx(ie,{})]})});function jn(e){const n=s.useMemo(()=>He(e),[e]),t=s.useMemo(function(){return Ke(zt({movingEntityName:n}))},[n]);At(t)}function Un(){const{urlSearchParams:e,setUrlSearchParams:n}=Ft();return jn(e),o.jsx(Nt,{children:o.jsxs("div",{className:me.Container,children:[o.jsx("div",{className:me.MainTable,children:o.jsx(pn,{urlSearchParams:e,setUrlSearchParams:n})}),o.jsx("div",{className:me.TableGroups,children:o.jsx(_n,{urlSearchParams:e,setUrlSearchParams:n})})]})})}function Zn(){return[{title:Ke(Ee)}]}const eo=Mt(function(){return o.jsx(Un,{})});export{eo as default,Zn as meta};
