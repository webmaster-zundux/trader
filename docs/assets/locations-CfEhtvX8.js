import{a,p as e,s as nt}from"./chunk-NL6KNZEE-BTkWJe7M.js";import{c as at,a as st,u as ye,t as it,v as G,T as pe,b as he,S as W,i as _,N as ae,d as Ae,k as $,l as rt,w as Oe,j as je,x as Be,o as lt}from"./useTableSearch-Dnt4ZX53.js";import{c as ct}from"./createPageTitleWithAppName-CJkNTaXl.js";import{M as dt}from"./Main-CgXj-WVg.js";import{b as Se,d as fe,c as ut}from"./shallow-z8fWIb1M.js";import{aa as A,ab as mt,G as yt,o as pt,n as P,ac as ht,B as E,ad as K,H as I,q as Y,y as D,p as St,ae as ft,af as Tt,ag as Lt,W as gt,ah as bt,ai as Ct,aj as Pt}from"./useLoadingPersistStorages-DU9v21yU.js";import{S as N}from"./StaticLink-BbBTYWDN.js";import{S as Ft,D as It}from"./DialogFilterForm-BS0nQ9A8.js";import{c as xt,b as le,p as v,f as q,d as se,L as Te,a as Ue,g as ke,h as Q,i as At,E as we,j as jt,M as Mt,P as Et,k as De,l as Nt}from"./getUrlToMapPageWithParams-Bls7AU7r.js";import{h as Le,g as J,M as ge,u as X,d as be,e as Ce,f as Pe,a as _t,b as Ot,c as Bt,T as Ut}from"./hasUuid-CO5z9fsR.js";import{S as Fe}from"./SearchFormAndTableContainer-DLdA1ywV.js";import{g as ie,Q as re}from"./getUrlToMarketPageWithParams-BW5xyPgw.js";import{a as ve,L as He}from"./LocationOffIcon-BLDsxhkF.js";import{P as kt,N as Me}from"./PlanetOrbitIcon-BZk0WnUT.js";import{g as wt}from"./getUrlToMovingEntitiesPageWithParams-CHPs17TM.js";import"./middleware-XeL71aNN.js";import"./App.const-DTwjj9QA.js";import"./index-D_ImYj8K.js";const Z=at();function Ve(){const{isHydrating:o,isHydrated:t}=A.getState();if(o||!t)return;const n=mt();Dt({locationTypesMap:n})}Z.setState({prepareData:Ve});A.subscribe(function(){Ve()});function Dt({locationTypesMap:o}){const t=Z.getState();t.isProcessing||(t.setIsProcessing(!0),window.setTimeout(function(){const r=Vt({locationTypesMap:o});t.replaceAll(r),t.setIsProcessing(!1)},0))}function vt(o,t=!1,n){const s=(o==null?void 0:o.name)??"(location type without name)",r=xt([s]),i=t?st(s,"location type"):r;return{locationTypeNameWithId:r,locationTypeNameWithIdAsLabel:i}}function Ht({locationTypesMap:o,shouldAddSuffixLabel:t=!1}){const n=[];return yt(o).forEach(function(i){const l=i.uuid,{locationTypeNameWithId:c,locationTypeNameWithIdAsLabel:p}=vt(i,t);n.push({uuid:l,name:c,label:p})}),n}function Re(o){o.sort((t,n)=>t.name.localeCompare(n.name)),o.forEach(({items:t})=>Re(t??[]))}function We({items:o=[],level:t=0,disableOptionsWithoutUuid:n=!0,selectOptions:s=new Array}){return o.forEach(r=>{const{label:i,items:l}=r,c=r.uuid,p=c??"";s.push({value:p,label:i,level:t,disabled:n?!c:!1}),l!=null&&l.length&&We({items:l,level:t+1,disableOptionsWithoutUuid:n,selectOptions:s})}),s}function Vt({locationTypesMap:o,disableOptionsWithoutUuid:t}){const n=Ht({locationTypesMap:o,shouldAddSuffixLabel:!1});return Re(n),We({items:n,disableOptionsWithoutUuid:t})??[]}const Ye="location-type",ze=["uuid","name","image"],Rt=pt(ze);function Wt({urlSearchParams:o,setUrlSearchParams:t}){return ye({urlSearchParams:o,setUrlSearchParams:t,getSearchValueFromUrlSearchParams:it,searchValueKeyInUrlSearchParams:G,searchFieldNameInSearchForm:G,searchFieldPlaceholderTextInSearchForm:"Search by location type..."})}const Yt=[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0},{name:"image",type:"file",accept:"image/*"}],zt=a.memo(function({itemToEdit:t,onHideModal:n,onShowDeleteItemConfirmation:s,onCreateItem:r,onUpdateItem:i}){const c=P([A]),p=A(m=>m.create),h=A(m=>m.update),y=a.useCallback(m=>{const d=p(m);typeof r=="function"&&r(d)},[p,r]),u=a.useCallback(m=>{const d=h(m);d&&typeof i=="function"&&i(d)},[h,i]),S=a.useCallback(()=>{n()},[n]),C=a.useCallback(m=>{if(Le(m)){const d=J(m,ze);d.name=d.name.toLocaleLowerCase(),u(d)}else{const d=J(m,Rt);d.entityType=Ye,d.name=d.name.toLocaleLowerCase(),y(d)}S()},[y,u,S]),F=a.useCallback(m=>{if(c)return function(){return e.jsx("span",{children:"Loading..."})};const d=ht(m);if(d)return function(){return e.jsxs(e.Fragment,{children:["Location type named"," ",e.jsx("strong",{children:d.name})," ","already exists"]})}},[c]);return e.jsx(ge,{humanizedItemTypeName:"location type",itemToEdit:t,formFields:Yt,validateFormData:F,onCancel:S,onSubmit:C,onDelete:s,deleteItemButtonLabel:"delete location type"})}),Gt=a.memo(function({itemToDelete:t,onHideModal:n,onHideParentModal:s}){const i=P([A]),l=A(u=>u.delete),c=a.useCallback(function(){n()},[n]),p=a.useCallback(function(){s()},[s]),h=a.useCallback(function(){i||(l(t),c(),p())},[l,t,c,p,i]),y=a.useMemo(()=>e.jsxs(e.Fragment,{children:["Are you sure you want"," ",e.jsx("strong",{children:"to delete"}),e.jsx("br",{}),"the location type named"," ",e.jsx("strong",{children:t.name}),"?"]}),[t]);return e.jsx(Se,{title:y,onHide:c,onConfirm:h,confirmButtonLabel:"delete location type"})}),$t=["name"],de=[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,sort:"asc",alignLabel:"left",actionButtons:function({item:t}){const n=le({locationTypeName:t==null?void 0:t.name});return e.jsx(e.Fragment,{children:n?e.jsx(N,{href:n,title:"search by location type in locations",children:e.jsx(Ft,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(W,{})})})}}],Kt=a.memo(function({urlSearchParams:t,setUrlSearchParams:n}){const s=P([A]),r=X([Z]),i=s||r,[l,c]=a.useState(!1),[p,h]=a.useState(),[y,u]=a.useState(),S=A(fe(O=>O.items())),C=A(O=>O.deleteMultiple),F=a.useCallback(()=>{c(!0)},[c]),m=a.useCallback(()=>{h(void 0),c(!1)},[h,c]),d=a.useCallback(O=>{u(O)},[u]),T=a.useCallback(()=>{u(void 0)},[u]),{searchFieldValue:f,SearchForm:j,resetSearchFieldValue:w}=Wt({urlSearchParams:t,setUrlSearchParams:n}),L=a.useMemo(()=>f?S.filter(({name:O})=>O.includes(f)):S,[f,S]),{sortedItems:g,columnsToSortBy:M,handleColumnSortClick:b}=be(L,de,$t),{selectedItemsUuids:x,handleResetSelectedItems:V,handleSelectAllItems:ee,handleSelectItem:te,handleShowDeleteMultipleSelectedItemsConfirmation:R,DeleteSelectedItemsConfirmation:H}=Ce({itemTypeNamePlural:"location types",items:g,searchFieldValue:f,deleteItemsByUuids:C,setItemToDelete:u}),{lastCreatedOrUpdatedItem:oe,onCreateItem:ne,onUpdateItem:z}=Pe({itemEntityType:Ye,items:g,searchFieldValue:f,resetSearchFieldValue:w});return e.jsxs(Fe,{children:[j,e.jsx(pe,{tableTitle:"location types",tableColumns:de,items:g,noItemsLabel:"no location types",isLoading:i,showCreateItemModalButtonLabel:"add location type",onShowCreateItemModal:F,columnsToSortBy:M,onColumnHeaderClick:b,selectedItemsUuids:x,onResetSelectedItems:V,onSelectAllItems:ee,onDeleteSelectedItems:R,searchFieldValue:f,children:e.jsx(he,{items:g,columns:de,selectedItemsUuids:x,onEditItem:h,onSelectItem:te,lastCreatedOrUpdatedItem:oe})}),(l||!!p)&&e.jsx(zt,{itemToEdit:p,onHideModal:m,onShowDeleteItemConfirmation:d,onCreateItem:ne,onUpdateItem:z}),!!y&&e.jsx(Gt,{onHideModal:T,onHideParentModal:m,itemToDelete:y}),e.jsx(H,{})]})}),Ee="Locations";function qt({locationName:o,planetarySystemName:t}){const n=[o,!!t&&`in ${t}`].filter(s=>!!s);return n.length?`Search ${n.join(" ")} - ${Ee}`:`${Ee}`}const Qt="_Container_1ku51_1",Jt="_MainTable_1ku51_10",Xt="_TableGroups_1ku51_16",ue={Container:Qt,MainTable:Jt,TableGroups:Xt},Zt="_SearchAndFilterFormContainer_a01fr_1",eo={SearchAndFilterFormContainer:Zt};function to({name:o,label:t,value:n}){var i;const s=P([A]);if(!n)return;const r=s||!_(n)||(i=K(n))==null?void 0:i.name;return r?{label:t??(o==null?void 0:o.toString()),value:r}:{label:t??(o==null?void 0:o.toString()),value:"(location type without name)"}}function oo({name:o,label:t,value:n}){var i;const s=P([I]);if(!n)return;const r=s||!_(n)||(i=Y(n))==null?void 0:i.name;return r?{label:t??(o==null?void 0:o.toString()),value:r}:{label:t??(o==null?void 0:o.toString()),value:"(planetary system without name)"}}function no(){return[{name:"planetarySystemUuid",label:"planetary system",formatLabelAndValue:oo},{name:"locationTypeUuid",label:"type",formatLabelAndValue:to}]}const ao=7,so="0";function io({value:o}){const t=a.useMemo(function(){return v(o)},[o]),n=a.useMemo(function(){if(t)return q(t,!1,ao,so)},[t]);return e.jsx(e.Fragment,{children:typeof n=="string"?n:e.jsx(ae,{children:"(no data)"})})}function ro({value:o}){var s;const n=P([A])||!_(o)||(s=K(o))==null?void 0:s.name;return n?e.jsx(e.Fragment,{children:n}):e.jsx(ae,{children:"(no type)"})}function lo({value:o}){var s;const n=P([I])||!_(o)||(s=Y(o))==null?void 0:s.name;return n?e.jsx(e.Fragment,{children:n}):e.jsx(ae,{children:"(no data)"})}function co({value:o,item:t}){const n=P([I,D]),s=t.uuid,r=n||!_(s)?void 0:St(s),i=r?r.planetarySystemUuid:void 0,l=n||!_(i)?void 0:Y(i),p=a.useMemo(function(){return v(o)},[o])&&se({locationId:r==null?void 0:r.id,locationName:r==null?void 0:r.name,planetarySystemName:l==null?void 0:l.name});return e.jsx(e.Fragment,{children:p?e.jsx(N,{href:p,title:"show location on map",children:e.jsx(Te,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no position data",children:e.jsx(ve,{})})})}const uo=o=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...o},a.createElement("path",{d:"M20.94 11A8.994 8.994 0 0 0 13 3.06V2c0-.55-.45-1-1-1s-1 .45-1 1v1.06A8.994 8.994 0 0 0 3.06 11H2c-.55 0-1 .45-1 1s.45 1 1 1h1.06A8.994 8.994 0 0 0 11 20.94V22c0 .55.45 1 1 1s1-.45 1-1v-1.06A8.994 8.994 0 0 0 20.94 13H22c.55 0 1-.45 1-1s-.45-1-1-1h-1.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})),Ie=a.memo(uo);function mo({value:o}){var r;const n=P([A])||!_(o)||(r=K(o))==null?void 0:r.name,s=le({locationTypeName:n});return e.jsx(e.Fragment,{children:s?e.jsx(N,{href:s,title:"search locations by type",children:e.jsx(Ie,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no location type data",children:e.jsx(He,{})})})}function yo({value:o}){var l;const n=P([I])||!_(o)||(l=Y(o))==null?void 0:l.name,s=se({planetarySystemName:n}),r=le({planetarySystemName:n}),i=ie({planetarySystemName:n});return e.jsxs(e.Fragment,{children:[s?e.jsx(N,{href:s,title:"show planetary system on map",children:e.jsx(Te,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no planetary systems data",children:e.jsx(ve,{})}),r?e.jsx(N,{href:r,title:"search locations in the planetary system",children:e.jsx(Ie,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no planetary system data",children:e.jsx(He,{})}),i?e.jsx(N,{href:i,title:"search by planetary system name in market",children:e.jsx(re,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search in market",children:e.jsx(W,{})})]})}function po(o,t){var i,l;const{isHydrating:n}=ft();if(n)return 0;const s=_(o)&&((i=K(o))==null?void 0:i.name)||"",r=_(t)&&((l=K(t))==null?void 0:l.name)||"";return s.localeCompare(r)}function ho(o,t){var i,l;const{isHydrating:n}=Tt();if(n)return 0;const s=_(o)&&((i=Y(o))==null?void 0:i.name)||"",r=_(t)&&((l=Y(t))==null?void 0:l.name)||"";return s.localeCompare(r)}function Ge(){return[{name:"uuid",isCheckbox:!0},{name:"id",asLinkToEditItem:!0,isSortable:!0,alignLabel:"center",uppercase:!0,monospaced:!0,nowrap:!0,isSearchCaseInsensitive:!0,formatValue:function({value:t}){return e.jsx(e.Fragment,{children:typeof t=="string"?t:e.jsx(ae,{children:"(no id)"})})},actionButtons:function({value:t}){const n=ie({locationId:t});return e.jsx(e.Fragment,{children:n?e.jsx(N,{href:n,title:"search by location id in market",children:e.jsx(re,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search in market",children:e.jsx(W,{})})})}},{name:"name",asLinkToEditItem:!0,isSortable:!0,alignLabel:"left",actionButtons:function({value:t}){const n=ie({locationName:t});return e.jsx(e.Fragment,{children:n?e.jsx(N,{href:n,title:"search by location name in market",children:e.jsx(re,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search in market",children:e.jsx(W,{})})})}},{name:"locationTypeUuid",label:"type",isSortable:!0,alignLabel:"left",formatValue:ro,actionButtons:mo,sortFn:po},{name:"position",isSortable:!0,alignLabel:"right",monospaced:!0,formatValue:io,actionButtons:co},{name:"planetarySystemUuid",label:"planetary system",isSortable:!0,sort:"asc",alignLabel:"right",formatValue:lo,actionButtons:yo,sortFn:ho}]}const So=a.memo(function({itemToDelete:t,onHideModal:n,onHideParentModal:s}){const r=P([D,I]),i=X([Ue]),l=r||i,c=D(S=>S.delete),p=a.useCallback(function(){n()},[n]),h=a.useCallback(function(){s()},[s]),y=a.useCallback(function(){l||(c(t),p(),h())},[t,p,h,c,l]),u=a.useMemo(function(){const C=ke(t.uuid)||"(location without full name)";return e.jsxs(e.Fragment,{children:["Are you sure you want"," ",e.jsx("strong",{children:"to delete"})," ","the location named",e.jsx("br",{}),e.jsx("strong",{children:C}),"?"]})},[t]);return e.jsx(Se,{title:u,onHide:p,onConfirm:y,confirmButtonLabel:"delete location"})});function Ne(o=[],t=[]){return[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"id",uppercase:!0},{name:"name",required:!0},{name:"locationTypeUuid",label:"type",type:"select",options:t,chooseOptionLabel:"choose a location type",noOptionsLabel:"no location types available",allowToSelectNoValueOption:!0},{name:"planetarySystemUuid",label:"planetary system",type:"select",options:o,chooseOptionLabel:"choose a planetary system",noOptionsLabel:"no planetary systems available",allowToSelectNoValueOption:!0},{name:"position"}]}const fo=a.memo(function({itemToEdit:t,filterValue:n,onHideModal:s,onShowDeleteItemConfirmation:r,onCreateItem:i,onUpdateItem:l}){const c=P([D,I]),p=X([Q,Ue]),h=c||p,y=D(L=>L.create),u=D(L=>L.update),S=a.useCallback(L=>{const g=y(L);typeof i=="function"&&i(g)},[y,i]),C=a.useCallback(L=>{const g=u(L);g&&typeof l=="function"&&l(g)},[u,l]),F=a.useCallback(()=>{s()},[s]),m=a.useCallback(L=>{var g,M;if(Le(L)){const b=J(L,jt);b.id=(M=b.id)==null?void 0:M.toLocaleUpperCase();const x=v(b.position);x&&(b.position=q(x)),C(b)}else{const b=J(L,At);b.entityType=we,b.id=(g=b.id)==null?void 0:g.toLocaleUpperCase();const x=v(b.position);x&&(b.position=q(x)),S(b)}F()},[S,C,F]),d=a.useCallback(function(g){if(h)return function(){return e.jsx("span",{children:"Loading..."})};const M=g.id;if(M){const b=Lt(g);if(b){const x=ke(b.uuid);return function(){return e.jsxs(e.Fragment,{children:["Location with Id:"," ",e.jsx("strong",{children:M})," ","(",x,")"," ","already exists"]})}}}if(g.position&&!v(g.position))return function(){return e.jsxs(e.Fragment,{children:["Position coordinates have incorrect data."," ",e.jsx("br",{}),"Example:"," ",e.jsx("strong",{children:"[ +100, -100, 0 ]"})," ","or"," ",e.jsx("strong",{children:"100,-100,0"})]})}},[h]),T=Q(L=>L.items),f=Z(L=>L.items),j=a.useMemo(function(){return h?Ne([],[]):Ne(T,f)},[T,f,h]),w=_t(j,n);return e.jsx(ge,{humanizedItemTypeName:"location",itemToEdit:t,formFields:w,validateFormData:d,onCancel:F,onSubmit:m,onDelete:r,deleteItemButtonLabel:"delete location"})}),me=(o,t)=>[{name:"planetarySystemUuid",label:"planetary system",type:"select",options:o,chooseOptionLabel:"choose a planetary system",noOptionsLabel:"no planetary system available",allowToSelectNoValueOption:!0,filterPredicate:(n,s)=>n.planetarySystemUuid===s.planetarySystemUuid},{name:"locationTypeUuid",label:"type",type:"select",options:t,chooseOptionLabel:"choose a location type",noOptionsLabel:"no location type available",allowToSelectNoValueOption:!0,filterPredicate:(n,s)=>n.locationTypeUuid===s.locationTypeUuid}],To=a.memo(function({filterValue:t,onSetFilterValue:n,onHide:s}){const r=P([I]),i=X([Q]),l=r||i,c=Q(S=>S.items),p=Z(S=>S.items),h=a.useMemo(function(){return l?me([],[]):me(c,p)},[c,l,p]),y=a.useCallback(function(){s()},[s]),u=a.useCallback(function(C){n(C),y()},[y,n]);return e.jsx(e.Fragment,{children:e.jsx("div",{style:{position:"absolute",top:0,right:0},children:e.jsx(It,{humanizedPluralItemTypeName:"locations",filterValue:t,formFields:h,onCancel:y,onFilter:u})})})}),Lo=[$,G];function _e(o){const t={planetarySystemName:o.get($)||void 0,locationTypeName:o.get(G)||void 0};return rt(t)}function go({filterValue:o}){var l,c;if(!o)return;const{planetarySystemName:t,locationTypeName:n,...s}=o,r=t?(l=gt(t))==null?void 0:l.uuid:void 0,i=n?(c=bt(n))==null?void 0:c.uuid:void 0;return{...s,planetarySystemUuid:r,locationTypeUuid:i}}function bo({urlSearchParams:o,setUrlSearchParams:t}){const n=P([I,A]),s=X([Q,Z]),r=n||s,i=a.useRef(void 0),l=a.useMemo(function(){const h=_e(o),y=go({filterValue:h}),u=i.current;return Ae(u,y)?(i.current=y,y):u},[o,i,r]),c=a.useCallback(function(h){let y;if(typeof h=="function")throw new Error("LocationValue as setState(prev=>newState) function not supported");h&&Object.keys(h).length>0&&(y=h),t(u=>{var F,m;const S=_e(u);if(Ae(S,y)){if(!y)return Lo.forEach(w=>{u.delete(w)}),u;const d=y.planetarySystemUuid,T=d?(F=Y(d))==null?void 0:F.name:void 0;T?u.set($,T):u.delete($);const f=y.locationTypeUuid,j=f?(m=K(f))==null?void 0:m.name:void 0;j?u.set(G,j):u.delete(G)}return u})},[t]);return{filterValue:l,setFilterValueToUrlSearchParams:c}}function Co({urlSearchParams:o,setUrlSearchParams:t}){return ye({urlSearchParams:o,setUrlSearchParams:t,getSearchValueFromUrlSearchParams:Oe,searchValueKeyInUrlSearchParams:je,searchFieldNameInSearchForm:je,searchFieldPlaceholderTextInSearchForm:"Search by location name or location id..."})}const Po=["name","planetarySystemUuid","locationTypeUuid","position"],Fo=["id","name"],Io=Ge().filter(o=>Fo.includes(o.name)),xo=a.memo(function({urlSearchParams:t,setUrlSearchParams:n}){const r=P([D,I,A]),{filterValue:i,setFilterValueToUrlSearchParams:l}=bo({urlSearchParams:t,setUrlSearchParams:n}),{searchFieldValue:c,SearchForm:p,resetSearchFieldValue:h}=Co({urlSearchParams:t,setUrlSearchParams:n}),y=D(fe(B=>B.items())),u=D(B=>B.deleteMultiple),[S,C]=a.useState(!1),[F,m]=a.useState(),[d,T]=a.useState(),f=a.useCallback(()=>{C(!0)},[C]),j=a.useCallback(()=>{m(void 0),C(!1)},[m,C]),w=a.useCallback(B=>{T(B)},[T]),L=a.useCallback(()=>{T(void 0)},[T]),g=a.useMemo(function(){return c?y.filter(ot=>!!Io.find(xe=>{let k=ot[xe.name];return xe.isSearchCaseInsensitive?(k=k==null?void 0:k.toLocaleLowerCase(),k==null?void 0:k.includes(c.toLocaleLowerCase())):k==null?void 0:k.includes(c)})):y},[c,y]),M=a.useMemo(function(){return me([],[])},[]),b=a.useMemo(function(){return no()},[]),{isAppliedFilter:x,enableFilter:V,disableFilter:ee}=Ot(i),te=Bt(g,M,x?i:void 0),R=a.useMemo(function(){return Ge()},[]),{sortedItems:H,columnsToSortBy:oe,handleColumnSortClick:ne}=be(te,R,Po),{selectedItemsUuids:z,handleResetSelectedItems:O,handleSelectAllItems:U,handleSelectItem:$e,handleShowDeleteMultipleSelectedItemsConfirmation:Ke,DeleteSelectedItemsConfirmation:qe}=Ce({itemTypeNamePlural:"locations",items:H,searchFieldValue:c,filterValue:i,deleteItemsByUuids:u,setItemToDelete:T}),Qe=a.useCallback(function(){l(void 0)},[l]),{lastCreatedOrUpdatedItem:Je,onCreateItem:Xe,onUpdateItem:Ze}=Pe({itemEntityType:we,items:H,searchFieldValue:c,filterValue:i,resetSearchFieldValue:h,resetFilterValue:Qe}),{isVisible:et,show:tt,hide:ce}=ut(!1);return a.useEffect(function(){(i||!i)&&ce()},[i,ce]),e.jsxs(Fe,{children:[e.jsxs("div",{className:eo.SearchAndFilterFormContainer,children:[p,e.jsxs(E,{onClick:tt,title:"show filter form",children:[e.jsx(Ut,{}),e.jsx("span",{children:"filter"})]}),et&&e.jsx(To,{filterValue:i,onSetFilterValue:l,onHide:ce})]}),e.jsx(pe,{tableTitle:"locations",tableColumns:R,items:H,noItemsLabel:"no locations",isLoading:r,showCreateItemModalButtonLabel:"add location",onShowCreateItemModal:f,columnsToSortBy:oe,onColumnHeaderClick:ne,selectedItemsUuids:z,onResetSelectedItems:O,onSelectAllItems:U,onDeleteSelectedItems:Ke,searchFieldValue:c,filterValue:i,isAppliedFilter:x,onEnableFilter:V,onDisableFilter:ee,filterInfoFields:b,children:e.jsx(he,{items:H,columns:R,selectedItemsUuids:z,onEditItem:m,onSelectItem:$e,lastCreatedOrUpdatedItem:Je})}),(S||!!F)&&e.jsx(fo,{itemToEdit:F,filterValue:i,onHideModal:j,onShowDeleteItemConfirmation:w,onCreateItem:Xe,onUpdateItem:Ze}),!!d&&e.jsx(So,{onHideModal:L,onHideParentModal:j,itemToDelete:d}),e.jsx(qe,{})]})}),Ao=o=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...o},a.createElement("path",{d:"M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55l1.33.26zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83L11.17 17zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81l-.26-1.33zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.3 2 22 2 22s.7-4.94 1.88-6.12A2.996 2.996 0 0 1 9 18zm4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"})),jo=a.memo(Ao),Mo=0,Eo="0";function No({value:o}){const t=a.useMemo(function(){return v(o)},[o]),n=a.useMemo(function(){if(t)return q(t,!1,Mo,Eo)},[t]);return e.jsx(e.Fragment,{children:typeof n=="string"?n:e.jsx(ae,{children:"(no data)"})})}function _o(){return[{name:"uuid",isCheckbox:!0},{name:"name",asLinkToEditItem:!0,isSortable:!0,sort:"asc",alignLabel:"left",actionButtons:function({item:t}){const n=le({planetarySystemName:t==null?void 0:t.name}),s=wt({planetarySystemName:t==null?void 0:t.name}),r=ie({planetarySystemName:t==null?void 0:t.name});return e.jsxs(e.Fragment,{children:[s?e.jsx(N,{href:s,title:"search moving objects in the planetary system",children:e.jsx(jo,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(W,{})}),n?e.jsx(N,{href:n,title:"search locations in the planetary system",children:e.jsx(Ie,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(W,{})}),r?e.jsx(N,{href:r,title:"search orders in market",children:e.jsx(re,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(W,{})})]})}},{name:"position",isSortable:!0,monospaced:!0,formatValue:No,actionButtons:function({item:t}){const n=v(t.position),s=se({planetarySystemName:t==null?void 0:t.name}),r=n&&se({planetarySystemName:t==null?void 0:t.name,mapMode:Mt});return e.jsxs(e.Fragment,{children:[s?e.jsx(N,{href:s,title:"show on map what the planetary system contains",children:e.jsx(kt,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(Me,{})}),r?e.jsx(N,{href:r,title:"show planetary system on map",children:e.jsx(Te,{})}):e.jsx(E,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search",children:e.jsx(Me,{})})]})}}]}const Oo=a.memo(function({itemToDelete:t,onHideModal:n,onHideParentModal:s}){const i=P([I]),l=I(u=>u.delete),c=a.useCallback(function(){n()},[n]),p=a.useCallback(function(){s()},[s]),h=a.useCallback(function(){i||(l(t),c(),p())},[l,t,c,p,i]),y=a.useMemo(()=>e.jsxs(e.Fragment,{children:["Are you sure you want"," ",e.jsx("strong",{children:"to delete"}),e.jsx("br",{}),"the planetary system named"," ",e.jsx("strong",{children:t.name}),"?"]}),[t]);return e.jsx(Se,{title:y,onHide:c,onConfirm:h,confirmButtonLabel:"delete planetary system"})}),Bo=[{name:"uuid",type:"hidden"},{name:"entityType",type:"hidden"},{name:"name",required:!0},{name:"position"}],Uo=a.memo(function({itemToEdit:t,onHideModal:n,onShowDeleteItemConfirmation:s,onCreateItem:r,onUpdateItem:i}){const c=P([I]),p=I(m=>m.create),h=I(m=>m.update),y=a.useCallback(m=>{const d=p(m);typeof r=="function"&&r(d)},[p,r]),u=a.useCallback(m=>{const d=h(m);d&&typeof i=="function"&&i(d)},[h,i]),S=a.useCallback(()=>{n()},[n]),C=a.useCallback(m=>{if(Le(m)){const d=J(m,Nt);d.name=d.name.toLocaleLowerCase();const T=v(d.position);T&&(d.position=q(T)),u(d)}else{const d=J(m,Et);d.entityType=De,d.name=d.name.toLocaleLowerCase();const T=v(d.position);T&&(d.position=q(T)),y(d)}S()},[y,u,S]),F=a.useCallback(m=>{if(c)return function(){return e.jsx("span",{children:"Loading..."})};const d=Ct(m);if(d)return function(){return e.jsxs(e.Fragment,{children:["Planetary system"," ",e.jsx("strong",{children:d.name})," ","already exists"]})};if(!m.position)return;const f=Pt(m);if(f)return function(){return e.jsxs(e.Fragment,{children:["Planetary system with position"," ",e.jsx("strong",{children:f.position})," ","(named"," ",e.jsx("strong",{children:f.name})," ",") already exists"]})}},[c]);return e.jsx(ge,{humanizedItemTypeName:"planetary system",itemToEdit:t,formFields:Bo,validateFormData:F,onCancel:S,onSubmit:C,onDelete:s,deleteItemButtonLabel:"delete planetary system"})});function ko({urlSearchParams:o,setUrlSearchParams:t}){return ye({urlSearchParams:o,setUrlSearchParams:t,getSearchValueFromUrlSearchParams:Be,searchValueKeyInUrlSearchParams:$,searchFieldNameInSearchForm:$,searchFieldPlaceholderTextInSearchForm:"Search by planetary system name..."})}const wo=["name","position"],Do=a.memo(function({urlSearchParams:t,setUrlSearchParams:n}){const s=P([I]),r=X([Q]),i=s||r,[l,c]=a.useState(!1),[p,h]=a.useState(),[y,u]=a.useState(),S=I(fe(U=>U.items())),C=I(U=>U.deleteMultiple),F=a.useCallback(()=>{c(!0)},[c]),m=a.useCallback(()=>{h(void 0),c(!1)},[h,c]),d=a.useCallback(U=>{u(U)},[u]),T=a.useCallback(()=>{u(void 0)},[u]),{searchFieldValue:f,SearchForm:j,resetSearchFieldValue:w}=ko({urlSearchParams:t,setUrlSearchParams:n}),L=a.useMemo(()=>f?S.filter(({name:U})=>U.includes(f)):S,[f,S]),g=a.useMemo(function(){return _o()},[]),{sortedItems:M,columnsToSortBy:b,handleColumnSortClick:x}=be(L,g,wo),{selectedItemsUuids:V,handleResetSelectedItems:ee,handleSelectAllItems:te,handleSelectItem:R,handleShowDeleteMultipleSelectedItemsConfirmation:H,DeleteSelectedItemsConfirmation:oe}=Ce({itemTypeNamePlural:"planetary systems",items:M,searchFieldValue:f,deleteItemsByUuids:C,setItemToDelete:u}),{lastCreatedOrUpdatedItem:ne,onCreateItem:z,onUpdateItem:O}=Pe({itemEntityType:De,items:M,searchFieldValue:f,resetSearchFieldValue:w});return e.jsxs(Fe,{children:[j,e.jsx(pe,{tableTitle:"planetary systems",tableColumns:g,items:M,noItemsLabel:"no planetary systems",isLoading:i,showCreateItemModalButtonLabel:"add planetary system",onShowCreateItemModal:F,columnsToSortBy:b,onColumnHeaderClick:x,selectedItemsUuids:V,onResetSelectedItems:ee,onSelectAllItems:te,onDeleteSelectedItems:H,searchFieldValue:f,children:e.jsx(he,{items:M,columns:g,selectedItemsUuids:V,onEditItem:h,onSelectItem:R,lastCreatedOrUpdatedItem:ne})}),(l||!!p)&&e.jsx(Uo,{itemToEdit:p,onHideModal:m,onShowDeleteItemConfirmation:d,onCreateItem:z,onUpdateItem:O}),!!y&&e.jsx(Oo,{onHideModal:T,onHideParentModal:m,itemToDelete:y}),e.jsx(oe,{})]})});function vo(o){const t=a.useMemo(()=>Be(o),[o]),n=a.useMemo(()=>Oe(o),[o]);return a.useMemo(function(){return ct(qt({locationName:n,planetarySystemName:t}))},[n,t])}function Ho(){const{urlSearchParams:o,setUrlSearchParams:t}=lt(),n=vo(o);return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:n}),e.jsx(dt,{children:e.jsxs("div",{className:ue.Container,children:[e.jsxs("div",{className:ue.TableGroups,children:[e.jsx(Do,{urlSearchParams:o,setUrlSearchParams:t}),e.jsx(Kt,{urlSearchParams:o,setUrlSearchParams:t})]}),e.jsx("div",{className:ue.MainTable,children:e.jsx(xo,{urlSearchParams:o,setUrlSearchParams:t})})]})})]})}const rn=nt(function(){return e.jsx(Ho,{})});export{rn as default};
