import{N as P,L as p,ar as j,a3 as A,w as y,J as m,K as b,O as N,y as _,z as B,I as s,B as d,as as I}from"./useLoadingPersistStorages-BWX3nPU9.js";import{b as E,d as O,f as F}from"./getUrlToMapPageWithParams-gLmSAaLz.js";import{q as R,r as W,i as g,N as h}from"./useTableSearch-Ui5oQRZ2.js";import{q as e}from"./chunk-PVWAREVJ-D1PIyzeh.js";import{I as u}from"./InternalStaticLink-rDmjTW4d.js";import{g as S}from"./getUrlToMarketPageWithParams-DdYQKoX-.js";import{g as D}from"./getUrlToProductsPageWithParams-CN44cusc.js";const w="buy-order",k=["uuid","entityType","productUuid","locationUuid","price","desirableQuantity"],Z=P(k);function $(t){return t?.entityType===w}const M="sell-order",H=["uuid","entityType","productUuid","locationUuid","price","availableQuantity"],tt=P(H);function et(t){return t?.entityType===M}const T=R();function x(){const{isHydrating:t,isHydrated:o}=p.getState();if(t||!o)return;const r=j();Y({productsMap:r})}T.setState({prepareData:x});p.subscribe(function(){x()});function Y({productsMap:t}){const o=T.getState();o.isProcessing||(o.setIsProcessing(!0),window.setTimeout(function(){const n=Q({productsMap:t});o.replaceAll(n),o.setIsProcessing(!1)},0))}function C(t,o=!1,r){const a=t?.name??"(product without name)",n=E([a]),i=o?W(a,"product"):n;return{productNameWithId:n,productNameWithIdAsLabel:i}}function q({productsMap:t,shouldAddSuffixLabel:o=!1}){const r=[];return A(t).forEach(function(i){const c=i.uuid,{productNameWithId:l,productNameWithIdAsLabel:f}=C(i,o);r.push({uuid:c,name:l,label:f})}),r}function L(t){t.sort((o,r)=>o.name.localeCompare(r.name)),t.forEach(({items:o})=>L(o??[]))}function U({items:t=[],level:o=0,disableOptionsWithoutUuid:r=!0,selectOptions:a=new Array}){return t.forEach(n=>{const{label:i,items:c}=n,l=n.uuid,f=l??"";a.push({value:f,label:i,level:o,disabled:r?!l:!1}),c?.length&&U({items:c,level:o+1,disableOptionsWithoutUuid:r,selectOptions:a})}),a}function Q({productsMap:t,disableOptionsWithoutUuid:o}){const r=q({productsMap:t,shouldAddSuffixLabel:!1});return L(r),U({items:r,disableOptionsWithoutUuid:o})??[]}function rt({value:t}){return e.jsx(e.Fragment,{children:typeof t=="number"?t.toFixed(2):0 .toFixed(2)})}function ot({value:t}){const r=y([p])||!g(t)?void 0:m(t);return r?.name?e.jsx(e.Fragment,{children:r.name}):e.jsx(h,{children:"(noÂ data)"})}function at({value:t}){return e.jsx(e.Fragment,{children:typeof t=="number"&&t>0?t:e.jsx(h,{children:"0"})})}function nt({item:t}){const o=y([b,N]),r=o?void 0:_(t.locationUuid),a=!o&&r?.planetarySystemUuid?B(r?.planetarySystemUuid):void 0,n=O({locationId:r?.id,locationName:r?.name,planetarySystemName:a?.name}),i=F({locationId:r?.id,locationName:r?.name,planetarySystemName:a?.name}),c=a&&S({locationId:r?.id,locationName:r?.name,planetarySystemName:a?.name});return e.jsxs(e.Fragment,{children:[n?e.jsx(u,{to:n,title:"show location info",children:e.jsx(s,{name:"info"})}):e.jsx(d,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no location data",children:e.jsx(s,{name:"location_disabled"})}),i?e.jsx(u,{to:i,title:"show location on map",children:e.jsx(s,{name:"location_on"})}):e.jsx(d,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no position data",children:e.jsx(s,{name:"location_off"})}),c?e.jsx(u,{to:c,title:"search by location in market",children:e.jsx(s,{name:"query_stats"})}):e.jsx(d,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search in market",children:e.jsx(s,{name:"search_off"})})]})}function st({item:t}){const r=y([p])?void 0:m(t.productUuid)?.name,a=S({productName:r}),n=D({productName:r});return e.jsxs(e.Fragment,{children:[n?e.jsx(u,{to:n,title:"show product info",children:e.jsx(s,{name:"info"})}):e.jsx(d,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search in products",children:e.jsx(s,{name:"search_off"})}),a?e.jsx(u,{to:a,title:"search by product name in market",children:e.jsx(s,{name:"query_stats"})}):e.jsx(d,{disabled:!0,noBorder:!0,noPadding:!0,transparent:!0,title:"no data for search in market",children:e.jsx(s,{name:"search_off"})})]})}function it(t,o){if(I())return 0;const a=g(t)&&m(t)?.name||"",n=g(o)&&m(o)?.name||"";return a.localeCompare(n)}export{Z as B,w as E,ot as F,nt as L,st as P,tt as S,$ as a,k as b,M as c,at as d,rt as e,H as f,et as i,it as s,T as u};
