import{p as w,a as A}from"./chunk-NL6KNZEE-DW-9pLwI.js";import{c as ge,a as _e,p as ct}from"./middleware-Bi7dsOsO.js";const Pe=e=>e.filter(t=>!!t).join(" ");function ut(e){return e.filter(t=>t!=="uuid")}const $="notification",lt=["uuid","entityType","type","tags","title","messages","hideTimeout"];ut(lt);function L(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function Oe(e,t){let r;const n=()=>{if(r)return r;const o=indexedDB.open(e);return o.onupgradeneeded=()=>o.result.createObjectStore(t),r=L(o),r.then(s=>{s.onclose=()=>r=void 0},()=>{}),r};return(o,s)=>n().then(i=>s(i.transaction(t,o).objectStore(t)))}let G;function ne(){return G||(G=Oe("keyval-store","keyval")),G}function dt(e,t=ne()){return t("readonly",r=>L(r.get(e)))}function ft(e,t,r=ne()){return r("readwrite",n=>(n.put(t,e),L(n.transaction)))}function gt(e,t=ne()){return t("readwrite",r=>(r.delete(e),L(r.transaction)))}class yt{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(t,r){this.keyToValue.set(t,r),this.valueToKey.set(r,t)}getByKey(t){return this.keyToValue.get(t)}getByValue(t){return this.valueToKey.get(t)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class be{constructor(t){this.generateIdentifier=t,this.kv=new yt}register(t,r){this.kv.getByValue(t)||(r||(r=this.generateIdentifier(t)),this.kv.set(r,t))}clear(){this.kv.clear()}getIdentifier(t){return this.kv.getByValue(t)}getValue(t){return this.kv.getByKey(t)}}class mt extends be{constructor(){super(t=>t.name),this.classToAllowedProps=new Map}register(t,r){typeof r=="object"?(r.allowProps&&this.classToAllowedProps.set(t,r.allowProps),super.register(t,r.identifier)):super.register(t,r)}getAllowedProps(t){return this.classToAllowedProps.get(t)}}function pt(e){if("values"in Object)return Object.values(e);const t=[];for(const r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}function St(e,t){const r=pt(e);if("find"in r)return r.find(t);const n=r;for(let o=0;o<n.length;o++){const s=n[o];if(t(s))return s}}function b(e,t){Object.entries(e).forEach(([r,n])=>t(n,r))}function N(e,t){return e.indexOf(t)!==-1}function ye(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(t(n))return n}}class wt{constructor(){this.transfomers={}}register(t){this.transfomers[t.name]=t}findApplicable(t){return St(this.transfomers,r=>r.isApplicable(t))}findByName(t){return this.transfomers[t]}}const Et=e=>Object.prototype.toString.call(e).slice(8,-1),Be=e=>typeof e>"u",It=e=>e===null,R=e=>typeof e!="object"||e===null||e===Object.prototype?!1:Object.getPrototypeOf(e)===null?!0:Object.getPrototypeOf(e)===Object.prototype,J=e=>R(e)&&Object.keys(e).length===0,h=e=>Array.isArray(e),At=e=>typeof e=="string",ht=e=>typeof e=="number"&&!isNaN(e),Tt=e=>typeof e=="boolean",_t=e=>e instanceof RegExp,v=e=>e instanceof Map,M=e=>e instanceof Set,Re=e=>Et(e)==="Symbol",Pt=e=>e instanceof Date&&!isNaN(e.valueOf()),Ot=e=>e instanceof Error,me=e=>typeof e=="number"&&isNaN(e),bt=e=>Tt(e)||It(e)||Be(e)||ht(e)||At(e)||Re(e),Bt=e=>typeof e=="bigint",Rt=e=>e===1/0||e===-1/0,vt=e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),Mt=e=>e instanceof URL,ve=e=>e.replace(/\./g,"\\."),K=e=>e.map(String).map(ve).join("."),B=e=>{const t=[];let r="";for(let o=0;o<e.length;o++){let s=e.charAt(o);if(s==="\\"&&e.charAt(o+1)==="."){r+=".",o++;continue}if(s==="."){t.push(r),r="";continue}r+=s}const n=r;return t.push(n),t};function S(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}const Me=[S(Be,"undefined",()=>null,()=>{}),S(Bt,"bigint",e=>e.toString(),e=>typeof BigInt<"u"?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),S(Pt,"Date",e=>e.toISOString(),e=>new Date(e)),S(Ot,"Error",(e,t)=>{const r={name:e.name,message:e.message};return t.allowedErrorProps.forEach(n=>{r[n]=e[n]}),r},(e,t)=>{const r=new Error(e.message);return r.name=e.name,r.stack=e.stack,t.allowedErrorProps.forEach(n=>{r[n]=e[n]}),r}),S(_t,"regexp",e=>""+e,e=>{const t=e.slice(1,e.lastIndexOf("/")),r=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,r)}),S(M,"set",e=>[...e.values()],e=>new Set(e)),S(v,"map",e=>[...e.entries()],e=>new Map(e)),S(e=>me(e)||Rt(e),"number",e=>me(e)?"NaN":e>0?"Infinity":"-Infinity",Number),S(e=>e===0&&1/e===-1/0,"number",()=>"-0",Number),S(Mt,"URL",e=>e.toString(),e=>new URL(e))];function x(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}const Ue=x((e,t)=>Re(e)?!!t.symbolRegistry.getIdentifier(e):!1,(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,r)=>{const n=r.symbolRegistry.getValue(t[1]);if(!n)throw new Error("Trying to deserialize unknown symbol");return n}),Ut=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),Ce=x(vt,e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{const r=Ut[t[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(e)});function Ne(e,t){return e!=null&&e.constructor?!!t.classRegistry.getIdentifier(e.constructor):!1}const De=x(Ne,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{const r=t.classRegistry.getAllowedProps(e.constructor);if(!r)return{...e};const n={};return r.forEach(o=>{n[o]=e[o]}),n},(e,t,r)=>{const n=r.classRegistry.getValue(t[1]);if(!n)throw new Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),e)}),Le=x((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,r)=>{const n=r.customTransformerRegistry.findByName(t[1]);if(!n)throw new Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),Ct=[De,Ue,Le,Ce],pe=(e,t)=>{const r=ye(Ct,o=>o.isApplicable(e,t));if(r)return{value:r.transform(e,t),type:r.annotation(e,t)};const n=ye(Me,o=>o.isApplicable(e,t));if(n)return{value:n.transform(e,t),type:n.annotation}},xe={};Me.forEach(e=>{xe[e.annotation]=e});const Nt=(e,t,r)=>{if(h(t))switch(t[0]){case"symbol":return Ue.untransform(e,t,r);case"class":return De.untransform(e,t,r);case"custom":return Le.untransform(e,t,r);case"typed-array":return Ce.untransform(e,t,r);default:throw new Error("Unknown transformation: "+t)}else{const n=xe[t];if(!n)throw new Error("Unknown transformation: "+t);return n.untransform(e,r)}},P=(e,t)=>{if(t>e.size)throw new Error("index out of bounds");const r=e.keys();for(;t>0;)r.next(),t--;return r.next().value};function Fe(e){if(N(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(N(e,"prototype"))throw new Error("prototype is not allowed as a property");if(N(e,"constructor"))throw new Error("constructor is not allowed as a property")}const Dt=(e,t)=>{Fe(t);for(let r=0;r<t.length;r++){const n=t[r];if(M(e))e=P(e,+n);else if(v(e)){const o=+n,s=+t[++r]==0?"key":"value",i=P(e,o);switch(s){case"key":e=i;break;case"value":e=e.get(i);break}}else e=e[n]}return e},Z=(e,t,r)=>{if(Fe(t),t.length===0)return r(e);let n=e;for(let s=0;s<t.length-1;s++){const i=t[s];if(h(n)){const a=+i;n=n[a]}else if(R(n))n=n[i];else if(M(n)){const a=+i;n=P(n,a)}else if(v(n)){if(s===t.length-2)break;const u=+i,d=+t[++s]==0?"key":"value",l=P(n,u);switch(d){case"key":n=l;break;case"value":n=n.get(l);break}}}const o=t[t.length-1];if(h(n)?n[+o]=r(n[+o]):R(n)&&(n[o]=r(n[o])),M(n)){const s=P(n,+o),i=r(s);s!==i&&(n.delete(s),n.add(i))}if(v(n)){const s=+t[t.length-2],i=P(n,s);switch(+o==0?"key":"value"){case"key":{const u=r(i);n.set(u,n.get(i)),u!==i&&n.delete(i);break}case"value":{n.set(i,r(n.get(i)));break}}}return e};function Q(e,t,r=[]){if(!e)return;if(!h(e)){b(e,(s,i)=>Q(s,t,[...r,...B(i)]));return}const[n,o]=e;o&&b(o,(s,i)=>{Q(s,t,[...r,...B(i)])}),t(n,r)}function Lt(e,t,r){return Q(t,(n,o)=>{e=Z(e,o,s=>Nt(s,n,r))}),e}function xt(e,t){function r(n,o){const s=Dt(e,B(o));n.map(B).forEach(i=>{e=Z(e,i,()=>s)})}if(h(t)){const[n,o]=t;n.forEach(s=>{e=Z(e,B(s),()=>e)}),o&&b(o,r)}else b(t,r);return e}const Ft=(e,t)=>R(e)||h(e)||v(e)||M(e)||Ne(e,t);function kt(e,t,r){const n=r.get(e);n?n.push(t):r.set(e,[t])}function Ht(e,t){const r={};let n;return e.forEach(o=>{if(o.length<=1)return;t||(o=o.map(a=>a.map(String)).sort((a,u)=>a.length-u.length));const[s,...i]=o;s.length===0?n=i.map(K):r[K(s)]=i.map(K)}),n?J(r)?[n]:[n,r]:J(r)?void 0:r}const ke=(e,t,r,n,o=[],s=[],i=new Map)=>{const a=bt(e);if(!a){kt(e,o,t);const m=i.get(e);if(m)return n?{transformedValue:null}:m}if(!Ft(e,r)){const m=pe(e,r),y=m?{transformedValue:m.value,annotations:[m.type]}:{transformedValue:e};return a||i.set(e,y),y}if(N(s,e))return{transformedValue:null};const u=pe(e,r),d=(u==null?void 0:u.value)??e,l=h(d)?[]:{},E={};b(d,(m,y)=>{if(y==="__proto__"||y==="constructor"||y==="prototype")throw new Error(`Detected property ${y}. This is a prototype pollution risk, please remove it from your object.`);const T=ke(m,t,r,n,[...o,y],[...s,e],i);l[y]=T.transformedValue,h(T.annotations)?E[y]=T.annotations:R(T.annotations)&&b(T.annotations,(j,at)=>{E[ve(y)+"."+at]=j})});const _=J(E)?{transformedValue:l,annotations:u?[u.type]:void 0}:{transformedValue:l,annotations:u?[u.type,E]:E};return a||i.set(e,_),_};function He(e){return Object.prototype.toString.call(e).slice(8,-1)}function Se(e){return He(e)==="Array"}function Vt(e){if(He(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}function qt(e,t,r,n,o){const s={}.propertyIsEnumerable.call(n,t)?"enumerable":"nonenumerable";s==="enumerable"&&(e[t]=r),o&&s==="nonenumerable"&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function ee(e,t={}){if(Se(e))return e.map(o=>ee(o,t));if(!Vt(e))return e;const r=Object.getOwnPropertyNames(e),n=Object.getOwnPropertySymbols(e);return[...r,...n].reduce((o,s)=>{if(Se(t.props)&&!t.props.includes(s))return o;const i=e[s],a=ee(i,t);return qt(o,s,a,e,t.nonenumerable),o},{})}class c{constructor({dedupe:t=!1}={}){this.classRegistry=new mt,this.symbolRegistry=new be(r=>r.description??""),this.customTransformerRegistry=new wt,this.allowedErrorProps=[],this.dedupe=t}serialize(t){const r=new Map,n=ke(t,r,this,this.dedupe),o={json:n.transformedValue};n.annotations&&(o.meta={...o.meta,values:n.annotations});const s=Ht(r,this.dedupe);return s&&(o.meta={...o.meta,referentialEqualities:s}),o}deserialize(t){const{json:r,meta:n}=t;let o=ee(r);return n!=null&&n.values&&(o=Lt(o,n.values,this)),n!=null&&n.referentialEqualities&&(o=xt(o,n.referentialEqualities)),o}stringify(t){return JSON.stringify(this.serialize(t))}parse(t){return this.deserialize(JSON.parse(t))}registerClass(t,r){this.classRegistry.register(t,r)}registerSymbol(t,r){this.symbolRegistry.register(t,r)}registerCustom(t,r){this.customTransformerRegistry.register({name:r,...t})}allowErrorProps(...t){this.allowedErrorProps.push(...t)}}c.defaultInstance=new c;c.serialize=c.defaultInstance.serialize.bind(c.defaultInstance);c.deserialize=c.defaultInstance.deserialize.bind(c.defaultInstance);c.stringify=c.defaultInstance.stringify.bind(c.defaultInstance);c.parse=c.defaultInstance.parse.bind(c.defaultInstance);c.registerClass=c.defaultInstance.registerClass.bind(c.defaultInstance);c.registerSymbol=c.defaultInstance.registerSymbol.bind(c.defaultInstance);c.registerCustom=c.defaultInstance.registerCustom.bind(c.defaultInstance);c.allowErrorProps=c.defaultInstance.allowErrorProps.bind(c.defaultInstance);c.serialize;c.deserialize;c.stringify;c.parse;c.registerClass;c.registerCustom;c.registerSymbol;c.allowErrorProps;const Ve="trader-db-name",zt=Number.parseInt("2",10)||1,qe="trader-object-store-name",W=Oe(Ve,qe);function jt(){return{getItem:async e=>{const t=await dt(e,W);return t?c.parse(t):null},setItem:async(e,t)=>{await ft(e,c.stringify(t),W)},removeItem:async e=>{await gt(e,W)}}}async function $t(e,t,r){return new Promise((n,o)=>{const s=indexedDB.open(e,t);s.onerror=function(a){const u="Error. Opening connection to indexedDB is failed";console.error(u,a),o(u)},s.onsuccess=function(){const a=s.result;n(a)},s.onupgradeneeded=function(a){var d;const u=(d=a.target)==null?void 0:d.result;if(!u){const l="Error. Opening connection to indexedDB is failed";console.error(l,a),o(l);return}u.onerror=l=>{o(l)};try{return u.createObjectStore(r)}catch(l){console.error(l),o(l)}}})}async function oe(e,t,r,n){const s=(await $t(e,t,r)).transaction([r],n);return s.oncomplete=()=>{},s.onerror=i=>{const a="Error. Transaction creation is failed";throw console.error(a,s.error,i),new Error(a)},s}function Gt(e){return new Promise((t,r)=>{const n=e.clear();n.onerror=o=>{const s="Error. Object store clearing is failed";console.error(s,o),r(s)},n.onsuccess=()=>{t("Success: Object store cleared")}})}async function un(e,t,r){try{const o=(await oe(e,t,r,"readwrite")).objectStore(r);await Gt(o)}catch(n){const o="Error. Impossible to clear indexedDB";return(n==null?void 0:n.name)==="NotFoundError"?"Error. IndexedDB is empty":(console.error(o,n),`${o}. ${n}`)}}async function Kt(e){return new Promise((t,r)=>{const n=e.openCursor(),o={};n.onerror=s=>{const i="Error. objectStoreRequest failed";console.error(i,s),r({error:i})},n.onsuccess=s=>{var a;const i=(a=s.target)==null?void 0:a.result;if(i){const u=i.key,d=i.value;o[u]=d,i.continue()}else t({result:o})}})}async function ln(e,t,r){try{const o=(await oe(e,t,r,"readwrite")).objectStore(r),{error:s,result:i}=await Kt(o);if(s)throw new Error(s);return{indexDBState:i}}catch(n){const o="Error. Impossible to read all records from indexedDB";return(n==null?void 0:n.name)==="NotFoundError"?{indexDBState:void 0,error:void 0}:(console.error(o,n),{error:`${o}. ${n}`})}}async function Wt(e,t,r){return new Promise((n,o)=>{const s=e.put(r,t);s.onerror=i=>{const a="Error. objectStoreRequest failed";console.error(a,i),o(a)},s.onsuccess=()=>{n(void 0)}})}async function Xt(e,t,r,n){try{const s=(await oe(e,t,r,"readwrite")).objectStore(r);Object.entries(n).forEach(([i,a])=>{Wt(s,i,a)})}catch(o){return console.error(o),`${o}`}}const F="gzip",we="trader_",O="json",se="gz",ze="application/octet-stream",ie=`${O}.${se}`;function je(e){const t=e.name.split(".");let r=t.pop();return r===se&&(r=[t.pop(),r].join(".")),r}function dn(e,t){const r=je(e);return r?t.includes(`.${r}`):!1}async function Yt(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n),n.onerror=o=>r(o),n.readAsArrayBuffer(e)})}async function Jt(e){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n),n.onerror=o=>r(o),n.readAsText(e)})}function Ee(){return new Date().toISOString().replaceAll(":","-").replaceAll("T","_").replaceAll(/\.\d{3}Z/g,"")}function $e(e,t){const r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function Zt(e,t){const r="data:text/plain;charset=utf-8,"+encodeURIComponent(t);$e(e,r)}function Qt(e,t,r=ze){const n=window.URL.createObjectURL(new Blob([t],{type:r}));$e(e,n)}function er(e){return c.stringify(e)}async function fn(e){try{const t=er(e),r=await tr(t,F);if(r){const o=`${we}${Ee()}.${ie}`;Qt(o,r,ze);return}const n=`${we}${Ee()}.${O}`;Zt(n,t)}catch(t){return console.error(t),t}}function tr(e,t=F){try{const r=new TextEncoder().encode(e),n=new CompressionStream(t),o=n.writable.getWriter();return o.write(r),o.close(),new Response(n.readable).arrayBuffer()}catch(r){console.error(r);return}}function rr(e,t=F){try{const r=new DecompressionStream(t),n=r.writable.getWriter();return n.write(e),n.close(),new Response(r.readable).arrayBuffer().then(o=>new TextDecoder().decode(o))}catch(r){console.error(r);return}}function nr(e){return c.parse(e)}async function or(e){let t;const r=je(e);if(r===ie){const n=(await Yt(e)).result;if(t=await rr(n,F),!t){const o=`Upload file error. Impossible to decompress file (${O}.${se} format)`;throw new Error(o)}}else if(r===O){if(t=(await Jt(e)).result,!t){const n=`Upload file error. Impossible to read file (${O} format)`;throw new Error(n)}}else{const n="Upload file error. Unsupported file format";throw new Error(n)}return t}const sr=[`.${O}`,`.${ie}`],gn=sr.join(", ");async function ir(e){try{const t=nr(e);if(!t)return"Upload file error. Impossible to read json data from the file";if(await Xt(Ve,zt,qe,t))return"Upload file error. Impossible set data into indexedBD"}catch(t){return console.error(t),`Upload file error. ${t}`}}function ar(e,t=""){const r=e.replace(/^[^/]*\//,"");return new Promise((n,o)=>{fetch(e).then(async function(i){const a=await i.blob(),u=new File([a],r,{type:t});n({file:u,error:void 0})}).catch(function(i){o({file:void 0,error:i})})})}function cr(e){return Number.isFinite(e)}function ur(){return{getItem:e=>{const t=window.localStorage.getItem(e);return t?c.parse(t):null},setItem:(e,t)=>{window.localStorage.setItem(e,c.stringify(t))},removeItem:e=>window.localStorage.removeItem(e)}}function lr(){return{getItem:e=>{const t=window.sessionStorage.getItem(e);return t?c.parse(t):null},setItem:(e,t)=>{window.sessionStorage.setItem(e,c.stringify(t))},removeItem:e=>window.sessionStorage.removeItem(e)}}const dr="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let fr=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=dr[r[e]&63];return t};const D=()=>fr();function f(e){return Array.from(e.keys())}function k(e){return Array.from(e.values())}const gr=e=>{if(typeof window>"u")return e;const t=r=>{r.key===e.persist.getOptions().name&&r.newValue&&e.persist.rehydrate()};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},Ie=0;function Ae(){return new Date().getTime()}function yr(e){const t=k(e);if(t.length)return t.reduce((r,n)=>n.createdAt<r.createdAt?n:r,t[0])}function mr(e,t=1){const r=k(e);return r.length?(r.sort((n,o)=>n.createdAt-o.createdAt),r.slice(0,t)):[]}function pr(e){return _e({uuids:Array(),entities:new Map,isHydrated:!1,isHydrating:!1},(t,r)=>({items(){return k(r().entities)},getByUuid(n){return r().entities.get(n)},create(n){const o={...n,uuid:D(),createdAt:Ae()};return t(s=>{const i=new Map(s.entities);if(i.set(o.uuid,o),i.size>=e){const a=yr(i);if(!a)return{entities:i,uuids:f(i)};i.delete(a.uuid)}return{entities:i,uuids:f(i)}}),o},update(n){const s=r().entities.get(n.uuid);if(!s)return;const a={...s,...n};return t(u=>{const d=new Map(u.entities);return d.set(a.uuid,a),{entities:d,uuids:f(d)}}),a},delete(n){t(o=>{const s=new Map(o.entities);return s.delete(n.uuid),{entities:s,uuids:f(s)}})},createMultiple(n){const o=n.map(s=>({...s,uuid:D(),createdAt:Ae()}));t(s=>{const i=new Map(s.entities);if(o.forEach(a=>{i.set(a.uuid,a)}),i.size>=e){const a=i.size-e;mr(i,a).forEach(d=>{i.delete(d.uuid)})}return{entities:i,uuids:f(i)}})},deleteMultiple(n){t(o=>{const s=new Map(o.entities);return n.forEach(i=>{s.delete(i)}),{entities:s,uuids:f(s)}})},clear(){t(()=>({entities:new Map,uuids:new Array}))},refreshUuids(){t(n=>({uuids:f(n.entities)}))},setIsHydrating(n){t(()=>({isHydrating:n}))},setIsHydrated(){t(n=>({isHydrated:!0,isHydrating:!1,uuids:f(n.entities)}))}}))}function Sr(){return _e({uuids:Array(),entities:new Map,isHydrated:!1,isHydrating:!1},(e,t)=>({items(){return k(t().entities)},getByUuid(r){return t().entities.get(r)},create(r){const n={...r,uuid:D()};return e(o=>{const s=new Map(o.entities);return s.set(n.uuid,n),{entities:s,uuids:f(s)}}),n},update(r){const o=t().entities.get(r.uuid);if(!o)return;const i={...o,...r};return e(a=>{const u=new Map(a.entities);return u.set(i.uuid,i),{entities:u,uuids:f(u)}}),i},delete(r){e(n=>{const o=new Map(n.entities);return o.delete(r.uuid),{entities:o,uuids:f(o)}})},createMultiple(r){const n=r.map(o=>({...o,uuid:D()}));e(o=>{const s=new Map(o.entities);return n.forEach(i=>{s.set(i.uuid,i)}),{entities:s,uuids:f(s)}})},deleteMultiple(r){e(n=>{const o=new Map(n.entities);return r.forEach(s=>{o.delete(s)}),{entities:o,uuids:f(o)}})},clear(){e(()=>({entities:new Map,uuids:new Array}))},refreshUuids(){e(r=>({uuids:f(r.entities)}))},setIsHydrating(r){e(()=>({isHydrating:r}))},setIsHydrated(){e(r=>({isHydrated:!0,isHydrating:!1,uuids:f(r.entities)}))}}))}function p({persistStorageItemKey:e,persistStorageType:t="indexedDB",maxCapacity:r,isListeningStorageDOMEvent:n=!0,skipHydration:o=!0}={}){let s;if(cr(r)&&r>0?s=pr(r):s=Sr(),typeof e!="string"||!e)return ge(s);let i;t==="indexedDB"?i=jt():t==="sessionStorage"?i=lr():i=ur();const a=ge(ct(s,{name:e,storage:i,skipHydration:!!o,onRehydrateStorage:u=>function(){window.setTimeout(function(){u.setIsHydrated(),window.setTimeout(function(){Vr(a)},Ie)},Ie)},partialize:u=>{const d=["isHydrated","isHydrating","uuids","items"];return Object.fromEntries(Object.entries(u).filter(([l])=>!d.includes(l)))}}));return n&&gr(a),a}const Ge=p({persistStorageItemKey:"buy-orders"});function Ke(){return Ge.getState().items()}function yn({locationUuid:e,productUuid:t}){return Ke().find(n=>n.locationUuid===e&&n.productUuid===t)}function mn({uuid:e,locationUuid:t,productUuid:r}){return Ke().find(o=>o.uuid!==e&&o.productUuid===r&&o.locationUuid===t)}const We=p({persistStorageItemKey:"planetary-systems"});function Xe(){return We.getState()}function wr(){return Xe().entities}function ae(){return Xe().items()}function Er(e){return wr().get(e)}function Ye(e){return ae().find(t=>t.name.localeCompare(e)===0)}function pn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return ae().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}function Sn({uuid:e,position:t}){return ae().find(r=>r.uuid!==e&&r.position===t)}const ce=p({persistStorageItemKey:"locations"});function Ir(){return ce.getState().entities}function U(){return ce.getState().items()}function Ar(e){return Ir().get(e)}function wn({uuid:e,id:t}){if(!t)return;const r=t.toLocaleUpperCase();return U().find(n=>n.uuid!==e&&!!n.id&&n.id.localeCompare(r)===0)}function hr({id:e,name:t}){if(!(!e&&!t))return U().find(r=>e&&t?r.id===e&&r.name===t:e&&!t?r.id===e:r.name===t)}function En({id:e,name:t,planetarySystemName:r}){if(!(!e&&!t&&!r)){if(r){const n=Ye(r);if(n){const o=n.uuid;return U().find(i=>e&&t?i.id===e&&i.name===t&&i.planetarySystemUuid===o:e&&!t?i.id===e&&i.planetarySystemUuid===o:i.name===t&&i.planetarySystemUuid===o)}}return hr({id:e,name:t})}}function In(e){return U().filter(r=>r.planetarySystemUuid===e)}const Je=p({persistStorageItemKey:"location-types"});function Ze(){return Je.getState()}function Tr(){return Ze().entities}function Qe(){return Ze().items()}function An(e){return Tr().get(e)}function hn(e){return Qe().find(t=>t.name.localeCompare(e)===0)}function Tn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return Qe().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const ue=p({persistStorageItemKey:"moving-entities"});function _r(){return ue.getState().entities}function C(){return ue.getState().items()}function _n(e){return _r().get(e)}function Pn({uuid:e,id:t}){if(!t)return;const r=t.toLocaleUpperCase();return C().find(n=>n.uuid!==e&&!!n.id&&n.id.localeCompare(r)===0)}function On({uuid:e,originalId:t}){if(!t)return;const r=t.toLocaleUpperCase();return C().find(n=>n.uuid!==e&&!!n.originalId&&n.originalId.localeCompare(r)===0)}function Pr({id:e,name:t}){if(!(!e&&!t))return C().find(r=>e&&t?r.id===e&&r.name===t:e&&!t?r.id===e:r.name===t)}function bn({id:e,name:t,planetarySystemName:r}){if(!(!e&&!t&&!r)){if(r){const n=Ye(r);if(n){const o=n.uuid,s=C();let i=s.find(a=>e&&t?a.id===e&&a.name===t&&a.locationUuid===o:e&&!t?a.id===e&&a.locationUuid===o:a.name===t&&a.locationUuid===o);if(!i){const d=U().filter(l=>l.planetarySystemUuid===o).map(l=>l.uuid);i=s.find(l=>e&&t?l.id===e&&l.name===t&&d.includes(l.locationUuid):e&&!t?l.id===e&&d.includes(l.locationUuid):l.name===t&&d.includes(l.locationUuid))}return i}}return Pr({id:e,name:t})}}function Bn(e){return C().filter(r=>{const n=r.locationUuid;if(!n)return!1;const o=Ar(n);if(o)return o.planetarySystemUuid===e;const s=Er(n);if(s)return s.uuid===e})}const H=p({persistStorageItemKey:"moving-entity-classes"});function Or(){return H.getState().entities}function et(){return H.getState().items()}function Rn(){return H.getState().isHydrating}function vn(e){return Or().get(e)}function Mn(e){return et().find(t=>t.name.localeCompare(e)===0)}function Un({uuid:e,name:t}){const r=t.toLocaleLowerCase();return et().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const br=1e3,le=p({persistStorageItemKey:"prices-at-marks",maxCapacity:br});function Br(){return le.getState().items()}function tt(e){return Br().find(t=>t.orderUuid===e)}function Rr(e){return e?((e==null?void 0:e.pricesAtMarks.length)||0)>1:!1}function Cn(e){const t=tt(e);return Rr(t)}function vr(e){le.getState().delete(e)}function Nn(e){const t=tt(e);t&&vr(t)}const V=p({persistStorageItemKey:"product-rarities"});function Mr(){return V.getState().entities}function de(){return V.getState().items()}function Dn(){return V.getState().isHydrating}function Ln(e){return Mr().get(e)}function xn(e){return de().find(t=>t.name.localeCompare(e)===0)}function Fn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return de().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}function kn({uuid:e,value:t}){return de().find(r=>r.uuid!==e&&r.value===t)}const q=p({persistStorageItemKey:"products"});function Ur(){return q.getState().entities}function Cr(){return q.getState().items()}function Hn(){return q.getState().isHydrating}function Vn(e){return Ur().get(e)}function qn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return Cr().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const z=p({persistStorageItemKey:"product-types"});function Nr(){return z.getState().entities}function rt(){return z.getState().items()}function zn(){return z.getState().isHydrating}function jn(e){return Nr().get(e)}function $n(e){return rt().find(t=>t.name.localeCompare(e)===0)}function Gn({uuid:e,name:t}){const r=t.toLocaleLowerCase();return rt().find(n=>n.uuid!==e&&n.name.localeCompare(r)===0)}const nt=p({persistStorageItemKey:"sell-orders"});function ot(){return nt.getState().items()}function Kn({locationUuid:e,productUuid:t}){return ot().find(n=>n.locationUuid===e&&n.productUuid===t)}function Wn({uuid:e,locationUuid:t,productUuid:r}){return ot().find(o=>o.uuid!==e&&o.productUuid===r&&o.locationUuid===t)}const fe=p();function he(){return fe.getState().items()}function Dr(e){return e?he().filter(t=>{if(!t.tags)return!1;const r=t.tags.filter(n=>e.includes(n));return r.length===t.tags.length&&r.length===e.length}):he().filter(t=>!t.tags)}function Lr(e){return fe.getState().create(e)}function xr(e){return fe.getState().deleteMultiple(e)}function X(e){const t=e.tags;if(t!=null&&t.length){const r=Dr(t);if(r.length){const n=r.map(o=>o.uuid);xr(n)}}return Lr(e)}const Fr="/trader/demo-data.json.gz",te=2*1e3,Y=te,I=new Map,st=[nt,Ge,le,q,z,V,ce,Je,We,ue,H],kr=["useSellOrdersStore","useBuyOrdersStore","usePriceHistoriesStore","useProductsStore","useProductTypesStore","useProductRaritiesStore","useLocationsStore","useLocationTypesStore","usePlanetarySystemsStore","useMovingEntitiesStore","useMovingEntityClassesStore"];st.map(e=>{I.set(e,!1)});const it=new Map;st.map((e,t)=>{it.set(e,kr[t])});let re=!0;function Hr(){if(!re)return;const e=new Array;I.forEach((t,r)=>{if(t){const n=it.get(r);if(!n){console.error("");return}e.push(n)}}),e.length===I.size&&qr()}function Vr(e){if(re&&I.has(e)&&!I.get(e)){const t=e.getState().isHydrated,r=e.getState().items,o=!!(typeof r=="function"?r():r).length,s=t&&o;I.set(e,s),s?(re=!1,I.clear()):(I.set(e,!0),Hr())}}async function qr(){const{file:e,error:t}=await ar(Fr,"application/gzip");if(!e){X({entityType:$,messages:[()=>w.jsx(w.Fragment,{children:t})],hideTimeout:Y,tags:["storage-data-import-demo-data"],type:"error",title:"Loading demo data failed"});return}const r=await or(e),n=await ir(r);if(n)return X({entityType:$,messages:[()=>w.jsx(w.Fragment,{children:n})],hideTimeout:Y,tags:["storage-data-import-demo-data"],type:"error",title:"Importing demo data failed"}),n;X({entityType:$,messages:[()=>w.jsxs(w.Fragment,{children:[w.jsx("div",{children:"Demo data successfully loaded."}),w.jsxs("div",{children:["Page will be reloaded in"," ",Math.ceil(te/1e3)," ","seconds to use demo data"]})]})],hideTimeout:Y,tags:["storage-data-import-demo-data"],type:"success",title:"Importing demo data"}),window.setTimeout(function(){window.location.reload()},te)}const zr="_Button_qx05o_1",jr="_NoCapitalize_qx05o_12",$r="_Primary_qx05o_44",Gr="_Fluid_qx05o_49",Kr="_Tiny_qx05o_54",Wr="_Small_qx05o_63",Xr="_Big_qx05o_72",Yr="_TransparentOnDefaultState_qx05o_81",Jr="_Transparent_qx05o_81",Zr="_NoPadding_qx05o_87",Qr="_NoBorder_qx05o_108",en="_IsAlwaysVisible_qx05o_117",tn="_IsStaticBehaviour_qx05o_126",rn="_AsLink_qx05o_162",g={Button:zr,NoCapitalize:jr,Primary:$r,Fluid:Gr,Tiny:Kr,Small:Wr,Big:Xr,TransparentOnDefaultState:Yr,Transparent:Jr,NoPadding:Zr,NoBorder:Qr,IsAlwaysVisible:en,IsStaticBehaviour:tn,AsLink:rn},Xn=A.memo(function({primary:t,fluid:r=!1,size:n,transparent:o=!1,transparentOnDefaultState:s=!1,noPadding:i=!1,noBorder:a=!1,isStaticBehaviour:u=!1,isAlwaysVisible:d=!1,asLink:l,noCapitalize:E=!1,ref:_,type:m="button",children:y,...T}){const j=Pe([g.Button,r&&g.Fluid,n==="tiny"&&g.Tiny,n==="small"&&g.Small,n==="big"&&g.Big,t&&g.Primary,o&&g.Transparent,s&&g.TransparentOnDefaultState,i&&g.NoPadding,a&&g.NoBorder,u&&g.IsStaticBehaviour,l&&g.AsLink,E&&g.NoCapitalize,d&&g.IsAlwaysVisible]);return w.jsx("button",{ref:_,className:j,type:m,...T,children:y})}),Yn=e=>A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...e},A.createElement("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}));function nn({autoFocus:e=!1,autoFocusDelay:t=250}){const r=A.useRef(null);return A.useEffect(function(){if(!e)return;const o=r.current;o&&window.setTimeout(function(){o.focus()},t)},[r,e,t]),r}const on="_InputField_ikonk_1",sn="_Uppercase_ikonk_11",Te={InputField:on,Uppercase:sn},Jn=A.memo(function({type:t="text",autoComplete:r="off",onFieldValueChange:n,name:o,value:s,autoFocusOnFirstRender:i,uppercase:a,...u}){const d=A.useCallback(function(_){if(typeof n!="function")return;if(!o){console.error("Error. Form field must have name");return}const m=_.target.value;n(o,m)},[n,o]),l=nn({autoFocus:i});return w.jsx("input",{ref:l,autoComplete:r,type:t,className:Pe([Te.InputField,a&&Te.Uppercase]),name:o,value:s,onChange:d,...u})}),Zn="",Qn="products",eo="locations",to="moving-entities",ro="map";function no(e){const t=e.map(n=>n(o=>o.isHydrated)).reduce((n,o)=>n&&o,!0),r=!t;return A.useEffect(function(){t||e.forEach(o=>{const{isHydrating:s,isHydrated:i}=o.getState();s||i||(o.getState().isHydrating=!0,o.persist.rehydrate())})},[t,e]),r}export{kn as $,q as A,Xn as B,ie as C,O as D,$ as E,le as F,Ur as G,k as H,qe as I,We as J,tt as K,mn as L,cr as M,Rr as N,br as O,eo as P,Cn as Q,Hn as R,gn as S,Kn as T,Wn as U,yn as V,En as W,Ye as X,nn as Y,V as Z,Fn as _,sr as a,Mr as a0,z as a1,Nr as a2,Ln as a3,jn as a4,Dn as a5,zn as a6,qn as a7,$n as a8,xn as a9,Bn as aA,ae as aB,U as aC,C as aD,bn as aE,_r as aF,Ir as aG,wr as aH,Gn as aa,Je as ab,Tr as ac,Tn as ad,An as ae,Ze as af,Xe as ag,wn as ah,hn as ai,pn as aj,Sn as ak,Zn as al,H as am,vn as an,Rn as ao,ue as ap,Or as aq,Pn as ar,On as as,Mn as at,Un as au,p as av,Yn as aw,Jn as ax,_n as ay,In as az,fn as b,X as c,dn as d,un as e,zt as f,ln as g,Ve as h,ir as i,ro as j,Qn as k,qr as l,to as m,Pe as n,no as o,ut as p,Ar as q,or as r,st as s,Er as t,fe as u,nt as v,Ge as w,Nn as x,Vn as y,ce as z};
