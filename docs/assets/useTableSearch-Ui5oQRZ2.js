import{a as i,q as o,A as G}from"./chunk-PVWAREVJ-D1PIyzeh.js";import{c as q,a as X,b as g}from"./ClassNames-CdIKlwZs.js";import{aP as J,aQ as Z,B as S,I as E,aR as ee,aS as te}from"./useLoadingPersistStorages-BWX3nPU9.js";const ne="_SearchAndFilterFormContainer_y3u8c_1",re={SearchAndFilterFormContainer:ne},zt=i.memo(function({children:e}){return o.jsx("div",{className:re.SearchAndFilterFormContainer,children:e})});function Kt(n){const e=i.useRef(void 0),[t,r]=G(n);i.useEffect(function(){e.current=r},[e,r]);const a=i.useCallback(function(l,c){const u=e.current;if(typeof u!="function")return;const _=new URLSearchParams(window.location.search),f=_.toString(),m=(typeof l=="function"?l(_).toString():l?.toString())===f,h={...c,replace:m};u(l,h)},[e]);return{urlSearchParams:t,setUrlSearchParams:a}}const $t="locationId",ae="locationName",Qt="locationPosition",oe="locationTypeName";function Gt(n){return n.get(ae)||""}function qt(n){return n.get(oe)||""}const le="planetarySystemName";function Xt(n){return n.get(le)||""}const Jt="mapMode",se="search";function Zt(n){return n.get(se)||""}const en="destinationLocationId",tn="destinationLocationName",nn="destinationPlanetarySystemName",rn="homeLocationId",an="homeLocationName",on="homePlanetarySystemName",ie="productName",ce="productType",ue="productRarity";function ln(n){return n.get(ie)||""}function sn(n){return n.get(ce)||""}function cn(n){return n.get(ue)||""}const un="minPrice",fn="maxPrice",dn="minQuantity",_n="maxQuantity",Cn="minProfit",mn="movingEntityId",fe="movingEntityName";function hn(n){return n.get(fe)||""}const de="movingEntityClass";function pn(n){return n.get(de)||""}function Tn(n,e,t="<",r=">"){return n?`${n} ${t}${e}${r}`:""}function _e(){return X({lastFilledAt:void 0,isProcessing:!1,items:Array()},n=>({prepareData(){},setIsProcessing(e){n(()=>({isProcessing:e}))},replaceAll(e){n(()=>{const t=new Date().getTime();return{items:e,lastFilledAt:t}})}}))}function gn(){const n=_e();return q(n)}function An(n){const e=n.map(r=>r(a=>!!a.lastFilledAt)).reduce((r,a)=>r&&a,!0),t=!e;return i.useEffect(function(){e||n.forEach(a=>{const s=a.getState().isProcessing,l=a.getState().lastFilledAt;!s&&!l&&a.getState().prepareData()})},[e,n]),t}function Ce({elementRef:n,onHide:e,currentModalDialog:t}){i.useEffect(function(){if(typeof e!="function"||!t)return;function a(l){if(typeof e!="function")return;const c=n.current;c&&c.contains(l.target)||e()}const s=window.requestAnimationFrame(()=>{window.addEventListener("click",a)});return function(){window.removeEventListener("click",a),window.cancelAnimationFrame(s)}},[e,n,t])}function me({elementRef:n,onHide:e,currentModalDialog:t}){i.useEffect(function(){if(typeof e!="function"||!t)return;function a(l){if(typeof e!="function")return;const c=n.current;c&&c.contains(l.target)||e()}const s=window.requestAnimationFrame(()=>{window.addEventListener("focusin",a)});return function(){window.removeEventListener("focusin",a),window.cancelAnimationFrame(s)}},[e,n,t])}const he="_DialogWrapper_d3n18_1",pe="_DialogContainer_d3n18_13",Te="_HeaderContainer_d3n18_26",ge="_NoPaddingForCloseButton_d3n18_34",Ae="_TitleContainer_d3n18_38",be="_Title_d3n18_38",Se="_CenterText_d3n18_57",Ee="_SubTitle_d3n18_61",Re="_CloseButtonContainer_d3n18_69",b={DialogWrapper:he,DialogContainer:pe,HeaderContainer:Te,NoPaddingForCloseButton:ge,TitleContainer:Ae,Title:be,CenterText:Se,SubTitle:Ee,CloseButtonContainer:Re},bn=i.memo(function({title:e,isTitleCentered:t,subTitle:r,noCloseButton:a,onHide:s,children:l}){const c=i.useRef(null),u=J(),_=i.useMemo(function(){return typeof s=="function"},[s]);Ce({elementRef:c,onHide:s,currentModalDialog:u}),me({elementRef:c,onHide:s,currentModalDialog:u}),Z({onClose:s,currentModalDialog:u});const f=i.useCallback(function(){typeof s=="function"&&s()},[s]),C=i.useId(),m=i.useId();return o.jsx("dialog",{ref:c,className:b.DialogWrapper,"aria-labelledby":C,...r?{"aria-describedby":m}:void 0,children:o.jsxs("div",{className:b.DialogContainer,children:[(!!e||!!r)&&o.jsx("div",{className:g([b.HeaderContainer,(a||!_)&&b.NoPaddingForCloseButton]),children:o.jsxs("div",{className:b.TitleContainer,children:[o.jsx("h2",{className:g([b.Title,t&&b.CenterText]),id:C,children:typeof e=="function"?e():e}),!!r&&o.jsx("div",{className:b.SubTitle,id:m,children:r})]})}),l,!a&&_&&o.jsx("div",{className:b.CloseButtonContainer,children:o.jsx(S,{transparent:!0,noBorder:!0,noPadding:!0,onClick:f,title:"close dialog",children:o.jsx(E,{name:"close"})})})]})})});function Ne({items:n,delayInMs:e=1,batchSize:t=1,isTrottleOnlyNewItems:r=!0}){const[a,s]=i.useState([]),l=i.useRef(0),c=i.useRef(0),u=i.useRef(0),_=i.useRef([]),f=i.useCallback(function(m){s(m),_.current=m},[s]);return i.useEffect(function(){let m;const h=l.current||0;c.current=0;function p(){if(c.current>=n.length){l.current=c.current;return}const T=new Date().getTime(),j=T-u.current,y=j>0&&j<e?j+e:e;u.current=T+y,m=window.setTimeout(function(){const A=c.current,L=r&&A===0&&n.length>=l.current&&h||t,I=A+L,x=n.slice(0,I);c.current=x.length,f(x),p()},y)}return p(),function(){window.clearTimeout(m)}},[e,n,f,t,r,l,c,u]),a}function Pe(){const[n,e]=i.useState({width:0,height:0});return i.useLayoutEffect(function(){const r=()=>{e({width:window.innerWidth,height:window.innerHeight})};return r(),window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[]),n}function je(n,e){const[t,r]=i.useState({vertical:!1,horizontal:!1}),a=i.useCallback(function(){const c=n.current;if(!c){r({vertical:!1,horizontal:!1});return}const u=window.getComputedStyle(c).overflowY,_=window.getComputedStyle(c).overflowX;r({horizontal:(_==="scroll"||_==="auto")&&c.scrollWidth>c.clientWidth,vertical:(u==="scroll"||u==="auto")&&c.scrollHeight>c.clientHeight})},[n]);i.useLayoutEffect(function(){a()},[a]);const s=Pe();return i.useEffect(function(){a()},[s,e,a]),t}function xe(n,e=null){const t=n.getBoundingClientRect(),a=(e||n.parentElement||window.document.body)?.getBoundingClientRect();return t.top>=a.top&&t.bottom<=a.bottom&&t.left>=a.left&&t.right<=a.right}const ye="_TableWrapper_ltj1s_1",Le="_TableContainer_ltj1s_10",Fe="_Table_ltj1s_1",Ie="_TableHeaderContainer_ltj1s_23",we="_TableHeaderLeftPart_ltj1s_37",He="_TableHeaderRightPart_ltj1s_44",Me="_TableItemsQuantity_ltj1s_51",ve="_TableTitle_ltj1s_58",ke="_TableTitleActonButtons_ltj1s_67",De="_TableHead_ltj1s_23",Oe="_Row_ltj1s_97",Be="_Cell_ltj1s_104",Ue="_CellCheckbox_ltj1s_104",Ve="_HighlightRow_ltj1s_157",Ye="_HighlightRowBlinking_ltj1s_161",We="_HeaderCell_ltj1s_168",ze="_TableContainerWithVisibleScrollbar_ltj1s_186",Ke="_HeaderCellContentWrapper_ltj1s_211",$e="_HeaderCellAlignToLeft_ltj1s_221",Qe="_HeaderCellAlignToCenter_ltj1s_225",Ge="_HeaderCellAlignToRight_ltj1s_230",qe="_HeaderCellCheckbox_ltj1s_234",Xe="_HeaderCellLabel_ltj1s_245",Je="_HeaderCellSortingIcon_ltj1s_251",Ze="_AscDirectionIcon_ltj1s_258",et="_DescDirectionIcon_ltj1s_263",tt="_CellContent_ltj1s_273",nt="_CellValue_ltj1s_319",rt="_CellValueLabel_ltj1s_326",at="_CellCapitalize_ltj1s_334",ot="_CellUppercase_ltj1s_339",lt="_CellFontMonospace_ltj1s_344",st="_CellNoWrap_ltj1s_350",it="_CellAlignToLeft_ltj1s_355",ct="_CellAlignToCenter_ltj1s_360",ut="_CellAlignToRight_ltj1s_365",ft="_CellValueLabelAsLink_ltj1s_370",dt="_CellActionButtonsGroup_ltj1s_382",_t="_NoData_ltj1s_423",Ct="_LoadingData_ltj1s_424",mt="_NoDataCell_ltj1s_434",d={TableWrapper:ye,TableContainer:Le,Table:Fe,TableHeaderContainer:Ie,TableHeaderLeftPart:we,TableHeaderRightPart:He,TableItemsQuantity:Me,TableTitle:ve,TableTitleActonButtons:ke,TableHead:De,Row:Oe,Cell:Be,CellCheckbox:Ue,HighlightRow:Ve,HighlightRowBlinking:Ye,HeaderCell:We,TableContainerWithVisibleScrollbar:ze,HeaderCellContentWrapper:Ke,HeaderCellAlignToLeft:$e,HeaderCellAlignToCenter:Qe,HeaderCellAlignToRight:Ge,HeaderCellCheckbox:qe,HeaderCellLabel:Xe,HeaderCellSortingIcon:Je,AscDirectionIcon:Ze,DescDirectionIcon:et,CellContent:tt,CellValue:nt,CellValueLabel:rt,CellCapitalize:at,CellUppercase:ot,CellFontMonospace:lt,CellNoWrap:st,CellAlignToLeft:it,CellAlignToCenter:ct,CellAlignToRight:ut,CellValueLabelAsLink:ft,CellActionButtonsGroup:dt,NoData:_t,LoadingData:Ct,NoDataCell:mt},ht="_FilterParametersInfoContainer_owofz_1",pt="_FilterParametersTitle_owofz_9",Tt="_FilterParametersList_owofz_15",gt="_FilterParametersListItem_owofz_23",At="_FilterParameterName_owofz_29",bt="_FilterParameterValue_owofz_37",R={FilterParametersInfoContainer:ht,FilterParametersTitle:pt,FilterParametersList:Tt,FilterParametersListItem:gt,FilterParameterName:At,FilterParameterValue:bt},St=i.memo(function({filterValue:e,filterInfoFields:t=[]}){const r=i.useMemo(function(){if(!e)return[];if(!t?.length)return[];const s=Object.keys(e),l=t.map(({name:u,groupNames:_})=>{let f=[u];return _&&(f=f.concat(..._)),f}).flat().filter(u=>u),c=[];return l.forEach(u=>{s.includes(u)&&c.push(u)}),c},[e,t]);return!e||!t?.length||!r.length?null:o.jsxs("div",{className:R.FilterParametersInfoContainer,children:[o.jsx("div",{className:R.FilterParametersTitle,children:"Filtered by"}),o.jsx("ul",{className:R.FilterParametersList,children:t.map(({name:a,label:s,formatLabelAndValue:l})=>{let c=s||a.toString(),u=`${e[a]}`;if(typeof l=="function"){const _=l({name:a,label:s,value:e[a],filterValue:e});if(!_)return;c=_.label,u=_.value}if(u!==void 0)return o.jsxs("li",{className:R.FilterParametersListItem,children:[o.jsxs("span",{className:R.FilterParameterName,children:[c,":"]}),o.jsx("span",{className:R.FilterParameterValue,children:u})]},a.toLocaleString())})})]})}),F="none",N="asc",P="desc",Et={[F]:N,[N]:P,[P]:F};function k(n){return n===N||n===P}function Rt(n){return n?Et[n]:N}function U(n){return typeof n.isCheckbox=="boolean"}function Nt(n){return typeof n.asLinkToEditItem=="boolean"}const Pt=function({children:e}){return o.jsx("span",{className:d.NoDataCell,children:e})},jt=i.memo(function({areAllItemsSelected:e=!1,onSelectAllItems:t}){const r=i.useCallback(function(){typeof t=="function"&&t(!e)},[t,e]);return o.jsx("th",{className:g([d.HeaderCell,d.HeaderCellCheckbox]),children:o.jsx("div",{className:d.HeaderCellContentWrapper,children:o.jsx("div",{className:d.HeaderCellLabel,children:o.jsx("input",{type:"checkbox",name:"all",checked:e,onChange:r})})})})}),xt=i.memo(function({column:e,columnsToSortBy:t,align:r="center",onColumnHeaderClick:a}){const s=g([d.HeaderCell,r==="left"&&d.HeaderCellAlignToLeft||(!r||r==="center")&&d.HeaderCellAlignToCenter||r==="right"&&d.HeaderCellAlignToRight]),l=i.useMemo(function(){return t.find(m=>m.name===e.name)?.sort},[e,t]),c=g([d.HeaderCellSortingIcon,l===N&&d.AscDirectionIcon,l===P&&d.DescDirectionIcon]),u=i.useCallback(function(){if(!e.isSortable||typeof a!="function")return;const C=Rt(l);a(e,C)},[e,a,l]),_=e.isSortable&&typeof a=="function";return o.jsx("th",{className:s,children:o.jsx(S,{transparentOnDefaultState:!0,fluid:!0,noBorder:!0,noPadding:!0,noCapitalize:!0,onClick:u,disabled:!_,children:o.jsxs("div",{className:d.HeaderCellContentWrapper,children:[o.jsx("div",{className:d.HeaderCellLabel,children:e.label??e.name}),e.isSortable&&l!==F&&l!==void 0&&o.jsxs("div",{className:c,children:[l===N&&"⯅",l===P&&"⯆"]})]})})})}),V=i.memo(function({onClick:e,align:t="center",asLink:r=!1,capitalize:a=!1,uppercase:s=!1,monospaced:l=!1,nowrap:c=!1,isCheckbox:u=!1,actionButtons:_,children:f}){return o.jsx("td",{className:g([d.Cell,u&&d.CellCheckbox]),children:o.jsxs("div",{className:d.CellContent,children:[o.jsx("div",{className:g([d.CellValue,t==="left"&&d.CellAlignToLeft||t==="right"&&d.CellAlignToRight||(!t||t==="center")&&d.CellAlignToCenter]),children:o.jsx("div",{className:g([d.CellValueLabel,r&&d.CellValueLabelAsLink,a&&d.CellCapitalize,s&&d.CellUppercase,l&&d.CellFontMonospace,c&&d.CellNoWrap]),children:r?o.jsx(S,{onClick:e,transparent:!0,noBorder:!0,noPadding:!0,noCapitalize:!a,children:f}):f})}),!!_&&o.jsx("div",{className:d.CellActionButtonsGroup,children:_})]})})}),yt=i.memo(function({item:e,selectedItemsUuids:t,onSelectItem:r}){const a=i.useMemo(function(){return t?.length?!!t.find(c=>c===e.uuid):!1},[t,e]),s=i.useCallback(function(){typeof r=="function"&&r(e,!a)},[r,e,a]);return o.jsx(V,{align:"center",isCheckbox:!0,children:o.jsx("input",{type:"checkbox",checked:a,name:"uuid",value:e.uuid,onChange:s})})}),D=i.memo(function({item:e,column:t,columnIndex:r,onSelectItem:a}){const s=i.useCallback(function(){typeof a=="function"&&a(e)},[a,e]),l=i.useMemo(function(){const f=t.formatValue;return typeof f=="function"?function(){return o.jsx(f,{value:e[t.name],item:e})}:function(){return o.jsx(o.Fragment,{children:e[t.name]===null||e[t.name]===void 0?o.jsx(Pt,{children:"(no data)"}):`${e[t.name]}`})}},[t,e]),c=i.useMemo(function(){const f=t.actionButtons;if(typeof f=="function")return o.jsx(o.Fragment,{children:o.jsx(f,{value:e[t.name],item:e})})},[t,e]);let u;return t.type==="number"?u="right":r===0&&(u="left"),t.alignLabel==="left"?u="left":t.alignLabel==="right"?u="right":t.alignLabel==="center"&&(u="center"),o.jsx(V,{align:u,capitalize:t.capitalize,uppercase:t.uppercase,monospaced:t.monospaced,nowrap:t.nowrap,onClick:s,actionButtons:c,asLink:t.asLinkToEditItem||t.asLinkToSelectItem,children:o.jsx(l,{})})}),Lt=i.memo(function({item:e,onClick:t,isHighlightRow:r,isHighlightRowBlinking:a,children:s}){const l=i.useRef(null),c=i.useCallback(function(){typeof t=="function"&&t(e)},[t,e]);return i.useEffect(function(){if(!r)return;const _=l?.current;if(!_)return;const f=_.closest("table")?.parentElement;xe(_,f)||_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},[r]),o.jsx("tr",{ref:l,className:g([d.Row,r&&d.HighlightRow,r&&a&&d.HighlightRowBlinking]),onClick:c,children:s})}),Ft=i.memo(function({item:e,columns:t,selectedItemsUuids:r,onEditItem:a,onSelectItem:s,isHighlightRow:l}){return o.jsx(Lt,{isHighlightRow:l,isHighlightRowBlinking:!0,children:t.map((c,u)=>U(c)?o.jsx(yt,{item:e,selectedItemsUuids:r,onSelectItem:s},c.name):Nt(c)?o.jsx(D,{item:e,column:c,columnIndex:u,onSelectItem:a},c.name):o.jsx(D,{item:e,column:c,columnIndex:u},c.name))})}),It=i.memo(function({tableColumns:e,columnsToSortBy:t,areAllItemsSelected:r,onSelectAllItems:a,onColumnHeaderClick:s}){return o.jsx("thead",{className:d.TableHead,children:o.jsx("tr",{children:e.map(l=>U(l)?o.jsx(jt,{areAllItemsSelected:r,onSelectAllItems:a},l.name):o.jsx(xt,{column:l,columnsToSortBy:t,onColumnHeaderClick:s},l.name))})})}),Sn=i.memo(function({items:e,columns:t,selectedItemsUuids:r=[],onEditItem:a=()=>{},onSelectItem:s=()=>{},lastCreatedOrUpdatedItem:l}){const c=Ne({items:e});return o.jsx(o.Fragment,{children:c.map(u=>o.jsx(Ft,{item:u,columns:t,selectedItemsUuids:r,onEditItem:a,onSelectItem:s,isHighlightRow:l?.uuid===u.uuid},u.uuid))})}),En=i.memo(function({tableTitle:e="Table",tableColumns:t=[],items:r=[],noItemsLabel:a="no data",isLoading:s=!1,loadingLabel:l="loading data...",itemTypeName:c="item",itemTypeNamePlural:u="items",searchFieldValue:_,filterValue:f,isAppliedFilter:C,onEnableFilter:m,onDisableFilter:h,filterInfoFields:p,onShowCreateItemModal:T,showCreateItemModalButtonLabel:j="add item",columnsToSortBy:y=[],onColumnHeaderClick:w,selectedItemsUuids:A,onResetSelectedItems:L,onSelectAllItems:I,onDeleteSelectedItems:x,CopySelectedItemsButton:H,children:W}){const M=i.useRef(null),{vertical:z}=je(M,r),K=g([d.TableContainer,z&&d.TableContainerWithVisibleScrollbar]),$=i.useMemo(function(){return!r.length||!A?.length?!1:!r.find(Q=>!A.includes(Q.uuid))},[r,A]),v=!!A?.length;return o.jsxs("div",{className:d.TableWrapper,children:[o.jsxs("div",{className:d.TableHeaderContainer,children:[o.jsxs("div",{className:d.TableHeaderLeftPart,children:[o.jsx("h2",{className:d.TableTitle,children:e}),o.jsxs("div",{className:d.TableTitleActonButtons,children:[!v&&o.jsx(o.Fragment,{children:T&&o.jsx(S,{noPadding:!0,transparent:!0,onClick:T,title:j,children:o.jsx(E,{name:"add"})})}),v&&o.jsxs(o.Fragment,{children:[typeof L=="function"&&o.jsx(S,{disabled:!A?.length,noPadding:!0,transparent:!0,onClick:L,title:"clear selection",children:o.jsx(E,{name:"remove_selection"})}),typeof x=="function"&&o.jsx(S,{disabled:!A?.length,noPadding:!0,transparent:!0,onClick:x,title:"delete selected items",children:o.jsx(E,{name:"delete_forever"})}),typeof H=="function"&&H()]})]})]}),o.jsxs("div",{className:d.TableHeaderRightPart,children:[o.jsxs("div",{className:d.TableItemsQuantity,children:[f||_?"found":"total"," ",r.length," ",r.length>1||r.length===0?u:c]}),typeof m=="function"&&typeof h=="function"&&!!f&&(C?o.jsx(S,{noPadding:!0,transparent:!0,onClick:h,title:"disable filter",children:o.jsx(E,{name:"filter_alt_off"})}):o.jsx(S,{noPadding:!0,transparent:!0,onClick:m,title:"apply filter",children:o.jsx(E,{name:"filter_alt"})}))]})]}),C&&!!f&&o.jsx("div",{className:d.TableFilterInfoContainer,children:o.jsx(St,{filterValue:f,filterInfoFields:p})}),o.jsx("div",{ref:M,className:K,children:o.jsxs("table",{className:d.Table,children:[o.jsx(It,{tableColumns:t,columnsToSortBy:y,areAllItemsSelected:$,onSelectAllItems:I,onColumnHeaderClick:w}),o.jsxs("tbody",{children:[s&&o.jsx("tr",{children:o.jsx("td",{colSpan:100,rowSpan:100,className:d.LoadingData,children:l})}),!s&&!r.length&&o.jsx("tr",{children:o.jsx("td",{colSpan:100,rowSpan:100,className:d.NoData,children:a})}),!s&&!!r.length&&W]})]})})]})});function O(n,e){return!n.find(r=>!e.includes(r.name))}function wt(n){const e=n.sort===P?-1:1,t=n.sortFn;if(typeof t=="function")return function(s,l){return t(s[n.name],l[n.name],s,l)*e};const r=n.name;return n.type==="number"?function(s,l){return((s[r]??0)-(l[r]??0))*e}:function(s,l){return(s[r]||"").localeCompare(l[r]||"")*e}}function Rn(n,e,t){const r=i.useMemo(function(){const C=e.filter(m=>m.isSortable).filter(m=>k(m.sort));return C.length?O(C,t)?C:[C[0]]:[]},[t,e]),[a,s]=i.useState(r);i.useEffect(function(){s(r)},[r,s]);const l=i.useCallback(function(C,m){C.isSortable&&s(h=>{if(m===F)return h.filter(T=>T.name!==C.name);const p=h.filter(T=>T.name!==C.name).concat({...C,sort:m});return O(p,t)?p:[{...C,sort:m}]})},[s,t]),c=i.useMemo(function(){return a.filter(C=>C.isSortable).filter(C=>k(C.sort)).map(C=>wt(C))},[a]),u=i.useMemo(function(){return function(m,h){const p=c.find(T=>T(m,h)!==0);return p?p(m,h):0}},[c]);return{sortedItems:i.useMemo(function(){return Array().concat(n).sort(u)},[n,u]),columnsToSortBy:a,handleColumnSortClick:l}}function Y(n){const e={};return n.forEach(t=>{if(ee(t)){const{fields:r}=t;if(r instanceof Array){const a=Y(r);Object.keys(a).forEach(s=>{e[s]=a[s]})}}else{const{name:r,filterPredicate:a}=t;typeof a=="function"&&(e[r]=a)}}),e}function Ht(n,e,t,r){let a=!0;for(const s in t)if(t[s]&&typeof e[s]=="function"&&(a=e[s](n,t,r),!a))return!1;return a}function Nn(n=[],e=[],t){const r=i.useMemo(function(){return Y(e)},[e]),a=i.useCallback(function(c,u,_){return!t||!r?!0:Ht(c,r,t,_)},[t,r]);return i.useMemo(function(){return n.filter(a)},[n,a])}function Pn(n){return typeof n=="string"}function jn(n){for(const t in n){const r=t;n[r]||delete n[r]}if(Object.values(n).filter(t=>!!t).length)return n}function xn(n,e){if(!n&&!e)return!1;if(!n||!e)return!0;for(const t in n)if(n[t]!==e[t])return!0;for(const t in e)if(n[t]!==e[t])return!0;return!1}function Mt(n,e,t){const[r,a]=i.useState(n);return i.useEffect(function(){if(n===r)return;const l=window.setTimeout(function(){a(n),typeof t=="function"&&t(n)},e);return function(){window.clearTimeout(l)}},[n,e,r,t]),r}const vt="_SearchByNameForm_1ufkm_1",kt="_SearchField_1ufkm_7",B={SearchByNameForm:vt,SearchField:kt},Dt=i.memo(function({searchFieldValue:e,searchFieldPlaceholderText:t="Type to search...",searchFieldName:r="q",onSearch:a}){const s=i.useRef(null),l=i.useCallback(()=>{const f=s.current;if(!f)return;const C=Object.fromEntries(new FormData(f).entries());a(C?.[r])},[a,r]),c=i.useCallback(f=>{f.preventDefault(),l()},[l]),u=i.useCallback(f=>{const C=f.target.value;a(C)},[a]),_=i.useCallback(()=>{a(void 0)},[a]);return o.jsx("form",{ref:s,onSubmit:c,onReset:_,className:B.SearchByNameForm,children:o.jsxs("div",{className:B.SearchField,children:[o.jsx(te,{type:"text",name:r,required:!1,autoComplete:"on",spellCheck:"false",placeholder:t,value:e,onChange:u}),o.jsx(S,{type:"reset",title:"clear search field value",children:o.jsx(E,{name:"clear"})})]})})}),Ot=500;function Bt({searchFieldName:n,searchFieldInitialValue:e,searchFieldPlaceholderText:t,onValueChange:r}){const[a,s]=i.useState(e);i.useEffect(function(){s(e)},[e,s]);const l=i.useCallback(function(f){s(f||"")},[s]),c=i.useCallback(function(){l("")},[l]),u=i.useMemo(function(){return o.jsx(Dt,{searchFieldValue:a,searchFieldName:n,searchFieldPlaceholderText:t,onSearch:l})},[a,n,t,l]);return Mt(a,Ot,r),{SearchForm:u,setValue:s,resetValue:c}}function yn({urlSearchParams:n,setUrlSearchParams:e,getSearchValueFromUrlSearchParams:t,searchValueKeyInUrlSearchParams:r,searchFieldNameInSearchForm:a,searchFieldPlaceholderTextInSearchForm:s}){const l=i.useMemo(function(){return t(n)},[n,t]),c=i.useCallback(function(C){let m;if(typeof C=="function")throw new Error("searchValue as setState(prev=>newState) function not supported in setSearchValueToUrlSearchParams()");m=C,e(h=>{const p=t(h);return m!==p&&(m?h.set(r,m):h.delete(r)),h})},[e,t,r]),{SearchForm:u,resetValue:_}=Bt({searchFieldInitialValue:l,searchFieldName:a,onValueChange:c,searchFieldPlaceholderText:s});return{searchFieldValue:l,SearchForm:u,resetSearchFieldValue:_}}export{je as A,Cn as B,mn as C,bn as D,fe as E,Jt as F,Zt as G,se as H,cn as I,ue as J,ce as K,sn as L,de as M,Pt as N,en as O,tn as P,nn as Q,rn as R,zt as S,En as T,un as U,an as V,on as W,hn as X,pn as Y,Qt as Z,Nn as a,Rn as b,Sn as c,xn as d,fn as e,dn as f,_n as g,$t as h,Pn as i,ae as j,le as k,jn as l,yn as m,ln as n,ie as o,Kt as p,gn as q,Tn as r,qt as s,oe as t,An as u,Gt as v,Xt as w,Lt as x,D as y,Ne as z};
